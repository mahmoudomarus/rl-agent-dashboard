import{j as e,S as t,P as s,R as r,C as a,a as n,X as i,T as o,D as l,b as c,O as d,c as u,d as h,u as m,e as p,f,g,A as x,h as v,i as b,k as y,l as w,m as j,n as N,o as k,p as _,q as S,r as C,I as E,M as P,L as T,E as A,s as R,U as O,H as I,B as $,t as D,v as L,w as U,x as M,y as B,z,F,G as q,J as W,K as H,N as G,Q as K,V,W as J,Y,Z as X,_ as Q,$ as Z,a0 as ee,a1 as te,a2 as se,a3 as re,a4 as ae,a5 as ne,a6 as ie,a7 as oe,a8 as le,a9 as ce,aa as de,ab as ue,ac as he,ad as me,ae as pe,af as fe,ag as ge,ah as xe,ai as ve,aj as be,ak as ye,al as we,am as je,an as Ne,ao as ke,ap as _e,aq as Se,ar as Ce,as as Ee,at as Pe,au as Te,av as Ae,aw as Re,ax as Oe,ay as Ie,az as $e}from"./ui-KYnGOIk-.js";import{a as De,r as Le,R as Ue,d as Me,c as Be,b as ze,v as Fe}from"./vendor-BKjmSbiz.js";import{c as qe,R as We,L as He,C as Ge,X as Ke,Y as Ve,T as Je,a as Ye,A as Xe,b as Qe,P as Ze,d as et,e as tt}from"./charts-DyXe_cX1.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const s of e)if("childList"===s.type)for(const e of s.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var st,rt,at={},nt=De;
/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */
function it(){return it=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r])}return e},it.apply(this,arguments)}at.createRoot=nt.createRoot,at.hydrateRoot=nt.hydrateRoot,(rt=st||(st={})).Pop="POP",rt.Push="PUSH",rt.Replace="REPLACE";const ot="popstate";function lt(e){return void 0===e&&(e={}),function(e,t,s,r){void 0===r&&(r={});let{window:a=document.defaultView,v5Compat:n=!1}=r,i=a.history,o=st.Pop,l=null,c=d();null==c&&(c=0,i.replaceState(it({},i.state,{idx:c}),""));function d(){return(i.state||{idx:null}).idx}function u(){o=st.Pop;let e=d(),t=null==e?null:e-c;c=e,l&&l({action:o,location:f.location,delta:t})}function h(e,t){o=st.Push;let s=ht(f.location,e,t);c=d()+1;let r=ut(s,c),u=f.createHref(s);try{i.pushState(r,"",u)}catch(h){if(h instanceof DOMException&&"DataCloneError"===h.name)throw h;a.location.assign(u)}n&&l&&l({action:o,location:f.location,delta:1})}function m(e,t){o=st.Replace;let s=ht(f.location,e,t);c=d();let r=ut(s,c),a=f.createHref(s);i.replaceState(r,"",a),n&&l&&l({action:o,location:f.location,delta:0})}function p(e){let t="null"!==a.location.origin?a.location.origin:a.location.href,s="string"==typeof e?e:mt(e);return s=s.replace(/ $/,"%20"),ct(t,"No window.location.(origin|href) available to create URL for href: "+s),new URL(s,t)}let f={get action(){return o},get location(){return e(a,i)},listen(e){if(l)throw new Error("A history only accepts one active listener");return a.addEventListener(ot,u),l=e,()=>{a.removeEventListener(ot,u),l=null}},createHref:e=>t(a,e),createURL:p,encodeLocation(e){let t=p(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:h,replace:m,go:e=>i.go(e)};return f}(function(e,t){let{pathname:s,search:r,hash:a}=e.location;return ht("",{pathname:s,search:r,hash:a},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){return"string"==typeof t?t:mt(t)},0,e)}function ct(e,t){if(!1===e||null==e)throw new Error(t)}function dt(e,t){if(!e){"undefined"!=typeof console&&console.warn(t);try{throw new Error(t)}catch(s){}}}function ut(e,t){return{usr:e.state,key:e.key,idx:t}}function ht(e,t,s,r){return void 0===s&&(s=null),it({pathname:"string"==typeof e?e:e.pathname,search:"",hash:""},"string"==typeof t?pt(t):t,{state:s,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function mt(e){let{pathname:t="/",search:s="",hash:r=""}=e;return s&&"?"!==s&&(t+="?"===s.charAt(0)?s:"?"+s),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function pt(e){let t={};if(e){let s=e.indexOf("#");s>=0&&(t.hash=e.substr(s),e=e.substr(0,s));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}var ft,gt;function xt(e,t,s){return void 0===s&&(s="/"),function(e,t,s){let r="string"==typeof t?pt(t):t,a=At(r.pathname||"/",s);if(null==a)return null;let n=vt(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let s=e.length===t.length&&e.slice(0,-1).every((e,s)=>e===t[s]);return s?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(n);let i=null;for(let o=0;null==i&&o<n.length;++o){let e=Tt(a);i=Et(n[o],e)}return i}(e,t,s)}function vt(e,t,s,r){void 0===t&&(t=[]),void 0===s&&(s=[]),void 0===r&&(r="");let a=(e,a,n)=>{let i={relativePath:void 0===n?e.path||"":n,caseSensitive:!0===e.caseSensitive,childrenIndex:a,route:e};i.relativePath.startsWith("/")&&(ct(i.relativePath.startsWith(r),'Absolute route path "'+i.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),i.relativePath=i.relativePath.slice(r.length));let o=It([r,i.relativePath]),l=s.concat(i);e.children&&e.children.length>0&&(ct(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+o+'".'),vt(e.children,t,l,o)),(null!=e.path||e.index)&&t.push({path:o,score:Ct(o,e.index),routesMeta:l})};return e.forEach((e,t)=>{var s;if(""!==e.path&&null!=(s=e.path)&&s.includes("?"))for(let r of bt(e.path))a(e,t,r);else a(e,t)}),t}function bt(e){let t=e.split("/");if(0===t.length)return[];let[s,...r]=t,a=s.endsWith("?"),n=s.replace(/\?$/,"");if(0===r.length)return a?[n,""]:[n];let i=bt(r.join("/")),o=[];return o.push(...i.map(e=>""===e?n:[n,e].join("/"))),a&&o.push(...i),o.map(t=>e.startsWith("/")&&""===t?"/":t)}(gt=ft||(ft={})).data="data",gt.deferred="deferred",gt.redirect="redirect",gt.error="error";const yt=/^:[\w-]+$/,wt=3,jt=2,Nt=1,kt=10,_t=-2,St=e=>"*"===e;function Ct(e,t){let s=e.split("/"),r=s.length;return s.some(St)&&(r+=_t),t&&(r+=jt),s.filter(e=>!St(e)).reduce((e,t)=>e+(yt.test(t)?wt:""===t?Nt:kt),r)}function Et(e,t,s){let{routesMeta:r}=e,a={},n="/",i=[];for(let o=0;o<r.length;++o){let e=r[o],s=o===r.length-1,l="/"===n?t:t.slice(n.length)||"/",c=Pt({path:e.relativePath,caseSensitive:e.caseSensitive,end:s},l),d=e.route;if(!c)return null;Object.assign(a,c.params),i.push({params:a,pathname:It([n,c.pathname]),pathnameBase:$t(It([n,c.pathnameBase])),route:d}),"/"!==c.pathnameBase&&(n=It([n,c.pathnameBase]))}return i}function Pt(e,t){"string"==typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[s,r]=function(e,t,s){void 0===t&&(t=!1);void 0===s&&(s=!0);dt("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let r=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,s)=>(r.push({paramName:t,isOptional:null!=s}),s?"/?([^\\/]+)?":"/([^\\/]+)"));e.endsWith("*")?(r.push({paramName:"*"}),a+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):s?a+="\\/*$":""!==e&&"/"!==e&&(a+="(?:(?=\\/|$))");let n=new RegExp(a,t?void 0:"i");return[n,r]}(e.path,e.caseSensitive,e.end),a=t.match(s);if(!a)return null;let n=a[0],i=n.replace(/(.)\/+$/,"$1"),o=a.slice(1);return{params:r.reduce((e,t,s)=>{let{paramName:r,isOptional:a}=t;if("*"===r){let e=o[s]||"";i=n.slice(0,n.length-e.length).replace(/(.)\/+$/,"$1")}const l=o[s];return e[r]=a&&!l?void 0:(l||"").replace(/%2F/g,"/"),e},{}),pathname:n,pathnameBase:i,pattern:e}}function Tt(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return dt(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function At(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let s=t.endsWith("/")?t.length-1:t.length,r=e.charAt(s);return r&&"/"!==r?null:e.slice(s)||"/"}function Rt(e,t,s,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+s+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function Ot(e,t,s,r){let a;void 0===r&&(r=!1),"string"==typeof e?a=pt(e):(a=it({},e),ct(!a.pathname||!a.pathname.includes("?"),Rt("?","pathname","search",a)),ct(!a.pathname||!a.pathname.includes("#"),Rt("#","pathname","hash",a)),ct(!a.search||!a.search.includes("#"),Rt("#","search","hash",a)));let n,i=""===e||""===a.pathname,o=i?"/":a.pathname;if(null==o)n=s;else{let e=t.length-1;if(!r&&o.startsWith("..")){let t=o.split("/");for(;".."===t[0];)t.shift(),e-=1;a.pathname=t.join("/")}n=e>=0?t[e]:"/"}let l=function(e,t){void 0===t&&(t="/");let{pathname:s,search:r="",hash:a=""}="string"==typeof e?pt(e):e,n=s?s.startsWith("/")?s:function(e,t){let s=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?s.length>1&&s.pop():"."!==e&&s.push(e)}),s.length>1?s.join("/"):"/"}(s,t):t;return{pathname:n,search:Dt(r),hash:Lt(a)}}(a,n),c=o&&"/"!==o&&o.endsWith("/"),d=(i||"."===o)&&s.endsWith("/");return l.pathname.endsWith("/")||!c&&!d||(l.pathname+="/"),l}const It=e=>e.join("/").replace(/\/\/+/g,"/"),$t=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Dt=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",Lt=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";const Ut=["post","put","patch","delete"];new Set(Ut);const Mt=["get",...Ut];
/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */
function Bt(){return Bt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r])}return e},Bt.apply(this,arguments)}new Set(Mt);const zt=Le.createContext(null),Ft=Le.createContext(null),qt=Le.createContext(null),Wt=Le.createContext(null),Ht=Le.createContext({outlet:null,matches:[],isDataRoute:!1}),Gt=Le.createContext(null);function Kt(){return null!=Le.useContext(Wt)}function Vt(){return Kt()||ct(!1),Le.useContext(Wt).location}function Jt(e){Le.useContext(qt).static||Le.useLayoutEffect(e)}function Yt(){let{isDataRoute:e}=Le.useContext(Ht);return e?function(){let{router:e}=function(){let e=Le.useContext(zt);return e||ct(!1),e}(ss.UseNavigateStable),t=as(rs.UseNavigateStable),s=Le.useRef(!1);return Jt(()=>{s.current=!0}),Le.useCallback(function(r,a){void 0===a&&(a={}),s.current&&("number"==typeof r?e.navigate(r):e.navigate(r,Bt({fromRouteId:t},a)))},[e,t])}():function(){Kt()||ct(!1);let e=Le.useContext(zt),{basename:t,future:s,navigator:r}=Le.useContext(qt),{matches:a}=Le.useContext(Ht),{pathname:n}=Vt(),i=JSON.stringify(function(e,t){let s=function(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}(e);return t?s.map((e,t)=>t===s.length-1?e.pathname:e.pathnameBase):s.map(e=>e.pathnameBase)}(a,s.v7_relativeSplatPath)),o=Le.useRef(!1);return Jt(()=>{o.current=!0}),Le.useCallback(function(s,a){if(void 0===a&&(a={}),!o.current)return;if("number"==typeof s)return void r.go(s);let l=Ot(s,JSON.parse(i),n,"path"===a.relative);null==e&&"/"!==t&&(l.pathname="/"===l.pathname?t:It([t,l.pathname])),(a.replace?r.replace:r.push)(l,a.state,a)},[t,r,i,n,e])}()}function Xt(e,t){return function(e,t,s,r){Kt()||ct(!1);let{navigator:a}=Le.useContext(qt),{matches:n}=Le.useContext(Ht),i=n[n.length-1],o=i?i.params:{};!i||i.pathname;let l=i?i.pathnameBase:"/";i&&i.route;let c,d=Vt();if(t){var u;let e="string"==typeof t?pt(t):t;"/"===l||(null==(u=e.pathname)?void 0:u.startsWith(l))||ct(!1),c=e}else c=d;let h=c.pathname||"/",m=h;if("/"!==l){let e=l.replace(/^\//,"").split("/");m="/"+h.replace(/^\//,"").split("/").slice(e.length).join("/")}let p=xt(e,{pathname:m}),f=function(e,t,s,r){var a;void 0===t&&(t=[]);void 0===s&&(s=null);void 0===r&&(r=null);if(null==e){var n;if(!s)return null;if(s.errors)e=s.matches;else{if(!(null!=(n=r)&&n.v7_partialHydration&&0===t.length&&!s.initialized&&s.matches.length>0))return null;e=s.matches}}let i=e,o=null==(a=s)?void 0:a.errors;if(null!=o){let e=i.findIndex(e=>e.route.id&&void 0!==(null==o?void 0:o[e.route.id]));e>=0||ct(!1),i=i.slice(0,Math.min(i.length,e+1))}let l=!1,c=-1;if(s&&r&&r.v7_partialHydration)for(let d=0;d<i.length;d++){let e=i[d];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(c=d),e.route.id){let{loaderData:t,errors:r}=s,a=e.route.loader&&void 0===t[e.route.id]&&(!r||void 0===r[e.route.id]);if(e.route.lazy||a){l=!0,i=c>=0?i.slice(0,c+1):[i[0]];break}}}return i.reduceRight((e,r,a)=>{let n,d=!1,u=null,h=null;var m;s&&(n=o&&r.route.id?o[r.route.id]:void 0,u=r.route.errorElement||Zt,l&&(c<0&&0===a?(ns[m="route-fallback"]||(ns[m]=!0),d=!0,h=null):c===a&&(d=!0,h=r.route.hydrateFallbackElement||null)));let p=t.concat(i.slice(0,a+1)),f=()=>{let t;return t=n?u:d?h:r.route.Component?Le.createElement(r.route.Component,null):r.route.element?r.route.element:e,Le.createElement(ts,{match:r,routeContext:{outlet:e,matches:p,isDataRoute:null!=s},children:t})};return s&&(r.route.ErrorBoundary||r.route.errorElement||0===a)?Le.createElement(es,{location:s.location,revalidation:s.revalidation,component:u,error:n,children:f(),routeContext:{outlet:null,matches:p,isDataRoute:!0}}):f()},null)}(p&&p.map(e=>Object.assign({},e,{params:Object.assign({},o,e.params),pathname:It([l,a.encodeLocation?a.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?l:It([l,a.encodeLocation?a.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})),n,s,r);if(t&&f)return Le.createElement(Wt.Provider,{value:{location:Bt({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:st.Pop}},f);return f}(e,t)}function Qt(){let e=function(){var e;let t=Le.useContext(Gt),s=function(){let e=Le.useContext(Ft);return e||ct(!1),e}(),r=as();if(void 0!==t)return t;return null==(e=s.errors)?void 0:e[r]}(),t=function(e){return null!=e&&"number"==typeof e.status&&"string"==typeof e.statusText&&"boolean"==typeof e.internal&&"data"in e}(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),s=e instanceof Error?e.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return Le.createElement(Le.Fragment,null,Le.createElement("h2",null,"Unexpected Application Error!"),Le.createElement("h3",{style:{fontStyle:"italic"}},t),s?Le.createElement("pre",{style:r},s):null,null)}const Zt=Le.createElement(Qt,null);class es extends Le.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?Le.createElement(Ht.Provider,{value:this.props.routeContext},Le.createElement(Gt.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function ts(e){let{routeContext:t,match:s,children:r}=e,a=Le.useContext(zt);return a&&a.static&&a.staticContext&&(s.route.errorElement||s.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=s.route.id),Le.createElement(Ht.Provider,{value:t},r)}var ss=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(ss||{}),rs=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(rs||{});function as(e){let t=function(){let e=Le.useContext(Ht);return e||ct(!1),e}(),s=t.matches[t.matches.length-1];return s.route.id||ct(!1),s.route.id}const ns={};function is(e){ct(!1)}function os(e){let{basename:t="/",children:s=null,location:r,navigationType:a=st.Pop,navigator:n,static:i=!1,future:o}=e;Kt()&&ct(!1);let l=t.replace(/^\/*/,"/"),c=Le.useMemo(()=>({basename:l,navigator:n,static:i,future:Bt({v7_relativeSplatPath:!1},o)}),[l,o,n,i]);"string"==typeof r&&(r=pt(r));let{pathname:d="/",search:u="",hash:h="",state:m=null,key:p="default"}=r,f=Le.useMemo(()=>{let e=At(d,l);return null==e?null:{location:{pathname:e,search:u,hash:h,state:m,key:p},navigationType:a}},[l,d,u,h,m,p,a]);return null==f?null:Le.createElement(qt.Provider,{value:c},Le.createElement(Wt.Provider,{children:s,value:f}))}function ls(e){let{children:t,location:s}=e;return Xt(cs(t),s)}function cs(e,t){void 0===t&&(t=[]);let s=[];return Le.Children.forEach(e,(e,r)=>{if(!Le.isValidElement(e))return;let a=[...t,r];if(e.type===Le.Fragment)return void s.push.apply(s,cs(e.props.children,a));e.type!==is&&ct(!1),e.props.index&&e.props.children&&ct(!1);let n={id:e.props.id||a.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(n.children=cs(e.props.children,a)),s.push(n)}),s}
/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */new Promise(()=>{});try{window.__reactRouterVersion="6"}catch(Ch){}const ds=Ue.startTransition;function us(e){let{basename:t,children:s,future:r,window:a}=e,n=Le.useRef();null==n.current&&(n.current=lt({window:a,v5Compat:!0}));let i=n.current,[o,l]=Le.useState({action:i.action,location:i.location}),{v7_startTransition:c}=r||{},d=Le.useCallback(e=>{c&&ds?ds(()=>l(e)):l(e)},[l,c]);return Le.useLayoutEffect(()=>i.listen(d),[i,d]),Le.useEffect(()=>{return null==(e=r)||e.v7_startTransition,void(null==e||e.v7_relativeSplatPath);var e},[r]),Le.createElement(os,{basename:t,children:s,location:o.location,navigationType:o.action,navigator:i,future:r})}var hs,ms,ps,fs;(ms=hs||(hs={})).UseScrollRestoration="useScrollRestoration",ms.UseSubmit="useSubmit",ms.UseSubmitFetcher="useSubmitFetcher",ms.UseFetcher="useFetcher",ms.useViewTransitionState="useViewTransitionState",(fs=ps||(ps={})).UseFetcher="useFetcher",fs.UseFetchers="useFetchers",fs.UseScrollRestoration="useScrollRestoration";const gs=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,xs=qe,vs=(e,t)=>s=>{var r;if(null==(null==t?void 0:t.variants))return xs(e,null==s?void 0:s.class,null==s?void 0:s.className);const{variants:a,defaultVariants:n}=t,i=Object.keys(a).map(e=>{const t=null==s?void 0:s[e],r=null==n?void 0:n[e];if(null===t)return null;const i=gs(t)||gs(r);return a[e][i]}),o=s&&Object.entries(s).reduce((e,t)=>{let[s,r]=t;return void 0===r||(e[s]=r),e},{}),l=null==t||null===(r=t.compoundVariants)||void 0===r?void 0:r.reduce((e,t)=>{let{class:s,className:r,...a}=t;return Object.entries(a).every(e=>{let[t,s]=e;return Array.isArray(s)?s.includes({...n,...o}[t]):{...n,...o}[t]===s})?[...e,s,r]:e},[]);return xs(e,i,l,null==s?void 0:s.class,null==s?void 0:s.className)};const bs=e=>{const t=Ns(e),{conflictingClassGroups:s,conflictingClassGroupModifiers:r}=e;return{getClassGroupId:e=>{const s=e.split("-");return""===s[0]&&1!==s.length&&s.shift(),ys(s,t)||js(e)},getConflictingClassGroupIds:(e,t)=>{const a=s[e]||[];return t&&r[e]?[...a,...r[e]]:a}}},ys=(e,t)=>{var s;if(0===e.length)return t.classGroupId;const r=e[0],a=t.nextPart.get(r),n=a?ys(e.slice(1),a):void 0;if(n)return n;if(0===t.validators.length)return;const i=e.join("-");return null==(s=t.validators.find(({validator:e})=>e(i)))?void 0:s.classGroupId},ws=/^\[(.+)\]$/,js=e=>{if(ws.test(e)){const t=ws.exec(e)[1],s=null==t?void 0:t.substring(0,t.indexOf(":"));if(s)return"arbitrary.."+s}},Ns=e=>{const{theme:t,prefix:s}=e,r={nextPart:new Map,validators:[]};return Cs(Object.entries(e.classGroups),s).forEach(([e,s])=>{ks(s,r,e,t)}),r},ks=(e,t,s,r)=>{e.forEach(e=>{if("string"==typeof e){return void((""===e?t:_s(t,e)).classGroupId=s)}if("function"==typeof e)return Ss(e)?void ks(e(r),t,s,r):void t.validators.push({validator:e,classGroupId:s});Object.entries(e).forEach(([e,a])=>{ks(a,_s(t,e),s,r)})})},_s=(e,t)=>{let s=e;return t.split("-").forEach(e=>{s.nextPart.has(e)||s.nextPart.set(e,{nextPart:new Map,validators:[]}),s=s.nextPart.get(e)}),s},Ss=e=>e.isThemeGetter,Cs=(e,t)=>t?e.map(([e,s])=>[e,s.map(e=>"string"==typeof e?t+e:"object"==typeof e?Object.fromEntries(Object.entries(e).map(([e,s])=>[t+e,s])):e)]):e,Es=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,s=new Map,r=new Map;const a=(a,n)=>{s.set(a,n),t++,t>e&&(t=0,r=s,s=new Map)};return{get(e){let t=s.get(e);return void 0!==t?t:void 0!==(t=r.get(e))?(a(e,t),t):void 0},set(e,t){s.has(e)?s.set(e,t):a(e,t)}}},Ps=e=>{const{separator:t,experimentalParseClassName:s}=e,r=1===t.length,a=t[0],n=t.length,i=e=>{const s=[];let i,o=0,l=0;for(let u=0;u<e.length;u++){let c=e[u];if(0===o){if(c===a&&(r||e.slice(u,u+n)===t)){s.push(e.slice(l,u)),l=u+n;continue}if("/"===c){i=u;continue}}"["===c?o++:"]"===c&&o--}const c=0===s.length?e:e.substring(l),d=c.startsWith("!");return{modifiers:s,hasImportantModifier:d,baseClassName:d?c.substring(1):c,maybePostfixModifierPosition:i&&i>l?i-l:void 0}};return s?e=>s({className:e,parseClassName:i}):i},Ts=e=>{if(e.length<=1)return e;const t=[];let s=[];return e.forEach(e=>{"["===e[0]?(t.push(...s.sort(),e),s=[]):s.push(e)}),t.push(...s.sort()),t},As=/\s+/;function Rs(){let e,t,s=0,r="";for(;s<arguments.length;)(e=arguments[s++])&&(t=Os(e))&&(r&&(r+=" "),r+=t);return r}const Os=e=>{if("string"==typeof e)return e;let t,s="";for(let r=0;r<e.length;r++)e[r]&&(t=Os(e[r]))&&(s&&(s+=" "),s+=t);return s};function Is(e,...t){let s,r,a,n=function(o){const l=t.reduce((e,t)=>t(e),e());return s=(e=>({cache:Es(e.cacheSize),parseClassName:Ps(e),...bs(e)}))(l),r=s.cache.get,a=s.cache.set,n=i,i(o)};function i(e){const t=r(e);if(t)return t;const n=((e,t)=>{const{parseClassName:s,getClassGroupId:r,getConflictingClassGroupIds:a}=t,n=[],i=e.trim().split(As);let o="";for(let l=i.length-1;l>=0;l-=1){const e=i[l],{modifiers:t,hasImportantModifier:c,baseClassName:d,maybePostfixModifierPosition:u}=s(e);let h=Boolean(u),m=r(h?d.substring(0,u):d);if(!m){if(!h){o=e+(o.length>0?" "+o:o);continue}if(m=r(d),!m){o=e+(o.length>0?" "+o:o);continue}h=!1}const p=Ts(t).join(":"),f=c?p+"!":p,g=f+m;if(n.includes(g))continue;n.push(g);const x=a(m,h);for(let s=0;s<x.length;++s){const e=x[s];n.push(f+e)}o=e+(o.length>0?" "+o:o)}return o})(e,s);return a(e,n),n}return function(){return n(Rs.apply(null,arguments))}}const $s=e=>{const t=t=>t[e]||[];return t.isThemeGetter=!0,t},Ds=/^\[(?:([a-z-]+):)?(.+)\]$/i,Ls=/^\d+\/\d+$/,Us=new Set(["px","full","screen"]),Ms=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Bs=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,zs=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,Fs=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,qs=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Ws=e=>Gs(e)||Us.has(e)||Ls.test(e),Hs=e=>nr(e,"length",ir),Gs=e=>Boolean(e)&&!Number.isNaN(Number(e)),Ks=e=>nr(e,"number",Gs),Vs=e=>Boolean(e)&&Number.isInteger(Number(e)),Js=e=>e.endsWith("%")&&Gs(e.slice(0,-1)),Ys=e=>Ds.test(e),Xs=e=>Ms.test(e),Qs=new Set(["length","size","percentage"]),Zs=e=>nr(e,Qs,or),er=e=>nr(e,"position",or),tr=new Set(["image","url"]),sr=e=>nr(e,tr,cr),rr=e=>nr(e,"",lr),ar=()=>!0,nr=(e,t,s)=>{const r=Ds.exec(e);return!!r&&(r[1]?"string"==typeof t?r[1]===t:t.has(r[1]):s(r[2]))},ir=e=>Bs.test(e)&&!zs.test(e),or=()=>!1,lr=e=>Fs.test(e),cr=e=>qs.test(e),dr=Is(()=>{const e=$s("colors"),t=$s("spacing"),s=$s("blur"),r=$s("brightness"),a=$s("borderColor"),n=$s("borderRadius"),i=$s("borderSpacing"),o=$s("borderWidth"),l=$s("contrast"),c=$s("grayscale"),d=$s("hueRotate"),u=$s("invert"),h=$s("gap"),m=$s("gradientColorStops"),p=$s("gradientColorStopPositions"),f=$s("inset"),g=$s("margin"),x=$s("opacity"),v=$s("padding"),b=$s("saturate"),y=$s("scale"),w=$s("sepia"),j=$s("skew"),N=$s("space"),k=$s("translate"),_=()=>["auto",Ys,t],S=()=>[Ys,t],C=()=>["",Ws,Hs],E=()=>["auto",Gs,Ys],P=()=>["","0",Ys],T=()=>[Gs,Ys];return{cacheSize:500,separator:":",theme:{colors:[ar],spacing:[Ws,Hs],blur:["none","",Xs,Ys],brightness:T(),borderColor:[e],borderRadius:["none","","full",Xs,Ys],borderSpacing:S(),borderWidth:C(),contrast:T(),grayscale:P(),hueRotate:T(),invert:P(),gap:S(),gradientColorStops:[e],gradientColorStopPositions:[Js,Hs],inset:_(),margin:_(),opacity:T(),padding:S(),saturate:T(),scale:T(),sepia:P(),skew:T(),space:S(),translate:S()},classGroups:{aspect:[{aspect:["auto","square","video",Ys]}],container:["container"],columns:[{columns:[Xs]}],"break-after":[{"break-after":["auto","avoid","all","avoid-page","page","left","right","column"]}],"break-before":[{"break-before":["auto","avoid","all","avoid-page","page","left","right","column"]}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top",Ys]}],overflow:[{overflow:["auto","hidden","clip","visible","scroll"]}],"overflow-x":[{"overflow-x":["auto","hidden","clip","visible","scroll"]}],"overflow-y":[{"overflow-y":["auto","hidden","clip","visible","scroll"]}],overscroll:[{overscroll:["auto","contain","none"]}],"overscroll-x":[{"overscroll-x":["auto","contain","none"]}],"overscroll-y":[{"overscroll-y":["auto","contain","none"]}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[f]}],"inset-x":[{"inset-x":[f]}],"inset-y":[{"inset-y":[f]}],start:[{start:[f]}],end:[{end:[f]}],top:[{top:[f]}],right:[{right:[f]}],bottom:[{bottom:[f]}],left:[{left:[f]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Vs,Ys]}],basis:[{basis:_()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Ys]}],grow:[{grow:P()}],shrink:[{shrink:P()}],order:[{order:["first","last","none",Vs,Ys]}],"grid-cols":[{"grid-cols":[ar]}],"col-start-end":[{col:["auto",{span:["full",Vs,Ys]},Ys]}],"col-start":[{"col-start":E()}],"col-end":[{"col-end":E()}],"grid-rows":[{"grid-rows":[ar]}],"row-start-end":[{row:["auto",{span:[Vs,Ys]},Ys]}],"row-start":[{"row-start":E()}],"row-end":[{"row-end":E()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Ys]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Ys]}],gap:[{gap:[h]}],"gap-x":[{"gap-x":[h]}],"gap-y":[{"gap-y":[h]}],"justify-content":[{justify:["normal","start","end","center","between","around","evenly","stretch"]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal","start","end","center","between","around","evenly","stretch","baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":["start","end","center","between","around","evenly","stretch","baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[v]}],px:[{px:[v]}],py:[{py:[v]}],ps:[{ps:[v]}],pe:[{pe:[v]}],pt:[{pt:[v]}],pr:[{pr:[v]}],pb:[{pb:[v]}],pl:[{pl:[v]}],m:[{m:[g]}],mx:[{mx:[g]}],my:[{my:[g]}],ms:[{ms:[g]}],me:[{me:[g]}],mt:[{mt:[g]}],mr:[{mr:[g]}],mb:[{mb:[g]}],ml:[{ml:[g]}],"space-x":[{"space-x":[N]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[N]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Ys,t]}],"min-w":[{"min-w":[Ys,t,"min","max","fit"]}],"max-w":[{"max-w":[Ys,t,"none","full","min","max","fit","prose",{screen:[Xs]},Xs]}],h:[{h:[Ys,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Ys,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Ys,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Ys,t,"auto","min","max","fit"]}],"font-size":[{text:["base",Xs,Hs]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Ks]}],"font-family":[{font:[ar]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Ys]}],"line-clamp":[{"line-clamp":["none",Gs,Ks]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Ws,Ys]}],"list-image":[{"list-image":["none",Ys]}],"list-style-type":[{list:["none","disc","decimal",Ys]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[x]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[x]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:["solid","dashed","dotted","double","none","wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Ws,Hs]}],"underline-offset":[{"underline-offset":["auto",Ws,Ys]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:S()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Ys]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Ys]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[x]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top",er]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",Zs]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},sr]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[p]}],"gradient-via-pos":[{via:[p]}],"gradient-to-pos":[{to:[p]}],"gradient-from":[{from:[m]}],"gradient-via":[{via:[m]}],"gradient-to":[{to:[m]}],rounded:[{rounded:[n]}],"rounded-s":[{"rounded-s":[n]}],"rounded-e":[{"rounded-e":[n]}],"rounded-t":[{"rounded-t":[n]}],"rounded-r":[{"rounded-r":[n]}],"rounded-b":[{"rounded-b":[n]}],"rounded-l":[{"rounded-l":[n]}],"rounded-ss":[{"rounded-ss":[n]}],"rounded-se":[{"rounded-se":[n]}],"rounded-ee":[{"rounded-ee":[n]}],"rounded-es":[{"rounded-es":[n]}],"rounded-tl":[{"rounded-tl":[n]}],"rounded-tr":[{"rounded-tr":[n]}],"rounded-br":[{"rounded-br":[n]}],"rounded-bl":[{"rounded-bl":[n]}],"border-w":[{border:[o]}],"border-w-x":[{"border-x":[o]}],"border-w-y":[{"border-y":[o]}],"border-w-s":[{"border-s":[o]}],"border-w-e":[{"border-e":[o]}],"border-w-t":[{"border-t":[o]}],"border-w-r":[{"border-r":[o]}],"border-w-b":[{"border-b":[o]}],"border-w-l":[{"border-l":[o]}],"border-opacity":[{"border-opacity":[x]}],"border-style":[{border:["solid","dashed","dotted","double","none","hidden"]}],"divide-x":[{"divide-x":[o]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[o]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[x]}],"divide-style":[{divide:["solid","dashed","dotted","double","none"]}],"border-color":[{border:[a]}],"border-color-x":[{"border-x":[a]}],"border-color-y":[{"border-y":[a]}],"border-color-s":[{"border-s":[a]}],"border-color-e":[{"border-e":[a]}],"border-color-t":[{"border-t":[a]}],"border-color-r":[{"border-r":[a]}],"border-color-b":[{"border-b":[a]}],"border-color-l":[{"border-l":[a]}],"divide-color":[{divide:[a]}],"outline-style":[{outline:["","solid","dashed","dotted","double","none"]}],"outline-offset":[{"outline-offset":[Ws,Ys]}],"outline-w":[{outline:[Ws,Hs]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:C()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[x]}],"ring-offset-w":[{"ring-offset":[Ws,Hs]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",Xs,rr]}],"shadow-color":[{shadow:[ar]}],opacity:[{opacity:[x]}],"mix-blend":[{"mix-blend":["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"]}],filter:[{filter:["","none"]}],blur:[{blur:[s]}],brightness:[{brightness:[r]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",Xs,Ys]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[u]}],saturate:[{saturate:[b]}],sepia:[{sepia:[w]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[s]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[u]}],"backdrop-opacity":[{"backdrop-opacity":[x]}],"backdrop-saturate":[{"backdrop-saturate":[b]}],"backdrop-sepia":[{"backdrop-sepia":[w]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[i]}],"border-spacing-x":[{"border-spacing-x":[i]}],"border-spacing-y":[{"border-spacing-y":[i]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Ys]}],duration:[{duration:T()}],ease:[{ease:["linear","in","out","in-out",Ys]}],delay:[{delay:T()}],animate:[{animate:["none","spin","ping","pulse","bounce",Ys]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[y]}],"scale-x":[{"scale-x":[y]}],"scale-y":[{"scale-y":[y]}],rotate:[{rotate:[Vs,Ys]}],"translate-x":[{"translate-x":[k]}],"translate-y":[{"translate-y":[k]}],"skew-x":[{"skew-x":[j]}],"skew-y":[{"skew-y":[j]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Ys]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Ys]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":S()}],"scroll-mx":[{"scroll-mx":S()}],"scroll-my":[{"scroll-my":S()}],"scroll-ms":[{"scroll-ms":S()}],"scroll-me":[{"scroll-me":S()}],"scroll-mt":[{"scroll-mt":S()}],"scroll-mr":[{"scroll-mr":S()}],"scroll-mb":[{"scroll-mb":S()}],"scroll-ml":[{"scroll-ml":S()}],"scroll-p":[{"scroll-p":S()}],"scroll-px":[{"scroll-px":S()}],"scroll-py":[{"scroll-py":S()}],"scroll-ps":[{"scroll-ps":S()}],"scroll-pe":[{"scroll-pe":S()}],"scroll-pt":[{"scroll-pt":S()}],"scroll-pr":[{"scroll-pr":S()}],"scroll-pb":[{"scroll-pb":S()}],"scroll-pl":[{"scroll-pl":S()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Ys]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[Ws,Hs,Ks]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}});function ur(...e){return dr(qe(e))}const hr=vs("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background text-foreground hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9 rounded-md"}},defaultVariants:{variant:"default",size:"default"}});function mr({className:s,variant:r,size:a,asChild:n=!1,...i}){const o=n?t:"button";return e.jsx(o,{"data-slot":"button",className:ur(hr({variant:r,size:a,className:s})),...i})}function pr({className:t,type:s,...r}){return e.jsx("input",{type:s,"data-slot":"input",className:ur("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border px-3 py-1 text-base bg-input-background transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",t),...r})}var fr="horizontal",gr=["horizontal","vertical"],xr=Le.forwardRef((t,r)=>{const{decorative:a,orientation:n=fr,...i}=t,o=function(e){return gr.includes(e)}(n)?n:fr,l=a?{role:"none"}:{"aria-orientation":"vertical"===o?o:void 0,role:"separator"};return e.jsx(s.div,{"data-orientation":o,...l,...i,ref:r})});xr.displayName="Separator";var vr=xr;function br({className:t,orientation:s="horizontal",decorative:r=!0,...a}){return e.jsx(vr,{"data-slot":"separator-root",decorative:r,orientation:s,className:ur("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",t),...a})}function yr({...t}){return e.jsx(r,{"data-slot":"sheet",...t})}function wr({...t}){return e.jsx(c,{"data-slot":"sheet-portal",...t})}function jr({className:t,...s}){return e.jsx(d,{"data-slot":"sheet-overlay",className:ur("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",t),...s})}function Nr({className:t,children:s,side:r="right",...o}){return e.jsxs(wr,{children:[e.jsx(jr,{}),e.jsxs(a,{"data-slot":"sheet-content",className:ur("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out fixed z-50 flex flex-col gap-4 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500","right"===r&&"data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right inset-y-0 right-0 h-full w-3/4 border-l sm:max-w-sm","left"===r&&"data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left inset-y-0 left-0 h-full w-3/4 border-r sm:max-w-sm","top"===r&&"data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top inset-x-0 top-0 h-auto border-b","bottom"===r&&"data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom inset-x-0 bottom-0 h-auto border-t",t),...o,children:[s,e.jsxs(n,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-secondary absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none",children:[e.jsx(i,{className:"size-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}function kr({className:t,...s}){return e.jsx("div",{"data-slot":"sheet-header",className:ur("flex flex-col gap-1.5 p-4",t),...s})}function _r({className:t,...s}){return e.jsx(o,{"data-slot":"sheet-title",className:ur("text-foreground font-semibold",t),...s})}function Sr({className:t,...s}){return e.jsx(l,{"data-slot":"sheet-description",className:ur("text-muted-foreground text-sm",t),...s})}var Cr=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),Er=Le.forwardRef((t,r)=>e.jsx(s.span,{...t,ref:r,style:{...Cr,...t.style}}));Er.displayName="VisuallyHidden";var Pr=Er,[Tr,Ar]=u("Tooltip",[h]),Rr=h(),Or="TooltipProvider",Ir=700,$r="tooltip.open",[Dr,Lr]=Tr(Or),Ur=t=>{const{__scopeTooltip:s,delayDuration:r=Ir,skipDelayDuration:a=300,disableHoverableContent:n=!1,children:i}=t,o=Le.useRef(!0),l=Le.useRef(!1),c=Le.useRef(0);return Le.useEffect(()=>{const e=c.current;return()=>window.clearTimeout(e)},[]),e.jsx(Dr,{scope:s,isOpenDelayedRef:o,delayDuration:r,onOpen:Le.useCallback(()=>{window.clearTimeout(c.current),o.current=!1},[]),onClose:Le.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>o.current=!0,a)},[a]),isPointerInTransitRef:l,onPointerInTransitChange:Le.useCallback(e=>{l.current=e},[]),disableHoverableContent:n,children:i})};Ur.displayName=Or;var Mr="Tooltip",[Br,zr]=Tr(Mr),Fr=t=>{const{__scopeTooltip:s,children:r,open:a,defaultOpen:n,onOpenChange:i,disableHoverableContent:o,delayDuration:l}=t,c=Lr(Mr,t.__scopeTooltip),d=Rr(s),[u,h]=Le.useState(null),g=m(),x=Le.useRef(0),v=o??c.disableHoverableContent,b=l??c.delayDuration,y=Le.useRef(!1),[w,j]=p({prop:a,defaultProp:n??!1,onChange:e=>{e?(c.onOpen(),document.dispatchEvent(new CustomEvent($r))):c.onClose(),null==i||i(e)},caller:Mr}),N=Le.useMemo(()=>w?y.current?"delayed-open":"instant-open":"closed",[w]),k=Le.useCallback(()=>{window.clearTimeout(x.current),x.current=0,y.current=!1,j(!0)},[j]),_=Le.useCallback(()=>{window.clearTimeout(x.current),x.current=0,j(!1)},[j]),S=Le.useCallback(()=>{window.clearTimeout(x.current),x.current=window.setTimeout(()=>{y.current=!0,j(!0),x.current=0},b)},[b,j]);return Le.useEffect(()=>()=>{x.current&&(window.clearTimeout(x.current),x.current=0)},[]),e.jsx(f,{...d,children:e.jsx(Br,{scope:s,contentId:g,open:w,stateAttribute:N,trigger:u,onTriggerChange:h,onTriggerEnter:Le.useCallback(()=>{c.isOpenDelayedRef.current?S():k()},[c.isOpenDelayedRef,S,k]),onTriggerLeave:Le.useCallback(()=>{v?_():(window.clearTimeout(x.current),x.current=0)},[_,v]),onOpen:k,onClose:_,disableHoverableContent:v,children:r})})};Fr.displayName=Mr;var qr="TooltipTrigger",Wr=Le.forwardRef((t,r)=>{const{__scopeTooltip:a,...n}=t,i=zr(qr,a),o=Lr(qr,a),l=Rr(a),c=Le.useRef(null),d=g(r,c,i.onTriggerChange),u=Le.useRef(!1),h=Le.useRef(!1),m=Le.useCallback(()=>u.current=!1,[]);return Le.useEffect(()=>()=>document.removeEventListener("pointerup",m),[m]),e.jsx(x,{asChild:!0,...l,children:e.jsx(s.button,{"aria-describedby":i.open?i.contentId:void 0,"data-state":i.stateAttribute,...n,ref:d,onPointerMove:v(t.onPointerMove,e=>{"touch"!==e.pointerType&&(h.current||o.isPointerInTransitRef.current||(i.onTriggerEnter(),h.current=!0))}),onPointerLeave:v(t.onPointerLeave,()=>{i.onTriggerLeave(),h.current=!1}),onPointerDown:v(t.onPointerDown,()=>{i.open&&i.onClose(),u.current=!0,document.addEventListener("pointerup",m,{once:!0})}),onFocus:v(t.onFocus,()=>{u.current||i.onOpen()}),onBlur:v(t.onBlur,i.onClose),onClick:v(t.onClick,i.onClose)})})});Wr.displayName=qr;var Hr="TooltipPortal",[Gr,Kr]=Tr(Hr,{forceMount:void 0}),Vr=t=>{const{__scopeTooltip:s,forceMount:r,children:a,container:n}=t,i=zr(Hr,s);return e.jsx(Gr,{scope:s,forceMount:r,children:e.jsx(b,{present:r||i.open,children:e.jsx(y,{asChild:!0,container:n,children:a})})})};Vr.displayName=Hr;var Jr="TooltipContent",Yr=Le.forwardRef((t,s)=>{const r=Kr(Jr,t.__scopeTooltip),{forceMount:a=r.forceMount,side:n="top",...i}=t,o=zr(Jr,t.__scopeTooltip);return e.jsx(b,{present:a||o.open,children:o.disableHoverableContent?e.jsx(ta,{side:n,...i,ref:s}):e.jsx(Xr,{side:n,...i,ref:s})})}),Xr=Le.forwardRef((t,s)=>{const r=zr(Jr,t.__scopeTooltip),a=Lr(Jr,t.__scopeTooltip),n=Le.useRef(null),i=g(s,n),[o,l]=Le.useState(null),{trigger:c,onClose:d}=r,u=n.current,{onPointerInTransitChange:h}=a,m=Le.useCallback(()=>{l(null),h(!1)},[h]),p=Le.useCallback((e,t)=>{const s=e.currentTarget,r={x:e.clientX,y:e.clientY},a=function(e,t,s=5){const r=[];switch(t){case"top":r.push({x:e.x-s,y:e.y+s},{x:e.x+s,y:e.y+s});break;case"bottom":r.push({x:e.x-s,y:e.y-s},{x:e.x+s,y:e.y-s});break;case"left":r.push({x:e.x+s,y:e.y-s},{x:e.x+s,y:e.y+s});break;case"right":r.push({x:e.x-s,y:e.y-s},{x:e.x-s,y:e.y+s})}return r}(r,function(e,t){const s=Math.abs(t.top-e.y),r=Math.abs(t.bottom-e.y),a=Math.abs(t.right-e.x),n=Math.abs(t.left-e.x);switch(Math.min(s,r,a,n)){case n:return"left";case a:return"right";case s:return"top";case r:return"bottom";default:throw new Error("unreachable")}}(r,s.getBoundingClientRect())),n=function(e){const t=e.slice();return t.sort((e,t)=>e.x<t.x?-1:e.x>t.x?1:e.y<t.y?-1:e.y>t.y?1:0),function(e){if(e.length<=1)return e.slice();const t=[];for(let r=0;r<e.length;r++){const s=e[r];for(;t.length>=2;){const e=t[t.length-1],r=t[t.length-2];if(!((e.x-r.x)*(s.y-r.y)>=(e.y-r.y)*(s.x-r.x)))break;t.pop()}t.push(s)}t.pop();const s=[];for(let r=e.length-1;r>=0;r--){const t=e[r];for(;s.length>=2;){const e=s[s.length-1],r=s[s.length-2];if(!((e.x-r.x)*(t.y-r.y)>=(e.y-r.y)*(t.x-r.x)))break;s.pop()}s.push(t)}return s.pop(),1===t.length&&1===s.length&&t[0].x===s[0].x&&t[0].y===s[0].y?t:t.concat(s)}(t)}([...a,...function(e){const{top:t,right:s,bottom:r,left:a}=e;return[{x:a,y:t},{x:s,y:t},{x:s,y:r},{x:a,y:r}]}(t.getBoundingClientRect())]);l(n),h(!0)},[h]);return Le.useEffect(()=>()=>m(),[m]),Le.useEffect(()=>{if(c&&u){const e=e=>p(e,u),t=e=>p(e,c);return c.addEventListener("pointerleave",e),u.addEventListener("pointerleave",t),()=>{c.removeEventListener("pointerleave",e),u.removeEventListener("pointerleave",t)}}},[c,u,p,m]),Le.useEffect(()=>{if(o){const e=e=>{const t=e.target,s={x:e.clientX,y:e.clientY},r=(null==c?void 0:c.contains(t))||(null==u?void 0:u.contains(t)),a=!function(e,t){const{x:s,y:r}=e;let a=!1;for(let n=0,i=t.length-1;n<t.length;i=n++){const e=t[n],o=t[i],l=e.x,c=e.y,d=o.x,u=o.y;c>r!=u>r&&s<(d-l)*(r-c)/(u-c)+l&&(a=!a)}return a}(s,o);r?m():a&&(m(),d())};return document.addEventListener("pointermove",e),()=>document.removeEventListener("pointermove",e)}},[c,u,o,d,m]),e.jsx(ta,{...t,ref:i})}),[Qr,Zr]=Tr(Mr,{isInside:!1}),ea=k("TooltipContent"),ta=Le.forwardRef((t,s)=>{const{__scopeTooltip:r,children:a,"aria-label":n,onEscapeKeyDown:i,onPointerDownOutside:o,...l}=t,c=zr(Jr,r),d=Rr(r),{onClose:u}=c;return Le.useEffect(()=>(document.addEventListener($r,u),()=>document.removeEventListener($r,u)),[u]),Le.useEffect(()=>{if(c.trigger){const e=e=>{const t=e.target;(null==t?void 0:t.contains(c.trigger))&&u()};return window.addEventListener("scroll",e,{capture:!0}),()=>window.removeEventListener("scroll",e,{capture:!0})}},[c.trigger,u]),e.jsx(j,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:e=>e.preventDefault(),onDismiss:u,children:e.jsxs(N,{"data-state":c.stateAttribute,...d,...l,ref:s,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[e.jsx(ea,{children:a}),e.jsx(Qr,{scope:r,isInside:!0,children:e.jsx(Pr,{id:c.contentId,role:"tooltip",children:n||a})})]})})});Yr.displayName=Jr;var sa="TooltipArrow",ra=Le.forwardRef((t,s)=>{const{__scopeTooltip:r,...a}=t,n=Rr(r);return Zr(sa,r).isInside?null:e.jsx(w,{...n,...a,ref:s})});ra.displayName=sa;var aa=Ur,na=Fr,ia=Wr,oa=Vr,la=Yr,ca=ra;function da({delayDuration:t=0,...s}){return e.jsx(aa,{"data-slot":"tooltip-provider",delayDuration:t,...s})}function ua({...t}){return e.jsx(da,{children:e.jsx(na,{"data-slot":"tooltip",...t})})}function ha({...t}){return e.jsx(ia,{"data-slot":"tooltip-trigger",...t})}function ma({className:t,sideOffset:s=0,children:r,...a}){return e.jsx(oa,{children:e.jsxs(la,{"data-slot":"tooltip-content",sideOffset:s,className:ur("bg-primary text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-fit origin-(--radix-tooltip-content-transform-origin) rounded-md px-3 py-1.5 text-xs text-balance",t),...a,children:[r,e.jsx(ca,{className:"bg-primary fill-primary z-50 size-2.5 translate-y-[calc(-50%_-_2px)] rotate-45 rounded-[2px]"})]})})}const pa=Le.createContext(null);function fa(){const e=Le.useContext(pa);if(!e)throw new Error("useSidebar must be used within a SidebarProvider.");return e}function ga({defaultOpen:t=!0,open:s,onOpenChange:r,className:a,style:n,children:i,...o}){const l=function(){const[e,t]=Le.useState(void 0);return Le.useEffect(()=>{const e=window.matchMedia("(max-width: 767px)"),s=()=>{t(window.innerWidth<768)};return e.addEventListener("change",s),t(window.innerWidth<768),()=>e.removeEventListener("change",s)},[]),!!e}(),[c,d]=Le.useState(!1),[u,h]=Le.useState(t),m=s??u,p=Le.useCallback(e=>{const t="function"==typeof e?e(m):e;r?r(t):h(t),document.cookie=`sidebar_state=${t}; path=/; max-age=604800`},[r,m]),f=Le.useCallback(()=>l?d(e=>!e):p(e=>!e),[l,p,d]);Le.useEffect(()=>{const e=e=>{"b"===e.key&&(e.metaKey||e.ctrlKey)&&(e.preventDefault(),f())};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[f]);const g=m?"expanded":"collapsed",x=Le.useMemo(()=>({state:g,open:m,setOpen:p,isMobile:l,openMobile:c,setOpenMobile:d,toggleSidebar:f}),[g,m,p,l,c,d,f]);return e.jsx(pa.Provider,{value:x,children:e.jsx(da,{delayDuration:0,children:e.jsx("div",{"data-slot":"sidebar-wrapper",style:{"--sidebar-width":"16rem","--sidebar-width-icon":"3rem",...n},className:ur("group/sidebar-wrapper has-data-[variant=inset]:bg-sidebar flex min-h-svh w-full",a),...o,children:i})})})}function xa({side:t="left",variant:s="sidebar",collapsible:r="offcanvas",className:a,children:n,...i}){const{isMobile:o,state:l,openMobile:c,setOpenMobile:d}=fa();return"none"===r?e.jsx("div",{"data-slot":"sidebar",className:ur("bg-sidebar text-sidebar-foreground flex h-full w-(--sidebar-width) flex-col",a),...i,children:n}):o?e.jsx(yr,{open:c,onOpenChange:d,...i,children:e.jsxs(Nr,{"data-sidebar":"sidebar","data-slot":"sidebar","data-mobile":"true",className:"bg-sidebar text-sidebar-foreground w-(--sidebar-width) p-0 [&>button]:hidden",style:{"--sidebar-width":"18rem"},side:t,children:[e.jsxs(kr,{className:"sr-only",children:[e.jsx(_r,{children:"Sidebar"}),e.jsx(Sr,{children:"Displays the mobile sidebar."})]}),e.jsx("div",{className:"flex h-full w-full flex-col",children:n})]})}):e.jsxs("div",{className:"group peer text-sidebar-foreground hidden md:block","data-state":l,"data-collapsible":"collapsed"===l?r:"","data-variant":s,"data-side":t,"data-slot":"sidebar",children:[e.jsx("div",{"data-slot":"sidebar-gap",className:ur("relative w-(--sidebar-width) bg-transparent transition-[width] duration-200 ease-linear","group-data-[collapsible=offcanvas]:w-0","group-data-[side=right]:rotate-180","floating"===s||"inset"===s?"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+(--spacing(4)))]":"group-data-[collapsible=icon]:w-(--sidebar-width-icon)")}),e.jsx("div",{"data-slot":"sidebar-container",className:ur("fixed inset-y-0 z-10 hidden h-svh w-(--sidebar-width) transition-[left,right,width] duration-200 ease-linear md:flex","left"===t?"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]":"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]","floating"===s||"inset"===s?"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+(--spacing(4))+2px)]":"group-data-[collapsible=icon]:w-(--sidebar-width-icon) group-data-[side=left]:border-r group-data-[side=right]:border-l",a),...i,children:e.jsx("div",{"data-sidebar":"sidebar","data-slot":"sidebar-inner",className:"bg-sidebar group-data-[variant=floating]:border-sidebar-border flex h-full w-full flex-col group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:shadow-sm",children:n})})]})}function va({className:t,...s}){return e.jsx("div",{"data-slot":"sidebar-header","data-sidebar":"header",className:ur("flex flex-col gap-2 p-2",t),...s})}function ba({className:t,...s}){return e.jsx("div",{"data-slot":"sidebar-footer","data-sidebar":"footer",className:ur("flex flex-col gap-2 p-2",t),...s})}function ya({className:t,...s}){return e.jsx("div",{"data-slot":"sidebar-content","data-sidebar":"content",className:ur("flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden",t),...s})}function wa({className:t,...s}){return e.jsx("div",{"data-slot":"sidebar-group","data-sidebar":"group",className:ur("relative flex w-full min-w-0 flex-col p-2",t),...s})}function ja({className:s,asChild:r=!1,...a}){const n=r?t:"div";return e.jsx(n,{"data-slot":"sidebar-group-label","data-sidebar":"group-label",className:ur("text-sidebar-foreground/70 ring-sidebar-ring flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium outline-hidden transition-[margin,opacity] duration-200 ease-linear focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0","group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0",s),...a})}function Na({className:t,...s}){return e.jsx("div",{"data-slot":"sidebar-group-content","data-sidebar":"group-content",className:ur("w-full text-sm",t),...s})}function ka({className:t,...s}){return e.jsx("ul",{"data-slot":"sidebar-menu","data-sidebar":"menu",className:ur("flex w-full min-w-0 flex-col gap-1",t),...s})}function _a({className:t,...s}){return e.jsx("li",{"data-slot":"sidebar-menu-item","data-sidebar":"menu-item",className:ur("group/menu-item relative",t),...s})}const Sa=vs("peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-hidden ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-data-[sidebar=menu-action]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:size-8! group-data-[collapsible=icon]:p-2! [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0",{variants:{variant:{default:"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground",outline:"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]"},size:{default:"h-8 text-sm",sm:"h-7 text-xs",lg:"h-12 text-sm group-data-[collapsible=icon]:p-0!"}},defaultVariants:{variant:"default",size:"default"}});function Ca({asChild:s=!1,isActive:r=!1,variant:a="default",size:n="default",tooltip:i,className:o,...l}){const c=s?t:"button",{isMobile:d,state:u}=fa(),h=e.jsx(c,{"data-slot":"sidebar-menu-button","data-sidebar":"menu-button","data-size":n,"data-active":r,className:ur(Sa({variant:a,size:n}),o),...l});return i?("string"==typeof i&&(i={children:i}),e.jsxs(ua,{children:[e.jsx(ha,{asChild:!0,children:h}),e.jsx(ma,{side:"right",align:"center",hidden:"collapsed"!==u||d,...i})]})):h}const Ea={},Pa=function(e,t,s){let r=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const e=document.querySelector("meta[property=csp-nonce]"),s=(null==e?void 0:e.nonce)||(null==e?void 0:e.getAttribute("nonce"));r=Promise.allSettled(t.map(e=>{if((e=function(e){return"/"+e}(e))in Ea)return;Ea[e]=!0;const t=e.endsWith(".css"),r=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${r}`))return;const a=document.createElement("link");return a.rel=t?"stylesheet":"modulepreload",t||(a.as="script"),a.crossOrigin="",a.href=e,s&&a.setAttribute("nonce",s),document.head.appendChild(a),t?new Promise((t,s)=>{a.addEventListener("load",t),a.addEventListener("error",()=>s(new Error(`Unable to preload CSS for ${e}`)))}):void 0}))}function a(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return r.then(t=>{for(const e of t||[])"rejected"===e.status&&a(e.reason);return e().catch(a)})};class Ta extends Error{constructor(e,t="FunctionsError",s){super(e),this.name=t,this.context=s}}class Aa extends Ta{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Ra extends Ta{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Oa extends Ta{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Ia,$a;($a=Ia||(Ia={})).Any="any",$a.ApNortheast1="ap-northeast-1",$a.ApNortheast2="ap-northeast-2",$a.ApSouth1="ap-south-1",$a.ApSoutheast1="ap-southeast-1",$a.ApSoutheast2="ap-southeast-2",$a.CaCentral1="ca-central-1",$a.EuCentral1="eu-central-1",$a.EuWest1="eu-west-1",$a.EuWest2="eu-west-2",$a.EuWest3="eu-west-3",$a.SaEast1="sa-east-1",$a.UsEast1="us-east-1",$a.UsWest1="us-west-1",$a.UsWest2="us-west-2";var Da=function(e,t,s,r){return new(s||(s=Promise))(function(a,n){function i(e){try{l(r.next(e))}catch(Ch){n(Ch)}}function o(e){try{l(r.throw(e))}catch(Ch){n(Ch)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof s?t:new s(function(e){e(t)})).then(i,o)}l((r=r.apply(e,t||[])).next())})};class La{constructor(e,{headers:t={},customFetch:s,region:r=Ia.Any}={}){this.url=e,this.headers=t,this.region=r,this.fetch=(e=>{let t;return t=e||("undefined"==typeof fetch?(...e)=>Pa(async()=>{const{default:e}=await Promise.resolve().then(()=>Ya);return{default:e}},void 0).then(({default:t})=>t(...e)):fetch),(...e)=>t(...e)})(s)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var s;return Da(this,void 0,void 0,function*(){try{const{headers:r,method:a,body:n}=t;let i={},{region:o}=t;o||(o=this.region);const l=new URL(`${this.url}/${e}`);let c;o&&"any"!==o&&(i["x-region"]=o,l.searchParams.set("forceFunctionRegion",o)),n&&(r&&!Object.prototype.hasOwnProperty.call(r,"Content-Type")||!r)&&("undefined"!=typeof Blob&&n instanceof Blob||n instanceof ArrayBuffer?(i["Content-Type"]="application/octet-stream",c=n):"string"==typeof n?(i["Content-Type"]="text/plain",c=n):"undefined"!=typeof FormData&&n instanceof FormData?c=n:(i["Content-Type"]="application/json",c=JSON.stringify(n)));const d=yield this.fetch(l.toString(),{method:a||"POST",headers:Object.assign(Object.assign(Object.assign({},i),this.headers),r),body:c}).catch(e=>{throw new Aa(e)}),u=d.headers.get("x-relay-error");if(u&&"true"===u)throw new Ra(d);if(!d.ok)throw new Oa(d);let h,m=(null!==(s=d.headers.get("Content-Type"))&&void 0!==s?s:"text/plain").split(";")[0].trim();return h="application/json"===m?yield d.json():"application/octet-stream"===m?yield d.blob():"text/event-stream"===m?d:"multipart/form-data"===m?yield d.formData():yield d.text(),{data:h,error:null,response:d}}catch(r){return{data:null,error:r,response:r instanceof Oa||r instanceof Ra?r.context:void 0}}})}}var Ua={},Ma={},Ba={},za={},Fa={},qa={},Wa=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("unable to locate global object")}();const Ha=Wa.fetch,Ga=Wa.fetch.bind(Wa),Ka=Wa.Headers,Va=Wa.Request,Ja=Wa.Response,Ya=Object.freeze(Object.defineProperty({__proto__:null,Headers:Ka,Request:Va,Response:Ja,default:Ga,fetch:Ha},Symbol.toStringTag,{value:"Module"})),Xa=Me(Ya);var Qa={};Object.defineProperty(Qa,"__esModule",{value:!0});let Za=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};Qa.default=Za;var en=Be&&Be.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(qa,"__esModule",{value:!0});const tn=en(Xa),sn=en(Qa);qa.default=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:"undefined"==typeof fetch?this.fetch=tn.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=Object.assign({},this.headers),this.headers[e]=t,this}then(e,t){void 0===this.schema||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),"GET"!==this.method&&"HEAD"!==this.method&&(this.headers["Content-Type"]="application/json");let s=(0,this.fetch)(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async e=>{var t,s,r;let a=null,n=null,i=null,o=e.status,l=e.statusText;if(e.ok){if("HEAD"!==this.method){const t=await e.text();""===t||(n="text/csv"===this.headers.Accept||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?t:JSON.parse(t))}const r=null===(t=this.headers.Prefer)||void 0===t?void 0:t.match(/count=(exact|planned|estimated)/),c=null===(s=e.headers.get("content-range"))||void 0===s?void 0:s.split("/");r&&c&&c.length>1&&(i=parseInt(c[1])),this.isMaybeSingle&&"GET"===this.method&&Array.isArray(n)&&(n.length>1?(a={code:"PGRST116",details:`Results contain ${n.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},n=null,i=null,o=406,l="Not Acceptable"):n=1===n.length?n[0]:null)}else{const t=await e.text();try{a=JSON.parse(t),Array.isArray(a)&&404===e.status&&(n=[],a=null,o=200,l="OK")}catch(c){404===e.status&&""===t?(o=204,l="No Content"):a={message:t}}if(a&&this.isMaybeSingle&&(null===(r=null==a?void 0:a.details)||void 0===r?void 0:r.includes("0 rows"))&&(a=null,o=200,l="OK"),a&&this.shouldThrowOnError)throw new sn.default(a)}return{error:a,data:n,count:i,status:o,statusText:l}});return this.shouldThrowOnError||(s=s.catch(e=>{var t,s,r;return{error:{message:`${null!==(t=null==e?void 0:e.name)&&void 0!==t?t:"FetchError"}: ${null==e?void 0:e.message}`,details:`${null!==(s=null==e?void 0:e.stack)&&void 0!==s?s:""}`,hint:"",code:`${null!==(r=null==e?void 0:e.code)&&void 0!==r?r:""}`},data:null,count:null,status:0,statusText:""}})),s.then(e,t)}returns(){return this}overrideTypes(){return this}};var rn=Be&&Be.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Fa,"__esModule",{value:!0});const an=rn(qa);let nn=class extends an.default{select(e){let t=!1;const s=(null!=e?e:"*").split("").map(e=>/\s/.test(e)&&!t?"":('"'===e&&(t=!t),e)).join("");return this.url.searchParams.set("select",s),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:t=!0,nullsFirst:s,foreignTable:r,referencedTable:a=r}={}){const n=a?`${a}.order`:"order",i=this.url.searchParams.get(n);return this.url.searchParams.set(n,`${i?`${i},`:""}${e}.${t?"asc":"desc"}${void 0===s?"":s?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:s=t}={}){const r=void 0===s?"limit":`${s}.limit`;return this.url.searchParams.set(r,`${e}`),this}range(e,t,{foreignTable:s,referencedTable:r=s}={}){const a=void 0===r?"offset":`${r}.offset`,n=void 0===r?"limit":`${r}.limit`;return this.url.searchParams.set(a,`${e}`),this.url.searchParams.set(n,""+(t-e+1)),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return"GET"===this.method?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:t=!1,settings:s=!1,buffers:r=!1,wal:a=!1,format:n="text"}={}){var i;const o=[e?"analyze":null,t?"verbose":null,s?"settings":null,r?"buffers":null,a?"wal":null].filter(Boolean).join("|"),l=null!==(i=this.headers.Accept)&&void 0!==i?i:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${n}; for="${l}"; options=${o};`,this}rollback(){var e;return(null!==(e=this.headers.Prefer)&&void 0!==e?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};Fa.default=nn;var on=Be&&Be.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(za,"__esModule",{value:!0});const ln=on(Fa);let cn=class extends ln.default{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,t){const s=Array.from(new Set(t)).map(e=>"string"==typeof e&&new RegExp("[,()]").test(e)?`"${e}"`:`${e}`).join(",");return this.url.searchParams.append(e,`in.(${s})`),this}contains(e,t){return"string"==typeof t?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return"string"==typeof t?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return"string"==typeof t?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:s,type:r}={}){let a="";"plain"===r?a="pl":"phrase"===r?a="ph":"websearch"===r&&(a="w");const n=void 0===s?"":`(${s})`;return this.url.searchParams.append(e,`${a}fts${n}.${t}`),this}match(e){return Object.entries(e).forEach(([e,t])=>{this.url.searchParams.append(e,`eq.${t}`)}),this}not(e,t,s){return this.url.searchParams.append(e,`not.${t}.${s}`),this}or(e,{foreignTable:t,referencedTable:s=t}={}){const r=s?`${s}.or`:"or";return this.url.searchParams.append(r,`(${e})`),this}filter(e,t,s){return this.url.searchParams.append(e,`${t}.${s}`),this}};za.default=cn;var dn=Be&&Be.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ba,"__esModule",{value:!0});const un=dn(za);Ba.default=class{constructor(e,{headers:t={},schema:s,fetch:r}){this.url=e,this.headers=t,this.schema=s,this.fetch=r}select(e,{head:t=!1,count:s}={}){const r=t?"HEAD":"GET";let a=!1;const n=(null!=e?e:"*").split("").map(e=>/\s/.test(e)&&!a?"":('"'===e&&(a=!a),e)).join("");return this.url.searchParams.set("select",n),s&&(this.headers.Prefer=`count=${s}`),new un.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:t,defaultToNull:s=!0}={}){const r=[];if(this.headers.Prefer&&r.push(this.headers.Prefer),t&&r.push(`count=${t}`),s||r.push("missing=default"),this.headers.Prefer=r.join(","),Array.isArray(e)){const t=e.reduce((e,t)=>e.concat(Object.keys(t)),[]);if(t.length>0){const e=[...new Set(t)].map(e=>`"${e}"`);this.url.searchParams.set("columns",e.join(","))}}return new un.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:t,ignoreDuplicates:s=!1,count:r,defaultToNull:a=!0}={}){const n=[`resolution=${s?"ignore":"merge"}-duplicates`];if(void 0!==t&&this.url.searchParams.set("on_conflict",t),this.headers.Prefer&&n.push(this.headers.Prefer),r&&n.push(`count=${r}`),a||n.push("missing=default"),this.headers.Prefer=n.join(","),Array.isArray(e)){const t=e.reduce((e,t)=>e.concat(Object.keys(t)),[]);if(t.length>0){const e=[...new Set(t)].map(e=>`"${e}"`);this.url.searchParams.set("columns",e.join(","))}}return new un.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:t}={}){const s=[];return this.headers.Prefer&&s.push(this.headers.Prefer),t&&s.push(`count=${t}`),this.headers.Prefer=s.join(","),new un.default({method:"PATCH",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const t=[];return e&&t.push(`count=${e}`),this.headers.Prefer&&t.unshift(this.headers.Prefer),this.headers.Prefer=t.join(","),new un.default({method:"DELETE",url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};var hn={},mn={};Object.defineProperty(mn,"__esModule",{value:!0}),mn.version=void 0,mn.version="0.0.0-automated",Object.defineProperty(hn,"__esModule",{value:!0}),hn.DEFAULT_HEADERS=void 0;const pn=mn;hn.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${pn.version}`};var fn=Be&&Be.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ma,"__esModule",{value:!0});const gn=fn(Ba),xn=fn(za),vn=hn;Ma.default=class e{constructor(e,{headers:t={},schema:s,fetch:r}={}){this.url=e,this.headers=Object.assign(Object.assign({},vn.DEFAULT_HEADERS),t),this.schemaName=s,this.fetch=r}from(e){const t=new URL(`${this.url}/${e}`);return new gn.default(t,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new e(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(e,t={},{head:s=!1,get:r=!1,count:a}={}){let n;const i=new URL(`${this.url}/rpc/${e}`);let o;s||r?(n=s?"HEAD":"GET",Object.entries(t).filter(([e,t])=>void 0!==t).map(([e,t])=>[e,Array.isArray(t)?`{${t.join(",")}}`:`${t}`]).forEach(([e,t])=>{i.searchParams.append(e,t)})):(n="POST",o=t);const l=Object.assign({},this.headers);return a&&(l.Prefer=`count=${a}`),new xn.default({method:n,url:i,headers:l,schema:this.schemaName,body:o,fetch:this.fetch,allowEmpty:!1})}};var bn=Be&&Be.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ua,"__esModule",{value:!0}),Ua.PostgrestError=Ua.PostgrestBuilder=Ua.PostgrestTransformBuilder=Ua.PostgrestFilterBuilder=Ua.PostgrestQueryBuilder=Ua.PostgrestClient=void 0;const yn=bn(Ma);Ua.PostgrestClient=yn.default;const wn=bn(Ba);Ua.PostgrestQueryBuilder=wn.default;const jn=bn(za);Ua.PostgrestFilterBuilder=jn.default;const Nn=bn(Fa);Ua.PostgrestTransformBuilder=Nn.default;const kn=bn(qa);Ua.PostgrestBuilder=kn.default;const _n=bn(Qa);Ua.PostgrestError=_n.default;var Sn=Ua.default={PostgrestClient:yn.default,PostgrestQueryBuilder:wn.default,PostgrestFilterBuilder:jn.default,PostgrestTransformBuilder:Nn.default,PostgrestBuilder:kn.default,PostgrestError:_n.default};const{PostgrestClient:Cn,PostgrestQueryBuilder:En,PostgrestFilterBuilder:Pn,PostgrestTransformBuilder:Tn,PostgrestBuilder:An,PostgrestError:Rn}=Sn;class On{static detectEnvironment(){var e;if("undefined"!=typeof WebSocket)return{type:"native",constructor:WebSocket};if("undefined"!=typeof globalThis&&void 0!==globalThis.WebSocket)return{type:"native",constructor:globalThis.WebSocket};if("undefined"!=typeof global&&void 0!==global.WebSocket)return{type:"native",constructor:global.WebSocket};if("undefined"!=typeof globalThis&&void 0!==globalThis.WebSocketPair&&void 0===globalThis.WebSocket)return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if("undefined"!=typeof globalThis&&globalThis.EdgeRuntime||"undefined"!=typeof navigator&&(null===(e=navigator.userAgent)||void 0===e?void 0:e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if("undefined"!=typeof process&&process.versions&&process.versions.node){const e=parseInt(process.versions.node.split(".")[0]);return e>=22?void 0!==globalThis.WebSocket?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${e} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${e} detected without native WebSocket support.`,workaround:'For Node.js < 22, install "ws" package and provide it via the transport option:\nimport ws from "ws"\nnew RealtimeClient(url, { transport: ws })'}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+=`\n\nSuggested solution: ${e.workaround}`),new Error(t)}static createWebSocket(e,t){return new(this.getWebSocketConstructor())(e,t)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return"native"===e.type||"ws"===e.type}catch(e){return!1}}}const In=1e4;var $n,Dn,Ln,Un,Mn,Bn,zn,Fn,qn,Wn,Hn;(Dn=$n||($n={}))[Dn.connecting=0]="connecting",Dn[Dn.open=1]="open",Dn[Dn.closing=2]="closing",Dn[Dn.closed=3]="closed",(Un=Ln||(Ln={})).closed="closed",Un.errored="errored",Un.joined="joined",Un.joining="joining",Un.leaving="leaving",(Bn=Mn||(Mn={})).close="phx_close",Bn.error="phx_error",Bn.join="phx_join",Bn.reply="phx_reply",Bn.leave="phx_leave",Bn.access_token="access_token",(zn||(zn={})).websocket="websocket",(qn=Fn||(Fn={})).Connecting="connecting",qn.Open="open",qn.Closing="closing",qn.Closed="closed";class Gn{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t("string"==typeof e?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),s=new TextDecoder;return this._decodeBroadcast(e,t,s)}_decodeBroadcast(e,t,s){const r=t.getUint8(1),a=t.getUint8(2);let n=this.HEADER_LENGTH+2;const i=s.decode(e.slice(n,n+r));n+=r;const o=s.decode(e.slice(n,n+a));n+=a;return{ref:null,topic:i,event:o,payload:JSON.parse(s.decode(e.slice(n,e.byteLength)))}}}class Kn{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}(Hn=Wn||(Wn={})).abstime="abstime",Hn.bool="bool",Hn.date="date",Hn.daterange="daterange",Hn.float4="float4",Hn.float8="float8",Hn.int2="int2",Hn.int4="int4",Hn.int4range="int4range",Hn.int8="int8",Hn.int8range="int8range",Hn.json="json",Hn.jsonb="jsonb",Hn.money="money",Hn.numeric="numeric",Hn.oid="oid",Hn.reltime="reltime",Hn.text="text",Hn.time="time",Hn.timestamp="timestamp",Hn.timestamptz="timestamptz",Hn.timetz="timetz",Hn.tsrange="tsrange",Hn.tstzrange="tstzrange";const Vn=(e,t,s={})=>{var r;const a=null!==(r=s.skipTypes)&&void 0!==r?r:[];return Object.keys(t).reduce((s,r)=>(s[r]=Jn(r,e,t,a),s),{})},Jn=(e,t,s,r)=>{const a=t.find(t=>t.name===e),n=null==a?void 0:a.type,i=s[e];return n&&!r.includes(n)?Yn(n,i):Xn(i)},Yn=(e,t)=>{if("_"===e.charAt(0)){const s=e.slice(1,e.length);return ti(t,s)}switch(e){case Wn.bool:return Qn(t);case Wn.float4:case Wn.float8:case Wn.int2:case Wn.int4:case Wn.int8:case Wn.numeric:case Wn.oid:return Zn(t);case Wn.json:case Wn.jsonb:return ei(t);case Wn.timestamp:return si(t);case Wn.abstime:case Wn.date:case Wn.daterange:case Wn.int4range:case Wn.int8range:case Wn.money:case Wn.reltime:case Wn.text:case Wn.time:case Wn.timestamptz:case Wn.timetz:case Wn.tsrange:case Wn.tstzrange:default:return Xn(t)}},Xn=e=>e,Qn=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},Zn=e=>{if("string"==typeof e){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},ei=e=>{if("string"==typeof e)try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},ti=(e,t)=>{if("string"!=typeof e)return e;const s=e.length-1,r=e[s];if("{"===e[0]&&"}"===r){let r;const n=e.slice(1,s);try{r=JSON.parse("["+n+"]")}catch(a){r=n?n.split(","):[]}return r.map(e=>Yn(t,e))}return e},si=e=>"string"==typeof e?e.replace(" ","T"):e,ri=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")+"/api/broadcast"};class ai{constructor(e,t,s={},r=1e4){this.channel=e,this.event=t,this.payload=s,this.timeout=r,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var s;return this._hasReceived(e)&&t(null===(s=this.receivedResp)||void 0===s?void 0:s.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);this.channel._on(this.refEvent,{},e=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=e,this._matchReceive(e)}),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(t=>t.status===e).forEach(e=>e.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var ni,ii,oi,li,ci,di,ui,hi;(ii=ni||(ni={})).SYNC="sync",ii.JOIN="join",ii.LEAVE="leave";class mi{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=(null==t?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},e=>{const{onJoin:t,onLeave:s,onSync:r}=this.caller;this.joinRef=this.channel._joinRef(),this.state=mi.syncState(this.state,e,t,s),this.pendingDiffs.forEach(e=>{this.state=mi.syncDiff(this.state,e,t,s)}),this.pendingDiffs=[],r()}),this.channel._on(s.diff,{},e=>{const{onJoin:t,onLeave:s,onSync:r}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(e):(this.state=mi.syncDiff(this.state,e,t,s),r())}),this.onJoin((e,t,s)=>{this.channel._trigger("presence",{event:"join",key:e,currentPresences:t,newPresences:s})}),this.onLeave((e,t,s)=>{this.channel._trigger("presence",{event:"leave",key:e,currentPresences:t,leftPresences:s})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,s,r){const a=this.cloneDeep(e),n=this.transformState(t),i={},o={};return this.map(a,(e,t)=>{n[e]||(o[e]=t)}),this.map(n,(e,t)=>{const s=a[e];if(s){const r=t.map(e=>e.presence_ref),a=s.map(e=>e.presence_ref),n=t.filter(e=>a.indexOf(e.presence_ref)<0),l=s.filter(e=>r.indexOf(e.presence_ref)<0);n.length>0&&(i[e]=n),l.length>0&&(o[e]=l)}else i[e]=t}),this.syncDiff(a,{joins:i,leaves:o},s,r)}static syncDiff(e,t,s,r){const{joins:a,leaves:n}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return s||(s=()=>{}),r||(r=()=>{}),this.map(a,(t,r)=>{var a;const n=null!==(a=e[t])&&void 0!==a?a:[];if(e[t]=this.cloneDeep(r),n.length>0){const s=e[t].map(e=>e.presence_ref),r=n.filter(e=>s.indexOf(e.presence_ref)<0);e[t].unshift(...r)}s(t,n,r)}),this.map(n,(t,s)=>{let a=e[t];if(!a)return;const n=s.map(e=>e.presence_ref);a=a.filter(e=>n.indexOf(e.presence_ref)<0),e[t]=a,r(t,a,s),0===a.length&&delete e[t]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(s=>t(s,e[s]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,s)=>{const r=e[s];return t[s]="metas"in r?r.metas.map(e=>(e.presence_ref=e.phx_ref,delete e.phx_ref,delete e.phx_ref_prev,e)):r,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}(li=oi||(oi={})).ALL="*",li.INSERT="INSERT",li.UPDATE="UPDATE",li.DELETE="DELETE",(di=ci||(ci={})).BROADCAST="broadcast",di.PRESENCE="presence",di.POSTGRES_CHANGES="postgres_changes",di.SYSTEM="system",(hi=ui||(ui={})).SUBSCRIBED="SUBSCRIBED",hi.TIMED_OUT="TIMED_OUT",hi.CLOSED="CLOSED",hi.CHANNEL_ERROR="CHANNEL_ERROR";class pi{constructor(e,t={config:{}},s){this.topic=e,this.params=t,this.socket=s,this.bindings={},this.state=Ln.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new ai(this,Mn.join,this.params,this.timeout),this.rejoinTimer=new Kn(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Ln.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(e=>e.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Ln.closed,this.socket._remove(this)}),this._onError(e=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,e),this.state=Ln.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Ln.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",e=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,e),this.state=Ln.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Mn.reply,{},(e,t)=>{this._trigger(this._replyEventName(t),e)}),this.presence=new mi(this),this.broadcastEndpointURL=ri(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(e,t=this.timeout){var s,r;if(this.socket.isConnected()||this.socket.connect(),this.state==Ln.closed){const{config:{broadcast:a,presence:n,private:i}}=this.params,o=null!==(r=null===(s=this.bindings.postgres_changes)||void 0===s?void 0:s.map(e=>e.filter))&&void 0!==r?r:[],l=!!this.bindings[ci.PRESENCE]&&this.bindings[ci.PRESENCE].length>0,c={},d={broadcast:a,presence:Object.assign(Object.assign({},n),{enabled:l}),postgres_changes:o,private:i};this.socket.accessTokenValue&&(c.access_token=this.socket.accessTokenValue),this._onError(t=>null==e?void 0:e(ui.CHANNEL_ERROR,t)),this._onClose(()=>null==e?void 0:e(ui.CLOSED)),this.updateJoinPayload(Object.assign({config:d},c)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:t})=>{var s;if(this.socket.setAuth(),void 0!==t){const r=this.bindings.postgres_changes,a=null!==(s=null==r?void 0:r.length)&&void 0!==s?s:0,n=[];for(let s=0;s<a;s++){const a=r[s],{filter:{event:i,schema:o,table:l,filter:c}}=a,d=t&&t[s];if(!d||d.event!==i||d.schema!==o||d.table!==l||d.filter!==c)return this.unsubscribe(),this.state=Ln.errored,void(null==e||e(ui.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes")));n.push(Object.assign(Object.assign({},a),{id:d.id}))}return this.bindings.postgres_changes=n,void(e&&e(ui.SUBSCRIBED))}null==e||e(ui.SUBSCRIBED)}).receive("error",t=>{this.state=Ln.errored,null==e||e(ui.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(t).join(", ")||"error")))}).receive("timeout",()=>{null==e||e(ui.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,s){return this.state===Ln.joined&&e===ci.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,t,s)}async send(e,t={}){var s,r;if(this._canPush()||"broadcast"!==e.type)return new Promise(s=>{var r,a,n;const i=this._push(e.type,e,t.timeout||this.timeout);"broadcast"!==e.type||(null===(n=null===(a=null===(r=this.params)||void 0===r?void 0:r.config)||void 0===a?void 0:a.broadcast)||void 0===n?void 0:n.ack)||s("ok"),i.receive("ok",()=>s("ok")),i.receive("error",()=>s("error")),i.receive("timeout",()=>s("timed out"))});{const{event:n,payload:i}=e,o={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:n,payload:i,private:this.private}]})};try{const e=await this._fetchWithTimeout(this.broadcastEndpointURL,o,null!==(s=t.timeout)&&void 0!==s?s:this.timeout);return await(null===(r=e.body)||void 0===r?void 0:r.cancel()),e.ok?"ok":"error"}catch(a){return"AbortError"===a.name?"timed out":"error"}}}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Ln.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Mn.close,"leave",this._joinRef())};this.joinPush.destroy();let s=null;return new Promise(r=>{s=new ai(this,Mn.leave,{},e),s.receive("ok",()=>{t(),r("ok")}).receive("timeout",()=>{t(),r("timed out")}).receive("error",()=>{r("error")}),s.send(),this._canPush()||s.trigger("ok",{})}).finally(()=>{null==s||s.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Ln.closed,this.bindings={}}async _fetchWithTimeout(e,t,s){const r=new AbortController,a=setTimeout(()=>r.abort(),s),n=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:r.signal}));return clearTimeout(a),n}_push(e,t,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let r=new ai(this,e,t,s);return this._canPush()?r.send():this._addToPushBuffer(r),r}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>100){const e=this.pushBuffer.shift();e&&(e.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${e.event}`,e.payload))}}_onMessage(e,t,s){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,s){var r,a;const n=e.toLocaleLowerCase(),{close:i,error:o,leave:l,join:c}=Mn;if(s&&[i,o,l,c].indexOf(n)>=0&&s!==this._joinRef())return;let d=this._onMessage(n,t,s);if(t&&!d)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(n)?null===(r=this.bindings.postgres_changes)||void 0===r||r.filter(e=>{var t,s,r;return"*"===(null===(t=e.filter)||void 0===t?void 0:t.event)||(null===(r=null===(s=e.filter)||void 0===s?void 0:s.event)||void 0===r?void 0:r.toLocaleLowerCase())===n}).map(e=>e.callback(d,s)):null===(a=this.bindings[n])||void 0===a||a.filter(e=>{var s,r,a,i,o,l;if(["broadcast","presence","postgres_changes"].includes(n)){if("id"in e){const n=e.id,i=null===(s=e.filter)||void 0===s?void 0:s.event;return n&&(null===(r=t.ids)||void 0===r?void 0:r.includes(n))&&("*"===i||(null==i?void 0:i.toLocaleLowerCase())===(null===(a=t.data)||void 0===a?void 0:a.type.toLocaleLowerCase()))}{const s=null===(o=null===(i=null==e?void 0:e.filter)||void 0===i?void 0:i.event)||void 0===o?void 0:o.toLocaleLowerCase();return"*"===s||s===(null===(l=null==t?void 0:t.event)||void 0===l?void 0:l.toLocaleLowerCase())}}return e.type.toLocaleLowerCase()===n}).map(e=>{if("object"==typeof d&&"ids"in d){const e=d.data,{schema:t,table:s,commit_timestamp:r,type:a,errors:n}=e,i={schema:t,table:s,commit_timestamp:r,eventType:a,new:{},old:{},errors:n};d=Object.assign(Object.assign({},i),this._getPayloadRecords(e))}e.callback(d,s)})}_isClosed(){return this.state===Ln.closed}_isJoined(){return this.state===Ln.joined}_isJoining(){return this.state===Ln.joining}_isLeaving(){return this.state===Ln.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,s){const r=e.toLocaleLowerCase(),a={type:r,filter:t,callback:s};return this.bindings[r]?this.bindings[r].push(a):this.bindings[r]=[a],this}_off(e,t){const s=e.toLocaleLowerCase();return this.bindings[s]&&(this.bindings[s]=this.bindings[s].filter(e=>{var r;return!((null===(r=e.type)||void 0===r?void 0:r.toLocaleLowerCase())===s&&pi.isEqual(e.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const s in e)if(e[s]!==t[s])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Mn.close,{},e)}_onError(e){this._on(Mn.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Ln.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return"INSERT"!==e.type&&"UPDATE"!==e.type||(t.new=Vn(e.columns,e.record)),"UPDATE"!==e.type&&"DELETE"!==e.type||(t.old=Vn(e.columns,e.old_record)),t}}const fi=()=>{},gi=25e3,xi=10,vi=100,bi=[1e3,2e3,5e3,1e4];class yi{constructor(e,t){var s;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=In,this.transport=null,this.heartbeatIntervalMs=gi,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=fi,this.ref=0,this.reconnectTimer=null,this.logger=fi,this.conn=null,this.sendBuffer=[],this.serializer=new Gn,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=e=>{let t;return t=e||("undefined"==typeof fetch?(...e)=>Pa(async()=>{const{default:e}=await Promise.resolve().then(()=>Ya);return{default:e}},void 0).then(({default:t})=>t(...e)).catch(e=>{throw new Error(`Failed to load @supabase/node-fetch: ${e.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):fetch),(...e)=>t(...e)},!(null===(s=null==t?void 0:t.params)||void 0===s?void 0:s.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint=`${e}/${zn.websocket}`,this.httpEndpoint=ri(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(null==t?void 0:t.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||null!==this.conn&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=On.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const t=e.message;if(t.includes("Node.js"))throw new Error(`${t}\n\nTo use Realtime in Node.js, you need to provide a WebSocket implementation:\n\nOption 1: Use Node.js 22+ which has native WebSocket support\nOption 2: Install and provide the "ws" package:\n\n  npm install ws\n\n  import ws from "ws"\n  const client = new RealtimeClient(url, {\n    ...options,\n    transport: ws\n  })`);throw new Error(`WebSocket not available: ${t}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:"1.0.0"}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const s=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(s),this._setConnectionState("disconnected")},e?this.conn.close(e,null!=t?t:""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return 0===this.channels.length&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(e=>e.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,s){this.logger(e,t,s)}connectionState(){switch(this.conn&&this.conn.readyState){case $n.connecting:return Fn.Connecting;case $n.open:return Fn.Open;case $n.closing:return Fn.Closing;default:return Fn.Closed}}isConnected(){return this.connectionState()===Fn.Open}isConnecting(){return"connecting"===this._connectionState}isDisconnecting(){return"disconnecting"===this._connectionState}channel(e,t={config:{}}){const s=`realtime:${e}`,r=this.getChannels().find(e=>e.topic===s);if(r)return r;{const s=new pi(`realtime:${e}`,t,this);return this.channels.push(s),s}}push(e){const{topic:t,event:s,payload:r,ref:a}=e,n=()=>{this.encode(e,e=>{var t;null===(t=this.conn)||void 0===t||t.send(e)})};this.log("push",`${t} ${s} (${a})`,r),this.isConnected()?n():this.sendBuffer.push(n)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef)return this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),this._wasManualDisconnect=!1,null===(e=this.conn)||void 0===e||e.close(1e3,"heartbeat timeout"),void setTimeout(()=>{var e;this.isConnected()||null===(e=this.reconnectTimer)||void 0===e||e.scheduleTimeout()},vi);this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),this._setAuthSafely("heartbeat")}else this.heartbeatCallback("disconnected")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(t=>t.topic===e&&(t._isJoined()||t._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,e=>{"phoenix"===e.topic&&"phx_reply"===e.event&&this.heartbeatCallback("ok"===e.payload.status?"ok":"error"),e.ref&&e.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:t,event:s,payload:r,ref:a}=e,n=a?`(${a})`:"",i=r.status||"";this.log("receive",`${i} ${t} ${s} ${n}`.trim(),r),this.channels.filter(e=>e._isMember(t)).forEach(e=>e._trigger(s,r,a)),this._triggerStateCallbacks("message",e)})}_clearTimer(e){var t;"heartbeat"===e&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):"reconnect"===e&&(null===(t=this.reconnectTimer)||void 0===t||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=e=>{this.log("worker","worker error",e.message),this.workerRef.terminate()},this.workerRef.onmessage=e=>{"keepAlive"===e.data.event&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||null===(t=this.reconnectTimer)||void 0===t||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(Mn.error))}_appendParams(e,t){if(0===Object.keys(t).length)return e;const s=e.match(/\?/)?"&":"?";return`${e}${s}${new URLSearchParams(t)}`}_workerObjectUrl(e){let t;if(e)t=e;else{const e=new Blob(['\n  addEventListener("message", (e) => {\n    if (e.data.event === "start") {\n      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);\n    }\n  });'],{type:"application/javascript"});t=URL.createObjectURL(e)}return t}_setConnectionState(e,t=!1){this._connectionState=e,"connecting"===e?this._wasManualDisconnect=!1:"disconnecting"===e&&(this._wasManualDisconnect=t)}async _performAuth(e=null){let t;t=e||(this.accessToken?await this.accessToken():this.accessTokenValue),this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(e=>{const s={access_token:t,version:"realtime-js/2.15.1"};t&&e.updateJoinPayload(s),e.joinedOnce&&e._isJoined()&&e._push(Mn.access_token,{access_token:t})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(t=>{this.log("error",`error setting auth in ${e}`,t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(s=>{try{s(t)}catch(Ch){this.log("error",`error in ${e} callback`,Ch)}})}catch(Ch){this.log("error",`error triggering ${e} callbacks`,Ch)}}_setupReconnectionTimer(){this.reconnectTimer=new Kn(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},xi)},this.reconnectAfterMs)}_initializeOptions(e){var t,s,r,a,n,i,o,l;if(this.transport=null!==(t=null==e?void 0:e.transport)&&void 0!==t?t:null,this.timeout=null!==(s=null==e?void 0:e.timeout)&&void 0!==s?s:In,this.heartbeatIntervalMs=null!==(r=null==e?void 0:e.heartbeatIntervalMs)&&void 0!==r?r:gi,this.worker=null!==(a=null==e?void 0:e.worker)&&void 0!==a&&a,this.accessToken=null!==(n=null==e?void 0:e.accessToken)&&void 0!==n?n:null,(null==e?void 0:e.params)&&(this.params=e.params),(null==e?void 0:e.logger)&&(this.logger=e.logger),((null==e?void 0:e.logLevel)||(null==e?void 0:e.log_level))&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=null!==(i=null==e?void 0:e.reconnectAfterMs)&&void 0!==i?i:e=>bi[e-1]||1e4,this.encode=null!==(o=null==e?void 0:e.encode)&&void 0!==o?o:(e,t)=>t(JSON.stringify(e)),this.decode=null!==(l=null==e?void 0:e.decode)&&void 0!==l?l:this.serializer.decode.bind(this.serializer),this.worker){if("undefined"!=typeof window&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=null==e?void 0:e.workerUrl}}}class wi extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function ji(e){return"object"==typeof e&&null!==e&&"__isStorageError"in e}class Ni extends wi{constructor(e,t,s){super(e),this.name="StorageApiError",this.status=t,this.statusCode=s}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class ki extends wi{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var _i=function(e,t,s,r){return new(s||(s=Promise))(function(a,n){function i(e){try{l(r.next(e))}catch(Ch){n(Ch)}}function o(e){try{l(r.throw(e))}catch(Ch){n(Ch)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof s?t:new s(function(e){e(t)})).then(i,o)}l((r=r.apply(e,t||[])).next())})};const Si=e=>{let t;return t=e||("undefined"==typeof fetch?(...e)=>Pa(async()=>{const{default:e}=await Promise.resolve().then(()=>Ya);return{default:e}},void 0).then(({default:t})=>t(...e)):fetch),(...e)=>t(...e)},Ci=e=>{if(Array.isArray(e))return e.map(e=>Ci(e));if("function"==typeof e||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([e,s])=>{const r=e.replace(/([-_][a-z])/gi,e=>e.toUpperCase().replace(/[-_]/g,""));t[r]=Ci(s)}),t};var Ei=function(e,t,s,r){return new(s||(s=Promise))(function(a,n){function i(e){try{l(r.next(e))}catch(Ch){n(Ch)}}function o(e){try{l(r.throw(e))}catch(Ch){n(Ch)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof s?t:new s(function(e){e(t)})).then(i,o)}l((r=r.apply(e,t||[])).next())})};const Pi=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),Ti=(e,t,s)=>Ei(void 0,void 0,void 0,function*(){const r=yield _i(void 0,void 0,void 0,function*(){return"undefined"==typeof Response?(yield Pa(()=>Promise.resolve().then(()=>Ya),void 0)).Response:Response});e instanceof r&&!(null==s?void 0:s.noResolveJson)?e.json().then(s=>{const r=e.status||500,a=(null==s?void 0:s.statusCode)||r+"";t(new Ni(Pi(s),r,a))}).catch(e=>{t(new ki(Pi(e),e))}):t(new ki(Pi(e),e))}),Ai=(e,t,s,r)=>{const a={method:e,headers:(null==t?void 0:t.headers)||{}};return"GET"!==e&&r?((e=>{if("object"!=typeof e||null===e)return!1;const t=Object.getPrototypeOf(e);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t)||Symbol.toStringTag in e||Symbol.iterator in e)})(r)?(a.headers=Object.assign({"Content-Type":"application/json"},null==t?void 0:t.headers),a.body=JSON.stringify(r)):a.body=r,(null==t?void 0:t.duplex)&&(a.duplex=t.duplex),Object.assign(Object.assign({},a),s)):a};function Ri(e,t,s,r,a,n){return Ei(this,void 0,void 0,function*(){return new Promise((i,o)=>{e(s,Ai(t,r,a,n)).then(e=>{if(!e.ok)throw e;return(null==r?void 0:r.noResolveJson)?e:e.json()}).then(e=>i(e)).catch(e=>Ti(e,o,r))})})}function Oi(e,t,s,r){return Ei(this,void 0,void 0,function*(){return Ri(e,"GET",t,s,r)})}function Ii(e,t,s,r,a){return Ei(this,void 0,void 0,function*(){return Ri(e,"POST",t,r,a,s)})}function $i(e,t,s,r,a){return Ei(this,void 0,void 0,function*(){return Ri(e,"PUT",t,r,a,s)})}function Di(e,t,s,r,a){return Ei(this,void 0,void 0,function*(){return Ri(e,"DELETE",t,r,a,s)})}var Li=function(e,t,s,r){return new(s||(s=Promise))(function(a,n){function i(e){try{l(r.next(e))}catch(Ch){n(Ch)}}function o(e){try{l(r.throw(e))}catch(Ch){n(Ch)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof s?t:new s(function(e){e(t)})).then(i,o)}l((r=r.apply(e,t||[])).next())})};const Ui={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Mi={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Bi{constructor(e,t={},s,r){this.url=e,this.headers=t,this.bucketId=s,this.fetch=Si(r)}uploadOrUpdate(e,t,s,r){return Li(this,void 0,void 0,function*(){try{let a;const n=Object.assign(Object.assign({},Mi),r);let i=Object.assign(Object.assign({},this.headers),"POST"===e&&{"x-upsert":String(n.upsert)});const o=n.metadata;"undefined"!=typeof Blob&&s instanceof Blob?(a=new FormData,a.append("cacheControl",n.cacheControl),o&&a.append("metadata",this.encodeMetadata(o)),a.append("",s)):"undefined"!=typeof FormData&&s instanceof FormData?(a=s,a.append("cacheControl",n.cacheControl),o&&a.append("metadata",this.encodeMetadata(o))):(a=s,i["cache-control"]=`max-age=${n.cacheControl}`,i["content-type"]=n.contentType,o&&(i["x-metadata"]=this.toBase64(this.encodeMetadata(o)))),(null==r?void 0:r.headers)&&(i=Object.assign(Object.assign({},i),r.headers));const l=this._removeEmptyFolders(t),c=this._getFinalPath(l),d=yield("PUT"==e?$i:Ii)(this.fetch,`${this.url}/object/${c}`,a,Object.assign({headers:i},(null==n?void 0:n.duplex)?{duplex:n.duplex}:{}));return{data:{path:l,id:d.Id,fullPath:d.Key},error:null}}catch(a){if(ji(a))return{data:null,error:a};throw a}})}upload(e,t,s){return Li(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,s)})}uploadToSignedUrl(e,t,s,r){return Li(this,void 0,void 0,function*(){const a=this._removeEmptyFolders(e),n=this._getFinalPath(a),i=new URL(this.url+`/object/upload/sign/${n}`);i.searchParams.set("token",t);try{let e;const t=Object.assign({upsert:Mi.upsert},r),n=Object.assign(Object.assign({},this.headers),{"x-upsert":String(t.upsert)});"undefined"!=typeof Blob&&s instanceof Blob?(e=new FormData,e.append("cacheControl",t.cacheControl),e.append("",s)):"undefined"!=typeof FormData&&s instanceof FormData?(e=s,e.append("cacheControl",t.cacheControl)):(e=s,n["cache-control"]=`max-age=${t.cacheControl}`,n["content-type"]=t.contentType);return{data:{path:a,fullPath:(yield $i(this.fetch,i.toString(),e,{headers:n})).Key},error:null}}catch(o){if(ji(o))return{data:null,error:o};throw o}})}createSignedUploadUrl(e,t){return Li(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e);const r=Object.assign({},this.headers);(null==t?void 0:t.upsert)&&(r["x-upsert"]="true");const a=yield Ii(this.fetch,`${this.url}/object/upload/sign/${s}`,{},{headers:r}),n=new URL(this.url+a.url),i=n.searchParams.get("token");if(!i)throw new wi("No token returned by API");return{data:{signedUrl:n.toString(),path:e,token:i},error:null}}catch(s){if(ji(s))return{data:null,error:s};throw s}})}update(e,t,s){return Li(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,s)})}move(e,t,s){return Li(this,void 0,void 0,function*(){try{return{data:yield Ii(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null==s?void 0:s.destinationBucket},{headers:this.headers}),error:null}}catch(r){if(ji(r))return{data:null,error:r};throw r}})}copy(e,t,s){return Li(this,void 0,void 0,function*(){try{return{data:{path:(yield Ii(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null==s?void 0:s.destinationBucket},{headers:this.headers})).Key},error:null}}catch(r){if(ji(r))return{data:null,error:r};throw r}})}createSignedUrl(e,t,s){return Li(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e),a=yield Ii(this.fetch,`${this.url}/object/sign/${r}`,Object.assign({expiresIn:t},(null==s?void 0:s.transform)?{transform:s.transform}:{}),{headers:this.headers});const n=(null==s?void 0:s.download)?`&download=${!0===s.download?"":s.download}`:"";return a={signedUrl:encodeURI(`${this.url}${a.signedURL}${n}`)},{data:a,error:null}}catch(r){if(ji(r))return{data:null,error:r};throw r}})}createSignedUrls(e,t,s){return Li(this,void 0,void 0,function*(){try{const r=yield Ii(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),a=(null==s?void 0:s.download)?`&download=${!0===s.download?"":s.download}`:"";return{data:r.map(e=>Object.assign(Object.assign({},e),{signedUrl:e.signedURL?encodeURI(`${this.url}${e.signedURL}${a}`):null})),error:null}}catch(r){if(ji(r))return{data:null,error:r};throw r}})}download(e,t){return Li(this,void 0,void 0,function*(){const s=void 0!==(null==t?void 0:t.transform)?"render/image/authenticated":"object",r=this.transformOptsToQueryString((null==t?void 0:t.transform)||{}),a=r?`?${r}`:"";try{const t=this._getFinalPath(e),r=yield Oi(this.fetch,`${this.url}/${s}/${t}${a}`,{headers:this.headers,noResolveJson:!0});return{data:yield r.blob(),error:null}}catch(n){if(ji(n))return{data:null,error:n};throw n}})}info(e){return Li(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const e=yield Oi(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:Ci(e),error:null}}catch(s){if(ji(s))return{data:null,error:s};throw s}})}exists(e){return Li(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield function(e,t,s,r){return Ei(this,void 0,void 0,function*(){return Ri(e,"HEAD",t,Object.assign(Object.assign({},s),{noResolveJson:!0}),r)})}(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(s){if(ji(s)&&s instanceof ki){const e=s.originalError;if([400,404].includes(null==e?void 0:e.status))return{data:!1,error:s}}throw s}})}getPublicUrl(e,t){const s=this._getFinalPath(e),r=[],a=(null==t?void 0:t.download)?`download=${!0===t.download?"":t.download}`:"";""!==a&&r.push(a);const n=void 0!==(null==t?void 0:t.transform)?"render/image":"object",i=this.transformOptsToQueryString((null==t?void 0:t.transform)||{});""!==i&&r.push(i);let o=r.join("&");return""!==o&&(o=`?${o}`),{data:{publicUrl:encodeURI(`${this.url}/${n}/public/${s}${o}`)}}}remove(e){return Li(this,void 0,void 0,function*(){try{return{data:yield Di(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(ji(t))return{data:null,error:t};throw t}})}list(e,t,s){return Li(this,void 0,void 0,function*(){try{const r=Object.assign(Object.assign(Object.assign({},Ui),t),{prefix:e||""});return{data:yield Ii(this.fetch,`${this.url}/object/list/${this.bucketId}`,r,{headers:this.headers},s),error:null}}catch(r){if(ji(r))return{data:null,error:r};throw r}})}listV2(e,t){return Li(this,void 0,void 0,function*(){try{const s=Object.assign({},e);return{data:yield Ii(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,s,{headers:this.headers},t),error:null}}catch(s){if(ji(s))return{data:null,error:s};throw s}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return"undefined"!=typeof Buffer?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const zi={"X-Client-Info":"storage-js/2.11.0"};var Fi=function(e,t,s,r){return new(s||(s=Promise))(function(a,n){function i(e){try{l(r.next(e))}catch(Ch){n(Ch)}}function o(e){try{l(r.throw(e))}catch(Ch){n(Ch)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof s?t:new s(function(e){e(t)})).then(i,o)}l((r=r.apply(e,t||[])).next())})};class qi{constructor(e,t={},s,r){const a=new URL(e);if(null==r?void 0:r.useNewHostname){/supabase\.(co|in|red)$/.test(a.hostname)&&!a.hostname.includes("storage.supabase.")&&(a.hostname=a.hostname.replace("supabase.","storage.supabase."))}this.url=a.href,this.headers=Object.assign(Object.assign({},zi),t),this.fetch=Si(s)}listBuckets(){return Fi(this,void 0,void 0,function*(){try{return{data:yield Oi(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(ji(e))return{data:null,error:e};throw e}})}getBucket(e){return Fi(this,void 0,void 0,function*(){try{return{data:yield Oi(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(ji(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return Fi(this,void 0,void 0,function*(){try{return{data:yield Ii(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(ji(s))return{data:null,error:s};throw s}})}updateBucket(e,t){return Fi(this,void 0,void 0,function*(){try{return{data:yield $i(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(ji(s))return{data:null,error:s};throw s}})}emptyBucket(e){return Fi(this,void 0,void 0,function*(){try{return{data:yield Ii(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(ji(t))return{data:null,error:t};throw t}})}deleteBucket(e){return Fi(this,void 0,void 0,function*(){try{return{data:yield Di(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(ji(t))return{data:null,error:t};throw t}})}}class Wi extends qi{constructor(e,t={},s,r){super(e,t,s,r)}from(e){return new Bi(this.url,this.headers,e,this.fetch)}}let Hi="";Hi="undefined"!=typeof Deno?"deno":"undefined"!=typeof document?"web":"undefined"!=typeof navigator&&"ReactNative"===navigator.product?"react-native":"node";const Gi={headers:{"X-Client-Info":`supabase-js-${Hi}/2.55.0`}},Ki={schema:"public"},Vi={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Ji={};var Yi=function(e,t,s,r){return new(s||(s=Promise))(function(a,n){function i(e){try{l(r.next(e))}catch(Ch){n(Ch)}}function o(e){try{l(r.throw(e))}catch(Ch){n(Ch)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof s?t:new s(function(e){e(t)})).then(i,o)}l((r=r.apply(e,t||[])).next())})};const Xi=(e,t,s)=>{const r=(e=>{let t;return t=e||("undefined"==typeof fetch?Ga:fetch),(...e)=>t(...e)})(s),a="undefined"==typeof Headers?Ka:Headers;return(s,n)=>Yi(void 0,void 0,void 0,function*(){var i;const o=null!==(i=yield t())&&void 0!==i?i:e;let l=new a(null==n?void 0:n.headers);return l.has("apikey")||l.set("apikey",e),l.has("Authorization")||l.set("Authorization",`Bearer ${o}`),r(s,Object.assign(Object.assign({},n),{headers:l}))})};var Qi=function(e,t,s,r){return new(s||(s=Promise))(function(a,n){function i(e){try{l(r.next(e))}catch(Ch){n(Ch)}}function o(e){try{l(r.throw(e))}catch(Ch){n(Ch)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof s?t:new s(function(e){e(t)})).then(i,o)}l((r=r.apply(e,t||[])).next())})};const Zi="2.71.1",eo=3e4,to=9e4,so={"X-Client-Info":`gotrue-js/${Zi}`},ro="X-Supabase-Api-Version",ao={timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"},no=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i;class io extends Error{constructor(e,t,s){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=s}}function oo(e){return"object"==typeof e&&null!==e&&"__isAuthError"in e}class lo extends io{constructor(e,t,s){super(e,t,s),this.name="AuthApiError",this.status=t,this.code=s}}class co extends io{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class uo extends io{constructor(e,t,s,r){super(e,s,r),this.name=t,this.status=s}}class ho extends uo{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}class mo extends uo{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class po extends uo{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class fo extends uo{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class go extends uo{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class xo extends uo{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function vo(e){return oo(e)&&"AuthRetryableFetchError"===e.name}class bo extends uo{constructor(e,t,s){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=s}}class yo extends uo{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const wo="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),jo=" \t\n\r=".split(""),No=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<jo.length;t+=1)e[jo[t].charCodeAt(0)]=-2;for(let t=0;t<wo.length;t+=1)e[wo[t].charCodeAt(0)]=t;return e})();function ko(e,t,s){if(null!==e)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const e=t.queue>>t.queuedBits-6&63;s(wo[e]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const e=t.queue>>t.queuedBits-6&63;s(wo[e]),t.queuedBits-=6}}function _o(e,t,s){const r=No[e];if(!(r>-1)){if(-2===r)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}for(t.queue=t.queue<<6|r,t.queuedBits+=6;t.queuedBits>=8;)s(t.queue>>t.queuedBits-8&255),t.queuedBits-=8}function So(e){const t=[],s=e=>{t.push(String.fromCodePoint(e))},r={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},n=e=>{!function(e,t,s){if(0===t.utf8seq){if(e<=127)return void s(e);for(let s=1;s<6;s+=1)if(!(e>>7-s&1)){t.utf8seq=s;break}if(2===t.utf8seq)t.codepoint=31&e;else if(3===t.utf8seq)t.codepoint=15&e;else{if(4!==t.utf8seq)throw new Error("Invalid UTF-8 sequence");t.codepoint=7&e}t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|63&e,t.utf8seq-=1,0===t.utf8seq&&s(t.codepoint)}}(e,r,s)};for(let i=0;i<e.length;i+=1)_o(e.charCodeAt(i),a,n);return t.join("")}function Co(e,t){if(!(e<=127)){if(e<=2047)return t(192|e>>6),void t(128|63&e);if(e<=65535)return t(224|e>>12),t(128|e>>6&63),void t(128|63&e);if(e<=1114111)return t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),void t(128|63&e);throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}t(e)}function Eo(e){const t=[],s={queue:0,queuedBits:0},r=e=>{t.push(e)};for(let a=0;a<e.length;a+=1)_o(e.charCodeAt(a),s,r);return new Uint8Array(t)}function Po(e){const t=[];return function(e,t){for(let s=0;s<e.length;s+=1){let r=e.charCodeAt(s);if(r>55295&&r<=56319){const t=1024*(r-55296)&65535;r=65536+(e.charCodeAt(s+1)-56320&65535|t),s+=1}Co(r,t)}}(e,e=>t.push(e)),new Uint8Array(t)}function To(e){const t=[],s={queue:0,queuedBits:0},r=e=>{t.push(e)};return e.forEach(e=>ko(e,s,r)),ko(null,s,r),t.join("")}const Ao=()=>"undefined"!=typeof window&&"undefined"!=typeof document,Ro={tested:!1,writable:!1},Oo=()=>{if(!Ao())return!1;try{if("object"!=typeof globalThis.localStorage)return!1}catch(Ch){return!1}if(Ro.tested)return Ro.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Ro.tested=!0,Ro.writable=!0}catch(Ch){Ro.tested=!0,Ro.writable=!1}return Ro.writable};const Io=e=>{let t;return t=e||("undefined"==typeof fetch?(...e)=>Pa(async()=>{const{default:e}=await Promise.resolve().then(()=>Ya);return{default:e}},void 0).then(({default:t})=>t(...e)):fetch),(...e)=>t(...e)},$o=async(e,t,s)=>{await e.setItem(t,JSON.stringify(s))},Do=async(e,t)=>{const s=await e.getItem(t);if(!s)return null;try{return JSON.parse(s)}catch(r){return s}},Lo=async(e,t)=>{await e.removeItem(t)};class Uo{constructor(){this.promise=new Uo.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}function Mo(e){const t=e.split(".");if(3!==t.length)throw new yo("Invalid JWT structure");for(let s=0;s<t.length;s++)if(!no.test(t[s]))throw new yo("JWT not in base64url format");return{header:JSON.parse(So(t[0])),payload:JSON.parse(So(t[1])),signature:Eo(t[2]),raw:{header:t[0],payload:t[1]}}}function Bo(e){return("0"+e.toString(16)).substr(-2)}async function zo(e){if(!("undefined"!=typeof crypto&&void 0!==crypto.subtle&&"undefined"!=typeof TextEncoder))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const t=await async function(e){const t=(new TextEncoder).encode(e),s=await crypto.subtle.digest("SHA-256",t),r=new Uint8Array(s);return Array.from(r).map(e=>String.fromCharCode(e)).join("")}(e);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Fo(e,t,s=!1){const r=function(){const e=new Uint32Array(56);if("undefined"==typeof crypto){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",t=e.length;let s="";for(let r=0;r<56;r++)s+=e.charAt(Math.floor(Math.random()*t));return s}return crypto.getRandomValues(e),Array.from(e,Bo).join("")}();let a=r;s&&(a+="/PASSWORD_RECOVERY"),await $o(e,`${t}-code-verifier`,a);const n=await zo(r);return[n,r===n?"plain":"s256"]}Uo.promiseConstructor=Promise;const qo=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;const Wo=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Ho(e){if(!Wo.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Go(){return new Proxy({},{get:(e,t)=>{if("__isUserNotAvailableProxy"===t)return!0;if("symbol"==typeof t){const e=t.toString();if("Symbol(Symbol.toPrimitive)"===e||"Symbol(Symbol.toStringTag)"===e||"Symbol(util.inspect.custom)"===e)return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${t}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Ko(e){return JSON.parse(JSON.stringify(e))}const Vo=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),Jo=[502,503,504];async function Yo(e){var t,s;if(!("object"==typeof(s=e)&&null!==s&&"status"in s&&"ok"in s&&"json"in s&&"function"==typeof s.json))throw new xo(Vo(e),0);if(Jo.includes(e.status))throw new xo(Vo(e),e.status);let r,a;try{r=await e.json()}catch(Ch){throw new co(Vo(Ch),Ch)}const n=function(e){const t=e.headers.get(ro);if(!t)return null;if(!t.match(qo))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch(Ch){return null}}(e);if(n&&n.getTime()>=ao.timestamp&&"object"==typeof r&&r&&"string"==typeof r.code?a=r.code:"object"==typeof r&&r&&"string"==typeof r.error_code&&(a=r.error_code),a){if("weak_password"===a)throw new bo(Vo(r),e.status,(null===(t=r.weak_password)||void 0===t?void 0:t.reasons)||[]);if("session_not_found"===a)throw new ho}else if("object"==typeof r&&r&&"object"==typeof r.weak_password&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((e,t)=>e&&"string"==typeof t,!0))throw new bo(Vo(r),e.status,r.weak_password.reasons);throw new lo(Vo(r),e.status||500,a)}async function Xo(e,t,s,r){var a;const n=Object.assign({},null==r?void 0:r.headers);n[ro]||(n[ro]=ao.name),(null==r?void 0:r.jwt)&&(n.Authorization=`Bearer ${r.jwt}`);const i=null!==(a=null==r?void 0:r.query)&&void 0!==a?a:{};(null==r?void 0:r.redirectTo)&&(i.redirect_to=r.redirectTo);const o=Object.keys(i).length?"?"+new URLSearchParams(i).toString():"",l=await async function(e,t,s,r,a,n){const i=((e,t,s,r)=>{const a={method:e,headers:(null==t?void 0:t.headers)||{}};return"GET"===e?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},null==t?void 0:t.headers),a.body=JSON.stringify(r),Object.assign(Object.assign({},a),s))})(t,r,a,n);let o;try{o=await e(s,Object.assign({},i))}catch(Ch){throw console.error(Ch),new xo(Vo(Ch),0)}o.ok||await Yo(o);if(null==r?void 0:r.noResolveJson)return o;try{return await o.json()}catch(Ch){await Yo(Ch)}}(e,t,s+o,{headers:n,noResolveJson:null==r?void 0:r.noResolveJson},{},null==r?void 0:r.body);return(null==r?void 0:r.xform)?null==r?void 0:r.xform(l):{data:Object.assign({},l),error:null}}function Qo(e){var t;let s=null;var r;(function(e){return e.access_token&&e.refresh_token&&e.expires_in})(e)&&(s=Object.assign({},e),e.expires_at||(s.expires_at=(r=e.expires_in,Math.round(Date.now()/1e3)+r)));return{data:{session:s,user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function Zo(e){const t=Qo(e);return!t.error&&e.weak_password&&"object"==typeof e.weak_password&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&"string"==typeof e.weak_password.message&&e.weak_password.reasons.reduce((e,t)=>e&&"string"==typeof t,!0)&&(t.data.weak_password=e.weak_password),t}function el(e){var t;return{data:{user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function tl(e){return{data:e,error:null}}function sl(e){const{action_link:t,email_otp:s,hashed_token:r,redirect_to:a,verification_type:n}=e,i=function(e,t){var s={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(s[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(s[r[a]]=e[r[a]])}return s}(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]);return{data:{properties:{action_link:t,email_otp:s,hashed_token:r,redirect_to:a,verification_type:n},user:Object.assign({},i)},error:null}}function rl(e){return e}const al=["global","local","others"];class nl{constructor({url:e="",headers:t={},fetch:s}){this.url=e,this.headers=t,this.fetch=Io(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t=al[0]){if(al.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${al.join(", ")}`);try{return await Xo(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(s){if(oo(s))return{data:null,error:s};throw s}}async inviteUserByEmail(e,t={}){try{return await Xo(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:el})}catch(s){if(oo(s))return{data:{user:null},error:s};throw s}}async generateLink(e){try{const{options:t}=e,s=function(e,t){var s={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(s[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(s[r[a]]=e[r[a]])}return s}(e,["options"]),r=Object.assign(Object.assign({},s),t);return"newEmail"in s&&(r.new_email=null==s?void 0:s.newEmail,delete r.newEmail),await Xo(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:r,headers:this.headers,xform:sl,redirectTo:null==t?void 0:t.redirectTo})}catch(t){if(oo(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await Xo(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:el})}catch(t){if(oo(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,s,r,a,n,i,o;try{const l={nextPage:null,lastPage:0,total:0},c=await Xo(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:null!==(s=null===(t=null==e?void 0:e.page)||void 0===t?void 0:t.toString())&&void 0!==s?s:"",per_page:null!==(a=null===(r=null==e?void 0:e.perPage)||void 0===r?void 0:r.toString())&&void 0!==a?a:""},xform:rl});if(c.error)throw c.error;const d=await c.json(),u=null!==(n=c.headers.get("x-total-count"))&&void 0!==n?n:0,h=null!==(o=null===(i=c.headers.get("link"))||void 0===i?void 0:i.split(","))&&void 0!==o?o:[];return h.length>0&&(h.forEach(e=>{const t=parseInt(e.split(";")[0].split("=")[1].substring(0,1)),s=JSON.parse(e.split(";")[1].split("=")[1]);l[`${s}Page`]=t}),l.total=parseInt(u)),{data:Object.assign(Object.assign({},d),l),error:null}}catch(l){if(oo(l))return{data:{users:[]},error:l};throw l}}async getUserById(e){Ho(e);try{return await Xo(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:el})}catch(t){if(oo(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){Ho(e);try{return await Xo(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:el})}catch(s){if(oo(s))return{data:{user:null},error:s};throw s}}async deleteUser(e,t=!1){Ho(e);try{return await Xo(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:el})}catch(s){if(oo(s))return{data:{user:null},error:s};throw s}}async _listFactors(e){Ho(e.userId);try{const{data:t,error:s}=await Xo(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:e=>({data:{factors:e},error:null})});return{data:t,error:s}}catch(t){if(oo(t))return{data:null,error:t};throw t}}async _deleteFactor(e){Ho(e.userId),Ho(e.id);try{return{data:await Xo(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(oo(t))return{data:null,error:t};throw t}}}function il(e={}){return{getItem:t=>e[t]||null,setItem:(t,s)=>{e[t]=s},removeItem:t=>{delete e[t]}}}const ol=!!(globalThis&&Oo()&&globalThis.localStorage&&"true"===globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug"));class ll extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class cl extends ll{}async function dl(e,t,s){ol&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort(),ol&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,0===t?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async r=>{if(!r){if(0===t)throw ol&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new cl(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(ol)try{const e=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(e,null,"  "))}catch(Ch){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",Ch)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await s()}ol&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,r.name);try{return await s()}finally{ol&&console.log("@supabase/gotrue-js: navigatorLock: released",e,r.name)}}))}!function(){if("object"!=typeof globalThis)try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch(Ch){"undefined"!=typeof self&&(self.globalThis=self)}}();const ul={url:"http://localhost:9999",storageKey:"supabase.auth.token",autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:so,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function hl(e,t,s){return await s()}const ml={};class pl{constructor(e){var t,s;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=pl.nextInstanceID,pl.nextInstanceID+=1,this.instanceID>0&&Ao()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const r=Object.assign(Object.assign({},ul),e);if(this.logDebugMessages=!!r.debug,"function"==typeof r.debug&&(this.logger=r.debug),this.persistSession=r.persistSession,this.storageKey=r.storageKey,this.autoRefreshToken=r.autoRefreshToken,this.admin=new nl({url:r.url,headers:r.headers,fetch:r.fetch}),this.url=r.url,this.headers=r.headers,this.fetch=Io(r.fetch),this.lock=r.lock||hl,this.detectSessionInUrl=r.detectSessionInUrl,this.flowType=r.flowType,this.hasCustomAuthorizationHeader=r.hasCustomAuthorizationHeader,r.lock?this.lock=r.lock:Ao()&&(null===(t=null===globalThis||void 0===globalThis?void 0:globalThis.navigator)||void 0===t?void 0:t.locks)?this.lock=dl:this.lock=hl,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(r.storage?this.storage=r.storage:Oo()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=il(this.memoryStorage)),r.userStorage&&(this.userStorage=r.userStorage)):(this.memoryStorage={},this.storage=il(this.memoryStorage)),Ao()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(Ch){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",Ch)}null===(s=this.broadcastChannel)||void 0===s||s.addEventListener("message",async e=>{this._debug("received broadcast notification from other tab or client",e),await this._notifyAllSubscribers(e.data.event,e.data.session,!1)})}this.initialize()}get jwks(){var e,t;return null!==(t=null===(e=ml[this.storageKey])||void 0===e?void 0:e.jwks)&&void 0!==t?t:{keys:[]}}set jwks(e){ml[this.storageKey]=Object.assign(Object.assign({},ml[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return null!==(t=null===(e=ml[this.storageKey])||void 0===e?void 0:e.cachedAt)&&void 0!==t?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){ml[this.storageKey]=Object.assign(Object.assign({},ml[this.storageKey]),{cachedAt:e})}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Zi}) ${(new Date).toISOString()}`,...e),this}async initialize(){return this.initializePromise||(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))()),await this.initializePromise}async _initialize(){var e;try{const t=function(e){const t={},s=new URL(e);if(s.hash&&"#"===s.hash[0])try{new URLSearchParams(s.hash.substring(1)).forEach((e,s)=>{t[s]=e})}catch(Ch){}return s.searchParams.forEach((e,s)=>{t[s]=e}),t}(window.location.href);let s="none";if(this._isImplicitGrantCallback(t)?s="implicit":await this._isPKCECallback(t)&&(s="pkce"),Ao()&&this.detectSessionInUrl&&"none"!==s){const{data:r,error:a}=await this._getSessionFromURL(t,s);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),function(e){return oo(e)&&"AuthImplicitGrantRedirectError"===e.name}(a)){const t=null===(e=a.details)||void 0===e?void 0:e.code;if("identity_already_exists"===t||"identity_not_found"===t||"single_identity_not_deletable"===t)return{error:a}}return await this._removeSession(),{error:a}}const{session:n,redirectType:i}=r;return this._debug("#_initialize()","detected session in URL",n,"redirect type",i),await this._saveSession(n),setTimeout(async()=>{"recovery"===i?await this._notifyAllSubscribers("PASSWORD_RECOVERY",n):await this._notifyAllSubscribers("SIGNED_IN",n)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return oo(t)?{error:t}:{error:new co("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,s,r;try{const a=await Xo(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:null!==(s=null===(t=null==e?void 0:e.options)||void 0===t?void 0:t.data)&&void 0!==s?s:{},gotrue_meta_security:{captcha_token:null===(r=null==e?void 0:e.options)||void 0===r?void 0:r.captchaToken}},xform:Qo}),{data:n,error:i}=a;if(i||!n)return{data:{user:null,session:null},error:i};const o=n.session,l=n.user;return n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",o)),{data:{user:l,session:o},error:null}}catch(a){if(oo(a))return{data:{user:null,session:null},error:a};throw a}}async signUp(e){var t,s,r;try{let a;if("email"in e){const{email:s,password:r,options:n}=e;let i=null,o=null;"pkce"===this.flowType&&([i,o]=await Fo(this.storage,this.storageKey)),a=await Xo(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:null==n?void 0:n.emailRedirectTo,body:{email:s,password:r,data:null!==(t=null==n?void 0:n.data)&&void 0!==t?t:{},gotrue_meta_security:{captcha_token:null==n?void 0:n.captchaToken},code_challenge:i,code_challenge_method:o},xform:Qo})}else{if(!("phone"in e))throw new po("You must provide either an email or phone number and a password");{const{phone:t,password:n,options:i}=e;a=await Xo(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:t,password:n,data:null!==(s=null==i?void 0:i.data)&&void 0!==s?s:{},channel:null!==(r=null==i?void 0:i.channel)&&void 0!==r?r:"sms",gotrue_meta_security:{captcha_token:null==i?void 0:i.captchaToken}},xform:Qo})}}const{data:n,error:i}=a;if(i||!n)return{data:{user:null,session:null},error:i};const o=n.session,l=n.user;return n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",o)),{data:{user:l,session:o},error:null}}catch(a){if(oo(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithPassword(e){try{let t;if("email"in e){const{email:s,password:r,options:a}=e;t=await Xo(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:r,gotrue_meta_security:{captcha_token:null==a?void 0:a.captchaToken}},xform:Zo})}else{if(!("phone"in e))throw new po("You must provide either an email or phone number and a password");{const{phone:s,password:r,options:a}=e;t=await Xo(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:r,gotrue_meta_security:{captcha_token:null==a?void 0:a.captchaToken}},xform:Zo})}}const{data:s,error:r}=t;return r?{data:{user:null,session:null},error:r}:s&&s.session&&s.user?(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:r}):{data:{user:null,session:null},error:new mo}}catch(t){if(oo(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,s,r,a;return await this._handleProviderSignIn(e.provider,{redirectTo:null===(t=e.options)||void 0===t?void 0:t.redirectTo,scopes:null===(s=e.options)||void 0===s?void 0:s.scopes,queryParams:null===(r=e.options)||void 0===r?void 0:r.queryParams,skipBrowserRedirect:null===(a=e.options)||void 0===a?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;if("solana"===t)return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}async signInWithSolana(e){var t,s,r,a,n,i,o,l,c,d,u,h;let m,p;if("message"in e)m=e.message,p=e.signature;else{const{chain:u,wallet:h,statement:f,options:g}=e;let x;if(Ao())if("object"==typeof h)x=h;else{const e=window;if(!("solana"in e)||"object"!=typeof e.solana||!("signIn"in e.solana&&"function"==typeof e.solana.signIn||"signMessage"in e.solana&&"function"==typeof e.solana.signMessage))throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.");x=e.solana}else{if("object"!=typeof h||!(null==g?void 0:g.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");x=h}const v=new URL(null!==(t=null==g?void 0:g.url)&&void 0!==t?t:window.location.href);if("signIn"in x&&x.signIn){const e=await x.signIn(Object.assign(Object.assign(Object.assign({issuedAt:(new Date).toISOString()},null==g?void 0:g.signInWithSolana),{version:"1",domain:v.host,uri:v.href}),f?{statement:f}:null));let t;if(Array.isArray(e)&&e[0]&&"object"==typeof e[0])t=e[0];else{if(!(e&&"object"==typeof e&&"signedMessage"in e&&"signature"in e))throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");t=e}if(!("signedMessage"in t&&"signature"in t&&("string"==typeof t.signedMessage||t.signedMessage instanceof Uint8Array)&&t.signature instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields");m="string"==typeof t.signedMessage?t.signedMessage:(new TextDecoder).decode(t.signedMessage),p=t.signature}else{if(!("signMessage"in x&&"function"==typeof x.signMessage&&"publicKey"in x&&"object"==typeof x&&x.publicKey&&"toBase58"in x.publicKey&&"function"==typeof x.publicKey.toBase58))throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");m=[`${v.host} wants you to sign in with your Solana account:`,x.publicKey.toBase58(),...f?["",f,""]:[""],"Version: 1",`URI: ${v.href}`,`Issued At: ${null!==(r=null===(s=null==g?void 0:g.signInWithSolana)||void 0===s?void 0:s.issuedAt)&&void 0!==r?r:(new Date).toISOString()}`,...(null===(a=null==g?void 0:g.signInWithSolana)||void 0===a?void 0:a.notBefore)?[`Not Before: ${g.signInWithSolana.notBefore}`]:[],...(null===(n=null==g?void 0:g.signInWithSolana)||void 0===n?void 0:n.expirationTime)?[`Expiration Time: ${g.signInWithSolana.expirationTime}`]:[],...(null===(i=null==g?void 0:g.signInWithSolana)||void 0===i?void 0:i.chainId)?[`Chain ID: ${g.signInWithSolana.chainId}`]:[],...(null===(o=null==g?void 0:g.signInWithSolana)||void 0===o?void 0:o.nonce)?[`Nonce: ${g.signInWithSolana.nonce}`]:[],...(null===(l=null==g?void 0:g.signInWithSolana)||void 0===l?void 0:l.requestId)?[`Request ID: ${g.signInWithSolana.requestId}`]:[],...(null===(d=null===(c=null==g?void 0:g.signInWithSolana)||void 0===c?void 0:c.resources)||void 0===d?void 0:d.length)?["Resources",...g.signInWithSolana.resources.map(e=>`- ${e}`)]:[]].join("\n");const e=await x.signMessage((new TextEncoder).encode(m),"utf8");if(!(e&&e instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");p=e}}try{const{data:t,error:s}=await Xo(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:m,signature:To(p)},(null===(u=e.options)||void 0===u?void 0:u.captchaToken)?{gotrue_meta_security:{captcha_token:null===(h=e.options)||void 0===h?void 0:h.captchaToken}}:null),xform:Qo});if(s)throw s;return t&&t.session&&t.user?(t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),{data:Object.assign({},t),error:s}):{data:{user:null,session:null},error:new mo}}catch(f){if(oo(f))return{data:{user:null,session:null},error:f};throw f}}async _exchangeCodeForSession(e){const t=await Do(this.storage,`${this.storageKey}-code-verifier`),[s,r]=(null!=t?t:"").split("/");try{const{data:t,error:a}=await Xo(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:s},xform:Qo});if(await Lo(this.storage,`${this.storageKey}-code-verifier`),a)throw a;return t&&t.session&&t.user?(t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),{data:Object.assign(Object.assign({},t),{redirectType:null!=r?r:null}),error:a}):{data:{user:null,session:null,redirectType:null},error:new mo}}catch(a){if(oo(a))return{data:{user:null,session:null,redirectType:null},error:a};throw a}}async signInWithIdToken(e){try{const{options:t,provider:s,token:r,access_token:a,nonce:n}=e,i=await Xo(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:r,access_token:a,nonce:n,gotrue_meta_security:{captcha_token:null==t?void 0:t.captchaToken}},xform:Qo}),{data:o,error:l}=i;return l?{data:{user:null,session:null},error:l}:o&&o.session&&o.user?(o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:o,error:l}):{data:{user:null,session:null},error:new mo}}catch(t){if(oo(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,s,r,a,n;try{if("email"in e){const{email:r,options:a}=e;let n=null,i=null;"pkce"===this.flowType&&([n,i]=await Fo(this.storage,this.storageKey));const{error:o}=await Xo(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:r,data:null!==(t=null==a?void 0:a.data)&&void 0!==t?t:{},create_user:null===(s=null==a?void 0:a.shouldCreateUser)||void 0===s||s,gotrue_meta_security:{captcha_token:null==a?void 0:a.captchaToken},code_challenge:n,code_challenge_method:i},redirectTo:null==a?void 0:a.emailRedirectTo});return{data:{user:null,session:null},error:o}}if("phone"in e){const{phone:t,options:s}=e,{data:i,error:o}=await Xo(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:t,data:null!==(r=null==s?void 0:s.data)&&void 0!==r?r:{},create_user:null===(a=null==s?void 0:s.shouldCreateUser)||void 0===a||a,gotrue_meta_security:{captcha_token:null==s?void 0:s.captchaToken},channel:null!==(n=null==s?void 0:s.channel)&&void 0!==n?n:"sms"}});return{data:{user:null,session:null,messageId:null==i?void 0:i.message_id},error:o}}throw new po("You must provide either an email or phone number.")}catch(i){if(oo(i))return{data:{user:null,session:null},error:i};throw i}}async verifyOtp(e){var t,s;try{let r,a;"options"in e&&(r=null===(t=e.options)||void 0===t?void 0:t.redirectTo,a=null===(s=e.options)||void 0===s?void 0:s.captchaToken);const{data:n,error:i}=await Xo(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:a}}),redirectTo:r,xform:Qo});if(i)throw i;if(!n)throw new Error("An error occurred on token verification.");const o=n.session,l=n.user;return(null==o?void 0:o.access_token)&&(await this._saveSession(o),await this._notifyAllSubscribers("recovery"==e.type?"PASSWORD_RECOVERY":"SIGNED_IN",o)),{data:{user:l,session:o},error:null}}catch(r){if(oo(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithSSO(e){var t,s,r;try{let a=null,n=null;return"pkce"===this.flowType&&([a,n]=await Fo(this.storage,this.storageKey)),await Xo(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:null!==(s=null===(t=e.options)||void 0===t?void 0:t.redirectTo)&&void 0!==s?s:void 0}),(null===(r=null==e?void 0:e.options)||void 0===r?void 0:r.captchaToken)?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:n}),headers:this.headers,xform:tl})}catch(a){if(oo(a))return{data:null,error:a};throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:s}=e;if(s)throw s;if(!t)throw new ho;const{error:r}=await Xo(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:r}})}catch(e){if(oo(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:s,type:r,options:a}=e,{error:n}=await Xo(this.fetch,"POST",t,{headers:this.headers,body:{email:s,type:r,gotrue_meta_security:{captcha_token:null==a?void 0:a.captchaToken}},redirectTo:null==a?void 0:a.emailRedirectTo});return{data:{user:null,session:null},error:n}}if("phone"in e){const{phone:s,type:r,options:a}=e,{data:n,error:i}=await Xo(this.fetch,"POST",t,{headers:this.headers,body:{phone:s,type:r,gotrue_meta_security:{captcha_token:null==a?void 0:a.captchaToken}}});return{data:{user:null,session:null,messageId:null==n?void 0:n.message_id},error:i}}throw new po("You must provide either an email or phone number and a type")}catch(t){if(oo(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){await this.initializePromise;return await this._acquireLock(-1,async()=>this._useSession(async e=>e))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const e=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await e,await t()))();return this.pendingInLock.push((async()=>{try{await s}catch(Ch){}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const e=t();for(this.pendingInLock.push((async()=>{try{await e}catch(Ch){}})()),await e;this.pendingInLock.length;){const e=[...this.pendingInLock];await Promise.all(e),this.pendingInLock.splice(0,e.length)}return await e}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",(new Error).stack);try{let e=null;const t=await Do(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),null!==t&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const s=!!e.expires_at&&1e3*e.expires_at-Date.now()<to;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",e.expires_at),!s){if(this.userStorage){const t=await Do(this.userStorage,this.storageKey+"-user");(null==t?void 0:t.user)?e.user=t.user:e.user=Go()}if(this.storage.isServer&&e.user){let t=this.suppressGetSessionWarning;e=new Proxy(e,{get:(e,s,r)=>(t||"user"!==s||(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t=!0,this.suppressGetSessionWarning=!0),Reflect.get(e,s,r))})}return{data:{session:e},error:null}}const{session:r,error:a}=await this._callRefreshToken(e.refresh_token);return a?{data:{session:null},error:a}:{data:{session:r},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;return await this._acquireLock(-1,async()=>await this._getUser())}async _getUser(e){try{return e?await Xo(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:el}):await this._useSession(async e=>{var t,s,r;const{data:a,error:n}=e;if(n)throw n;return(null===(t=a.session)||void 0===t?void 0:t.access_token)||this.hasCustomAuthorizationHeader?await Xo(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:null!==(r=null===(s=a.session)||void 0===s?void 0:s.access_token)&&void 0!==r?r:void 0,xform:el}):{data:{user:null},error:new ho}})}catch(t){if(oo(t))return function(e){return oo(e)&&"AuthSessionMissingError"===e.name}(t)&&(await this._removeSession(),await Lo(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async s=>{const{data:r,error:a}=s;if(a)throw a;if(!r.session)throw new ho;const n=r.session;let i=null,o=null;"pkce"===this.flowType&&null!=e.email&&([i,o]=await Fo(this.storage,this.storageKey));const{data:l,error:c}=await Xo(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:null==t?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:i,code_challenge_method:o}),jwt:n.access_token,xform:el});if(c)throw c;return n.user=l.user,await this._saveSession(n),await this._notifyAllSubscribers("USER_UPDATED",n),{data:{user:n.user},error:null}})}catch(s){if(oo(s))return{data:{user:null},error:s};throw s}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new ho;const t=Date.now()/1e3;let s=t,r=!0,a=null;const{payload:n}=Mo(e.access_token);if(n.exp&&(s=n.exp,r=s<=t),r){const{session:t,error:s}=await this._callRefreshToken(e.refresh_token);if(s)return{data:{user:null,session:null},error:s};if(!t)return{data:{user:null,session:null},error:null};a=t}else{const{data:r,error:n}=await this._getUser(e.access_token);if(n)throw n;a={access_token:e.access_token,refresh_token:e.refresh_token,user:r.user,token_type:"bearer",expires_in:s-t,expires_at:s},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return{data:{user:a.user,session:a},error:null}}catch(t){if(oo(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var s;if(!e){const{data:r,error:a}=t;if(a)throw a;e=null!==(s=r.session)&&void 0!==s?s:void 0}if(!(null==e?void 0:e.refresh_token))throw new ho;const{session:r,error:a}=await this._callRefreshToken(e.refresh_token);return a?{data:{user:null,session:null},error:a}:r?{data:{user:r.user,session:r},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(oo(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!Ao())throw new fo("No browser detected.");if(e.error||e.error_description||e.error_code)throw new fo(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if("pkce"===this.flowType)throw new go("Not a valid PKCE flow url.");break;case"pkce":if("implicit"===this.flowType)throw new fo("Not a valid implicit grant flow url.")}if("pkce"===t){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new go("No code detected.");const{data:t,error:s}=await this._exchangeCodeForSession(e.code);if(s)throw s;const r=new URL(window.location.href);return r.searchParams.delete("code"),window.history.replaceState(window.history.state,"",r.toString()),{data:{session:t.session,redirectType:null},error:null}}const{provider_token:s,provider_refresh_token:r,access_token:a,refresh_token:n,expires_in:i,expires_at:o,token_type:l}=e;if(!(a&&i&&n&&l))throw new fo("No session defined in URL");const c=Math.round(Date.now()/1e3),d=parseInt(i);let u=c+d;o&&(u=parseInt(o));const h=u-c;1e3*h<=eo&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${h}s, should have been closer to ${d}s`);const m=u-d;c-m>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",m,u,c):c-m<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",m,u,c);const{data:p,error:f}=await this._getUser(a);if(f)throw f;const g={provider_token:s,provider_refresh_token:r,access_token:a,expires_in:d,expires_at:u,refresh_token:n,token_type:l,user:p.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:g,redirectType:e.type},error:null}}catch(s){if(oo(s))return{data:{session:null,redirectType:null},error:s};throw s}}_isImplicitGrantCallback(e){return Boolean(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await Do(this.storage,`${this.storageKey}-code-verifier`);return!(!e.code||!t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var s;const{data:r,error:a}=t;if(a)return{error:a};const n=null===(s=r.session)||void 0===s?void 0:s.access_token;if(n){const{error:t}=await this.admin.signOut(n,e);if(t&&(!function(e){return oo(e)&&"AuthApiError"===e.name}(t)||404!==t.status&&401!==t.status&&403!==t.status))return{error:t}}return"others"!==e&&(await this._removeSession(),await Lo(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}),s={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,s),(async()=>{await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})})(),{data:{subscription:s}}}async _emitInitialSession(e){return await this._useSession(async t=>{var s,r;try{const{data:{session:r},error:a}=t;if(a)throw a;await(null===(s=this.stateChangeEmitters.get(e))||void 0===s?void 0:s.callback("INITIAL_SESSION",r)),this._debug("INITIAL_SESSION","callback id",e,"session",r)}catch(a){await(null===(r=this.stateChangeEmitters.get(e))||void 0===r?void 0:r.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",a),console.error(a)}})}async resetPasswordForEmail(e,t={}){let s=null,r=null;"pkce"===this.flowType&&([s,r]=await Fo(this.storage,this.storageKey,!0));try{return await Xo(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:s,code_challenge_method:r,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(a){if(oo(a))return{data:null,error:a};throw a}}async getUserIdentities(){var e;try{const{data:t,error:s}=await this.getUser();if(s)throw s;return{data:{identities:null!==(e=t.user.identities)&&void 0!==e?e:[]},error:null}}catch(t){if(oo(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:s,error:r}=await this._useSession(async t=>{var s,r,a,n,i;const{data:o,error:l}=t;if(l)throw l;const c=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:null===(s=e.options)||void 0===s?void 0:s.redirectTo,scopes:null===(r=e.options)||void 0===r?void 0:r.scopes,queryParams:null===(a=e.options)||void 0===a?void 0:a.queryParams,skipBrowserRedirect:!0});return await Xo(this.fetch,"GET",c,{headers:this.headers,jwt:null!==(i=null===(n=o.session)||void 0===n?void 0:n.access_token)&&void 0!==i?i:void 0})});if(r)throw r;return Ao()&&!(null===(t=e.options)||void 0===t?void 0:t.skipBrowserRedirect)&&window.location.assign(null==s?void 0:s.url),{data:{provider:e.provider,url:null==s?void 0:s.url},error:null}}catch(s){if(oo(s))return{data:{provider:e.provider,url:null},error:s};throw s}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var s,r;const{data:a,error:n}=t;if(n)throw n;return await Xo(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:null!==(r=null===(s=a.session)||void 0===s?void 0:s.access_token)&&void 0!==r?r:void 0})})}catch(t){if(oo(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const a=Date.now();return await(s=async s=>(s>0&&await async function(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}(200*Math.pow(2,s-1)),this._debug(t,"refreshing attempt",s),await Xo(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Qo})),r=(e,t)=>{const s=200*Math.pow(2,e);return t&&vo(t)&&Date.now()+s-a<eo},new Promise((e,t)=>{(async()=>{for(let a=0;a<1/0;a++)try{const t=await s(a);if(!r(a,null,t))return void e(t)}catch(Ch){if(!r(a,Ch))return void t(Ch)}})()}))}catch(a){if(this._debug(t,"error",a),oo(a))return{data:{session:null,user:null},error:a};throw a}finally{this._debug(t,"end")}var s,r}_isValidSession(e){return"object"==typeof e&&null!==e&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const s=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",s),Ao()&&!t.skipBrowserRedirect&&window.location.assign(s),{data:{provider:e,url:s},error:null}}async _recoverAndRefresh(){var e,t;const s="#_recoverAndRefresh()";this._debug(s,"begin");try{const a=await Do(this.storage,this.storageKey);if(a&&this.userStorage){let t=await Do(this.userStorage,this.storageKey+"-user");this.storage.isServer||!Object.is(this.storage,this.userStorage)||t||(t={user:a.user},await $o(this.userStorage,this.storageKey+"-user",t)),a.user=null!==(e=null==t?void 0:t.user)&&void 0!==e?e:Go()}else if(a&&!a.user&&!a.user){const e=await Do(this.storage,this.storageKey+"-user");e&&(null==e?void 0:e.user)?(a.user=e.user,await Lo(this.storage,this.storageKey+"-user"),await $o(this.storage,this.storageKey,a)):a.user=Go()}if(this._debug(s,"session from storage",a),!this._isValidSession(a))return this._debug(s,"session is not valid"),void(null!==a&&await this._removeSession());const n=1e3*(null!==(t=a.expires_at)&&void 0!==t?t:1/0)-Date.now()<to;if(this._debug(s,`session has${n?"":" not"} expired with margin of 90000s`),n){if(this.autoRefreshToken&&a.refresh_token){const{error:e}=await this._callRefreshToken(a.refresh_token);e&&(console.error(e),vo(e)||(this._debug(s,"refresh failed with a non-retryable error, removing the session",e),await this._removeSession()))}}else if(a.user&&!0===a.user.__isUserNotAvailableProxy)try{const{data:e,error:t}=await this._getUser(a.access_token);!t&&(null==e?void 0:e.user)?(a.user=e.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(s,"could not get user data, skipping SIGNED_IN notification")}catch(r){console.error("Error getting user data:",r),this._debug(s,"error getting user data, skipping SIGNED_IN notification",r)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){return this._debug(s,"error",a),void console.error(a)}finally{this._debug(s,"end")}}async _callRefreshToken(e){var t,s;if(!e)throw new ho;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const r=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{this.refreshingDeferred=new Uo;const{data:t,error:s}=await this._refreshAccessToken(e);if(s)throw s;if(!t.session)throw new ho;await this._saveSession(t.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",t.session);const r={session:t.session,error:null};return this.refreshingDeferred.resolve(r),r}catch(a){if(this._debug(r,"error",a),oo(a)){const e={session:null,error:a};return vo(a)||await this._removeSession(),null===(t=this.refreshingDeferred)||void 0===t||t.resolve(e),e}throw null===(s=this.refreshingDeferred)||void 0===s||s.reject(a),a}finally{this.refreshingDeferred=null,this._debug(r,"end")}}async _notifyAllSubscribers(e,t,s=!0){const r=`#_notifyAllSubscribers(${e})`;this._debug(r,"begin",t,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:e,session:t});const r=[],a=Array.from(this.stateChangeEmitters.values()).map(async s=>{try{await s.callback(e,t)}catch(Ch){r.push(Ch)}});if(await Promise.all(a),r.length>0){for(let e=0;e<r.length;e+=1)console.error(r[e]);throw r[0]}}finally{this._debug(r,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const t=Object.assign({},e),s=t.user&&!0===t.user.__isUserNotAvailableProxy;if(this.userStorage){!s&&t.user&&await $o(this.userStorage,this.storageKey+"-user",{user:t.user});const e=Object.assign({},t);delete e.user;const r=Ko(e);await $o(this.storage,this.storageKey,r)}else{const e=Ko(t);await $o(this.storage,this.storageKey,e)}}async _removeSession(){this._debug("#_removeSession()"),await Lo(this.storage,this.storageKey),await Lo(this.storage,this.storageKey+"-code-verifier"),await Lo(this.storage,this.storageKey+"-user"),this.userStorage&&await Lo(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Ao()&&(null===window||void 0===window?void 0:window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(Ch){console.error("removing visibilitychange callback failed",Ch)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),eo);this.autoRefreshTicker=e,e&&"object"==typeof e&&"function"==typeof e.unref?e.unref():"undefined"!=typeof Deno&&"function"==typeof Deno.unrefTimer&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:s}}=t;if(!s||!s.refresh_token||!s.expires_at)return void this._debug("#_autoRefreshTokenTick()","no session");const r=Math.floor((1e3*s.expires_at-e)/eo);this._debug("#_autoRefreshTokenTick()",`access token expires in ${r} ticks, a tick lasts 30000ms, refresh threshold is 3 ticks`),r<=3&&await this._callRefreshToken(s.refresh_token)})}catch(Ch){console.error("Auto refresh tick failed with error. This is likely a transient error.",Ch)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(Ch){if(!(Ch.isAcquireTimeout||Ch instanceof ll))throw Ch;this._debug("auto refresh token tick lock not available")}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Ao()||!(null===window||void 0===window?void 0:window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),null===window||void 0===window||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),"visible"===document.visibilityState?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{"visible"===document.visibilityState?await this._recoverAndRefresh():this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting")}))):"hidden"===document.visibilityState&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,s){const r=[`provider=${encodeURIComponent(t)}`];if((null==s?void 0:s.redirectTo)&&r.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),(null==s?void 0:s.scopes)&&r.push(`scopes=${encodeURIComponent(s.scopes)}`),"pkce"===this.flowType){const[e,t]=await Fo(this.storage,this.storageKey),s=new URLSearchParams({code_challenge:`${encodeURIComponent(e)}`,code_challenge_method:`${encodeURIComponent(t)}`});r.push(s.toString())}if(null==s?void 0:s.queryParams){const e=new URLSearchParams(s.queryParams);r.push(e.toString())}return(null==s?void 0:s.skipBrowserRedirect)&&r.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${e}?${r.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var s;const{data:r,error:a}=t;return a?{data:null,error:a}:await Xo(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:null===(s=null==r?void 0:r.session)||void 0===s?void 0:s.access_token})})}catch(t){if(oo(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var s,r;const{data:a,error:n}=t;if(n)return{data:null,error:n};const i=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},"phone"===e.factorType?{phone:e.phone}:{issuer:e.issuer}),{data:o,error:l}=await Xo(this.fetch,"POST",`${this.url}/factors`,{body:i,headers:this.headers,jwt:null===(s=null==a?void 0:a.session)||void 0===s?void 0:s.access_token});return l?{data:null,error:l}:("totp"===e.factorType&&(null===(r=null==o?void 0:o.totp)||void 0===r?void 0:r.qr_code)&&(o.totp.qr_code=`data:image/svg+xml;utf-8,${o.totp.qr_code}`),{data:o,error:null})})}catch(t){if(oo(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var s;const{data:r,error:a}=t;if(a)return{data:null,error:a};const{data:n,error:i}=await Xo(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:null===(s=null==r?void 0:r.session)||void 0===s?void 0:s.access_token});return i?{data:null,error:i}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+n.expires_in},n)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",n),{data:n,error:i})})}catch(t){if(oo(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var s;const{data:r,error:a}=t;return a?{data:null,error:a}:await Xo(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:null===(s=null==r?void 0:r.session)||void 0===s?void 0:s.access_token})})}catch(t){if(oo(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:s}=await this._challenge({factorId:e.factorId});return s?{data:null,error:s}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const s=(null==e?void 0:e.factors)||[],r=s.filter(e=>"totp"===e.factor_type&&"verified"===e.status),a=s.filter(e=>"phone"===e.factor_type&&"verified"===e.status);return{data:{all:s,totp:r,phone:a},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,s;const{data:{session:r},error:a}=e;if(a)return{data:null,error:a};if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:n}=Mo(r.access_token);let i=null;n.aal&&(i=n.aal);let o=i;(null!==(s=null===(t=r.user.factors)||void 0===t?void 0:t.filter(e=>"verified"===e.status))&&void 0!==s?s:[]).length>0&&(o="aal2");return{data:{currentLevel:i,nextLevel:o,currentAuthenticationMethods:n.amr||[]},error:null}}))}async fetchJwk(e,t={keys:[]}){let s=t.keys.find(t=>t.kid===e);if(s)return s;const r=Date.now();if(s=this.jwks.keys.find(t=>t.kid===e),s&&this.jwks_cached_at+6e5>r)return s;const{data:a,error:n}=await Xo(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(n)throw n;return a.keys&&0!==a.keys.length?(this.jwks=a,this.jwks_cached_at=r,s=a.keys.find(t=>t.kid===e),s||null):null}async getClaims(e,t={}){try{let s=e;if(!s){const{data:e,error:t}=await this.getSession();if(t||!e.session)return{data:null,error:t};s=e.session.access_token}const{header:r,payload:a,signature:n,raw:{header:i,payload:o}}=Mo(s);(null==t?void 0:t.allowExpired)||function(e){if(!e)throw new Error("Missing exp claim");if(e<=Math.floor(Date.now()/1e3))throw new Error("JWT has expired")}(a.exp);const l=r.alg&&!r.alg.startsWith("HS")&&r.kid&&"crypto"in globalThis&&"subtle"in globalThis.crypto?await this.fetchJwk(r.kid,(null==t?void 0:t.keys)?{keys:t.keys}:null==t?void 0:t.jwks):null;if(!l){const{error:e}=await this.getUser(s);if(e)throw e;return{data:{claims:a,header:r,signature:n},error:null}}const c=function(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}(r.alg),d=await crypto.subtle.importKey("jwk",l,c,!0,["verify"]);if(!(await crypto.subtle.verify(c,d,n,Po(`${i}.${o}`))))throw new yo("Invalid JWT signature");return{data:{claims:a,header:r,signature:n},error:null}}catch(s){if(oo(s))return{data:null,error:s};throw s}}}pl.nextInstanceID=0;const fl=pl;class gl extends fl{constructor(e){super(e)}}var xl=function(e,t,s,r){return new(s||(s=Promise))(function(a,n){function i(e){try{l(r.next(e))}catch(Ch){n(Ch)}}function o(e){try{l(r.throw(e))}catch(Ch){n(Ch)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof s?t:new s(function(e){e(t)})).then(i,o)}l((r=r.apply(e,t||[])).next())})};class vl{constructor(e,t,s){var r,a,n;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const i=(o=e).endsWith("/")?o:o+"/";var o;const l=new URL(i);this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const c=`sb-${l.hostname.split(".")[0]}-auth-token`,d=function(e,t){var s,r;const{db:a,auth:n,realtime:i,global:o}=e,{db:l,auth:c,realtime:d,global:u}=t,h={db:Object.assign(Object.assign({},l),a),auth:Object.assign(Object.assign({},c),n),realtime:Object.assign(Object.assign({},d),i),storage:{},global:Object.assign(Object.assign(Object.assign({},u),o),{headers:Object.assign(Object.assign({},null!==(s=null==u?void 0:u.headers)&&void 0!==s?s:{}),null!==(r=null==o?void 0:o.headers)&&void 0!==r?r:{})}),accessToken:()=>Qi(this,void 0,void 0,function*(){return""})};return e.accessToken?h.accessToken=e.accessToken:delete h.accessToken,h}(null!=s?s:{},{db:Ki,realtime:Ji,auth:Object.assign(Object.assign({},Vi),{storageKey:c}),global:Gi});this.storageKey=null!==(r=d.auth.storageKey)&&void 0!==r?r:"",this.headers=null!==(a=d.global.headers)&&void 0!==a?a:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(e,t)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(t)} is not possible`)}})):this.auth=this._initSupabaseAuthClient(null!==(n=d.auth)&&void 0!==n?n:{},this.headers,d.global.fetch),this.fetch=Xi(t,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.rest=new Cn(new URL("rest/v1",l).href,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),this.storage=new Wi(this.storageUrl.href,this.headers,this.fetch,null==s?void 0:s.storage),d.accessToken||this._listenForAuthEvents()}get functions(){return new La(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},s={}){return this.rest.rpc(e,t,s)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return xl(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:s}=yield this.auth.getSession();return null!==(t=null===(e=s.session)||void 0===e?void 0:e.access_token)&&void 0!==t?t:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:s,storage:r,storageKey:a,flowType:n,lock:i,debug:o},l,c){const d={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new gl({url:this.authUrl.href,headers:Object.assign(Object.assign({},d),l),storageKey:a,autoRefreshToken:e,persistSession:t,detectSessionInUrl:s,storage:r,flowType:n,lock:i,debug:o,fetch:c,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new yi(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},null==e?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",null==t?void 0:t.access_token)})}_handleTokenChanged(e,t,s){"TOKEN_REFRESHED"!==e&&"SIGNED_IN"!==e||this.changedAccessToken===s?"SIGNED_OUT"===e&&(this.realtime.setAuth(),"STORAGE"==t&&this.auth.signOut(),this.changedAccessToken=void 0):this.changedAccessToken=s}}(function(){if("undefined"!=typeof window)return!1;if("undefined"==typeof process)return!1;const e=process.version;if(null==e)return!1;const t=e.match(/^v(\d+)\./);return!!t&&parseInt(t[1],10)<=18})()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const bl=new vl("https://bpomacnqaqzgeuahhlka.supabase.co","",yl);var yl;const wl="https://krib-host-dahsboard-backend.onrender.com/api",jl=wl,Nl="https:"===window.location.protocol?wl:jl,kl=Nl.replace("http://","https://");console.log(" API Configuration [FORCE UPDATE v2]:",{protocol:window.location.protocol,hostname:window.location.hostname,isDevelopment:"localhost"===window.location.hostname,original:Nl,final:kl,environment:void 0,timestamp:(new Date).toISOString()}),console.log(" SECURE_API_URL being used for all calls:",kl);const _l=Le.createContext(null);class Sl extends Error{constructor(e,t){super(t),this.status=e,this.name="APIError"}}async function Cl(e,t={}){const{data:{session:s}}=await bl.auth.getSession(),r=null==s?void 0:s.access_token,a={...t,headers:{"Content-Type":"application/json",...r&&{Authorization:`Bearer ${r}`},...t.headers}},n=`${kl}${e}`;console.log(" MAKING API CALL TO:",n);const i=await fetch(n,a);if(!i.ok){const e=await i.json().catch(()=>({message:"Unknown error"}));throw new Sl(i.status,e.message||`HTTP ${i.status}`)}return i.json()}function El({children:t}){const[s,r]=Le.useState(null),[a,n]=Le.useState(!0),[i,o]=Le.useState([]),[l,c]=Le.useState([]),[d,u]=Le.useState(null);async function h(){var e;try{const{data:{session:t}}=await bl.auth.getSession();(null==t?void 0:t.user)?(r({id:t.user.id,email:t.user.email||"",name:(null==(e=t.user.user_metadata)?void 0:e.full_name)||t.user.email||"User",created_at:t.user.created_at}),console.log("User authenticated with Supabase:",t.user)):console.log("No Supabase session found")}catch(t){console.error("Get current user error:",t),localStorage.removeItem("auth_token")}}Le.useEffect(()=>{!async function(){try{const{data:{session:e}}=await bl.auth.getSession();(null==e?void 0:e.access_token)&&(localStorage.setItem("auth_token",e.access_token),await h())}catch(e){console.error("Auth initialization error:",e)}finally{n(!1)}bl.auth.onAuthStateChange(async(e,t)=>{"SIGNED_IN"===e&&(null==t?void 0:t.access_token)?(localStorage.setItem("auth_token",t.access_token),await h()):"SIGNED_OUT"===e&&(localStorage.removeItem("auth_token"),r(null),o([]),c([]),u(null))})}()},[]);const m={user:s,isLoading:a,properties:i,bookings:l,analytics:d,signIn:async function(e,t){var s;try{n(!0);const{data:r,error:a}=await bl.auth.signInWithPassword({email:e,password:t});if(a)throw a;(null==(s=r.session)?void 0:s.access_token)&&(localStorage.setItem("auth_token",r.session.access_token),await h())}catch(r){throw new Error(r.message||"Failed to sign in")}finally{n(!1)}},signUp:async function(e,t,s){var r;try{n(!0);const{data:a,error:i}=await bl.auth.signUp({email:e,password:t,options:{data:{name:s}}});if(i)throw i;(null==(r=a.session)?void 0:r.access_token)&&(localStorage.setItem("auth_token",a.session.access_token),await Cl("/auth/signup",{method:"POST",body:JSON.stringify({name:s,email:e})}),await h())}catch(a){throw new Error(a.message||"Failed to sign up")}finally{n(!1)}},signInWithGoogle:async function(){try{console.log("Starting Google OAuth..."),n(!0);const{data:e,error:t}=await bl.auth.signInWithOAuth({provider:"google",options:{redirectTo:`${window.location.origin}/auth/callback`}});if(console.log("Google OAuth response:",{data:e,error:t}),t)throw console.error("Google OAuth error:",t),t;console.log("Google OAuth initiated successfully")}catch(e){throw console.error("Google sign-in error:",e),n(!1),new Error(e.message||"Failed to sign in with Google")}},signOut:async function(){try{await bl.auth.signOut(),localStorage.removeItem("auth_token"),r(null),o([]),c([]),u(null)}catch(e){console.error("Sign out error:",e)}},createProperty:async function(e){const t=await Cl("/properties",{method:"POST",body:JSON.stringify(e)});return o(e=>[t,...e]),t},updateProperty:async function(e,t){const s=await Cl(`/properties/${e}`,{method:"PUT",body:JSON.stringify(t)});return o(t=>t.map(t=>t.id===e?s:t)),s},deleteProperty:async function(e){await Cl(`/properties/${e}`,{method:"DELETE"}),o(t=>t.filter(t=>t.id!==e))},loadProperties:async function(){try{const e=await Cl("/properties");o(e)}catch(e){console.error("Load properties error:",e)}},generateAIDescription:async function(e){const t={property_data:e,use_anthropic:!1};console.log("Sending AI description request:",t);const s=await Cl("/properties/ai/generate-description",{method:"POST",body:JSON.stringify(t)});return console.log("AI description response:",s),s.description},loadBookings:async function(){try{const e=await Cl("/bookings");c(e)}catch(e){console.error("Load bookings error:",e)}},updateBooking:async function(e,t){const s=await Cl(`/bookings/${e}`,{method:"PUT",body:JSON.stringify(t)});return c(t=>t.map(t=>t.id===e?s:t)),s},getAnalytics:async function(){try{const e=await Cl("/analytics");return u(e),e}catch(e){throw console.error("Get analytics error:",e),e}},getFinancialSummary:async function(e="30days"){try{return await Cl(`/financials/summary?period=${e}`)}catch(t){throw console.error("Get financial summary error:",t),t}},getBankAccounts:async function(){try{return await Cl("/financials/bank-accounts")}catch(e){throw console.error("Get bank accounts error:",e),e}},addBankAccount:async function(e){try{return await Cl("/financials/bank-accounts",{method:"POST",body:JSON.stringify(e)})}catch(t){throw console.error("Add bank account error:",t),t}},requestPayout:async function(e){try{return await Cl("/financials/payouts/request",{method:"POST",body:JSON.stringify({amount:e})})}catch(t){throw console.error("Request payout error:",t),t}},getTransactions:async function(e=50){try{return await Cl(`/financials/transactions?limit=${e}`)}catch(t){throw console.error("Get transactions error:",t),t}},updatePayoutSettings:async function(e){try{return await Cl("/financials/payout-settings",{method:"PUT",body:JSON.stringify(e)})}catch(t){throw console.error("Update payout settings error:",t),t}},getUserProfile:async function(){try{return await Cl("/users/profile")}catch(e){throw console.error("Get user profile error:",e),e}},updateUserProfile:async function(e){try{const t=await Cl("/users/profile",{method:"PUT",body:JSON.stringify(e)});return r(t),t}catch(t){throw console.error("Update user profile error:",t),t}},updateUserSettings:async function(e){try{await Cl("/users/settings",{method:"PUT",body:JSON.stringify(e)})}catch(t){throw console.error("Update user settings error:",t),t}},changePassword:async function(e,t,s){try{await Cl("/users/change-password",{method:"POST",body:JSON.stringify({current_password:e,new_password:t,confirm_password:s})})}catch(r){throw console.error("Change password error:",r),r}},getUserNotifications:async function(){try{return await Cl("/users/notifications")}catch(e){throw console.error("Get user notifications error:",e),e}},updateUserNotifications:async function(e){try{await Cl("/users/notifications",{method:"PUT",body:JSON.stringify(e)})}catch(t){throw console.error("Update user notifications error:",t),t}},getUAEEmirates:async function(){try{return await Cl("/locations/emirates")}catch(e){throw console.error("Get UAE emirates error:",e),e}},getEmirateAreas:async function(e){try{return await Cl(`/locations/emirates/${e}/areas`)}catch(t){throw console.error("Get emirate areas error:",t),t}},getPopularLocations:async function(){try{return await Cl("/locations/popular")}catch(e){throw console.error("Get popular locations error:",e),e}},searchLocations:async function(e){try{return await Cl(`/locations/search?q=${encodeURIComponent(e)}`)}catch(t){throw console.error("Search locations error:",t),t}},validateLocation:async function(e,t){try{const s=new URLSearchParams({emirate:e});return t&&s.append("area",t),await Cl(`/locations/validate?${s.toString()}`)}catch(s){throw console.error("Validate location error:",s),s}},getUAEAmenities:async function(){try{return await Cl("/locations/amenities")}catch(e){throw console.error("Get UAE amenities error:",e),e}},getUAEPropertyTypes:async function(){try{return await Cl("/locations/property-types")}catch(e){throw console.error("Get UAE property types error:",e),e}}};return e.jsx(_l.Provider,{value:m,children:t})}function Pl(){const e=Le.useContext(_l);if(!e)throw new Error("useApp must be used within an AppProvider");return e}const Tl="/assets/krib-logo-BqldiSXI.svg";function Al({className:t,...s}){return e.jsx("div",{"data-slot":"card",className:ur("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border",t),...s})}function Rl({className:t,...s}){return e.jsx("div",{"data-slot":"card-header",className:ur("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 pt-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",t),...s})}function Ol({className:t,...s}){return e.jsx("h4",{"data-slot":"card-title",className:ur("leading-none",t),...s})}function Il({className:t,...s}){return e.jsx("p",{"data-slot":"card-description",className:ur("text-muted-foreground",t),...s})}function $l({className:t,...s}){return e.jsx("div",{"data-slot":"card-content",className:ur("px-6 [&:last-child]:pb-6",t),...s})}var Dl=Le.forwardRef((t,r)=>e.jsx(s.label,{...t,ref:r,onMouseDown:e=>{var s;e.target.closest("button, input, select, textarea")||(null==(s=t.onMouseDown)||s.call(t,e),!e.defaultPrevented&&e.detail>1&&e.preventDefault())}}));Dl.displayName="Label";var Ll=Dl;function Ul({className:t,...s}){return e.jsx(Ll,{"data-slot":"label",className:ur("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",t),...s})}var Ml="Tabs",[Bl,zl]=u(Ml,[S]),Fl=S(),[ql,Wl]=Bl(Ml),Hl=Le.forwardRef((t,r)=>{const{__scopeTabs:a,value:n,onValueChange:i,defaultValue:o,orientation:l="horizontal",dir:c,activationMode:d="automatic",...u}=t,h=_(c),[f,g]=p({prop:n,onChange:i,defaultProp:o??"",caller:Ml});return e.jsx(ql,{scope:a,baseId:m(),value:f,onValueChange:g,orientation:l,dir:h,activationMode:d,children:e.jsx(s.div,{dir:h,"data-orientation":l,...u,ref:r})})});Hl.displayName=Ml;var Gl="TabsList",Kl=Le.forwardRef((t,r)=>{const{__scopeTabs:a,loop:n=!0,...i}=t,o=Wl(Gl,a),l=Fl(a);return e.jsx(C,{asChild:!0,...l,orientation:o.orientation,dir:o.dir,loop:n,children:e.jsx(s.div,{role:"tablist","aria-orientation":o.orientation,...i,ref:r})})});Kl.displayName=Gl;var Vl="TabsTrigger",Jl=Le.forwardRef((t,r)=>{const{__scopeTabs:a,value:n,disabled:i=!1,...o}=t,l=Wl(Vl,a),c=Fl(a),d=Ql(l.baseId,n),u=Zl(l.baseId,n),h=n===l.value;return e.jsx(E,{asChild:!0,...c,focusable:!i,active:h,children:e.jsx(s.button,{type:"button",role:"tab","aria-selected":h,"aria-controls":u,"data-state":h?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:d,...o,ref:r,onMouseDown:v(t.onMouseDown,e=>{i||0!==e.button||!1!==e.ctrlKey?e.preventDefault():l.onValueChange(n)}),onKeyDown:v(t.onKeyDown,e=>{[" ","Enter"].includes(e.key)&&l.onValueChange(n)}),onFocus:v(t.onFocus,()=>{const e="manual"!==l.activationMode;h||i||!e||l.onValueChange(n)})})})});Jl.displayName=Vl;var Yl="TabsContent",Xl=Le.forwardRef((t,r)=>{const{__scopeTabs:a,value:n,forceMount:i,children:o,...l}=t,c=Wl(Yl,a),d=Ql(c.baseId,n),u=Zl(c.baseId,n),h=n===c.value,m=Le.useRef(h);return Le.useEffect(()=>{const e=requestAnimationFrame(()=>m.current=!1);return()=>cancelAnimationFrame(e)},[]),e.jsx(b,{present:i||h,children:({present:a})=>e.jsx(s.div,{"data-state":h?"active":"inactive","data-orientation":c.orientation,role:"tabpanel","aria-labelledby":d,hidden:!a,id:u,tabIndex:0,...l,ref:r,style:{...t.style,animationDuration:m.current?"0s":void 0},children:a&&o})})});function Ql(e,t){return`${e}-trigger-${t}`}function Zl(e,t){return`${e}-content-${t}`}Xl.displayName=Yl;var ec=Hl,tc=Kl,sc=Jl,rc=Xl;function ac({className:t,...s}){return e.jsx(ec,{"data-slot":"tabs",className:ur("flex flex-col gap-2",t),...s})}function nc({className:t,...s}){return e.jsx(tc,{"data-slot":"tabs-list",className:ur("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-xl p-[3px] flex",t),...s})}function ic({className:t,...s}){return e.jsx(sc,{"data-slot":"tabs-trigger",className:ur("data-[state=active]:bg-card dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-xl border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...s})}function oc({className:t,...s}){return e.jsx(rc,{"data-slot":"tabs-content",className:ur("flex-1 outline-none",t),...s})}function lc(){const{signIn:t,signUp:s,signInWithGoogle:r,isLoading:a}=Pl(),[n,i]=Le.useState(!1),[o,l]=Le.useState(!1),[c,d]=Le.useState(""),[u,h]=Le.useState({email:"",password:""}),[m,p]=Le.useState({name:"",email:"",password:"",confirmPassword:""});return a?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin h-8 w-8 border-2 border-primary border-t-transparent rounded-full mx-auto mb-4"}),e.jsx("p",{children:"Loading..."})]})}):e.jsxs("div",{className:"min-h-screen flex items-center justify-center krib-auth-real-estate-background p-4",children:[e.jsx("div",{className:"ink-splash-1"}),e.jsx("div",{className:"ink-splash-2"}),e.jsx("div",{className:"ink-droplet-1"}),e.jsx("div",{className:"ink-droplet-2"}),e.jsx("div",{className:"ink-droplet-3"}),e.jsx("div",{className:"ink-brush-1"}),e.jsx("div",{className:"ink-fine-1"}),e.jsx("div",{className:"ink-fine-2"}),e.jsx("div",{className:"ink-fine-3"}),e.jsxs(Al,{className:"w-full max-w-md krib-card krib-glow backdrop-blur-sm border border-white/20 shadow-2xl relative z-10",children:[e.jsxs(Rl,{className:"text-center",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("div",{className:"flex h-16 w-16 items-center justify-center rounded-xl krib-logo-container",children:e.jsx("img",{src:Tl,alt:"Krib",className:"h-10 w-10"})})}),e.jsx(Ol,{className:"text-2xl",children:"Welcome to Krib AI"}),e.jsx(Il,{children:"Manage your rental properties with AI assistance"})]}),e.jsxs($l,{className:"px-6 pb-6",children:[e.jsxs(ac,{defaultValue:"signin",className:"space-y-4",children:[e.jsxs(nc,{className:"grid w-full grid-cols-2 h-12 bg-krib-lime-soft/30 rounded-xl border border-krib-lime/10 p-1",children:[e.jsx(ic,{value:"signin",className:"h-10 rounded-lg font-medium data-[state=active]:bg-white data-[state=active]:text-krib-black data-[state=active]:shadow-sm transition-all duration-200",children:"Sign In"}),e.jsx(ic,{value:"signup",className:"h-10 rounded-lg font-medium data-[state=active]:bg-white data-[state=active]:text-krib-black data-[state=active]:shadow-sm transition-all duration-200",children:"Sign Up"})]}),c&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-xl text-sm font-medium",children:c}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs(mr,{onClick:async()=>{i(!0),d("");try{await r()}catch(e){e.message.includes("Google authentication is not properly configured")?d("Google authentication needs to be configured in your Supabase project. Please see the setup instructions below."):d("An error occurred during Google sign-in. Please try again.")}finally{i(!1)}},disabled:n,variant:"outline",className:"w-full flex items-center justify-center gap-3 h-12 rounded-xl border-gray-200 hover:border-gray-300 hover:bg-gray-50 transition-all duration-200 font-medium shadow-sm hover:shadow-md",children:[e.jsxs("svg",{className:"h-4 w-4",viewBox:"0 0 24 24",children:[e.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),e.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),e.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),e.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),n?"Signing in...":"Continue with Google"]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx(br,{className:"w-full bg-gray-200"})}),e.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:e.jsx("span",{className:"bg-white px-3 py-1 text-gray-500 font-medium rounded-full",children:"Or continue with email"})})]})]}),e.jsx(oc,{value:"signin",children:e.jsxs("form",{onSubmit:async e=>{e.preventDefault(),i(!0),d("");try{await t(u.email,u.password)}catch(s){d("An error occurred during sign in. Please try again.")}finally{i(!1)}},className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Ul,{htmlFor:"signin-email",className:"text-sm font-medium text-gray-700",children:"Email"}),e.jsxs("div",{className:"relative",children:[e.jsx(P,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),e.jsx(pr,{id:"signin-email",type:"email",placeholder:"Enter your email",className:"pl-10 h-12 rounded-xl border-gray-200 focus:border-krib-lime focus:ring-2 focus:ring-krib-lime/20 transition-all duration-200 bg-gray-50/50 focus:bg-white",value:u.email,onChange:e=>h(t=>({...t,email:e.target.value})),required:!0})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Ul,{htmlFor:"signin-password",className:"text-sm font-medium text-gray-700",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(T,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),e.jsx(pr,{id:"signin-password",type:o?"text":"password",placeholder:"Enter your password",className:"pl-10 pr-10 h-12 rounded-xl border-gray-200 focus:border-krib-lime focus:ring-2 focus:ring-krib-lime/20 transition-all duration-200 bg-gray-50/50 focus:bg-white",value:u.password,onChange:e=>h(t=>({...t,password:e.target.value})),required:!0}),e.jsx(mr,{type:"button",variant:"ghost",size:"sm",className:"absolute right-1 top-1/2 transform -translate-y-1/2 h-8 w-8 p-0 text-gray-400 hover:text-gray-600 rounded-lg",onClick:()=>l(!o),children:o?e.jsx(A,{className:"h-4 w-4"}):e.jsx(R,{className:"h-4 w-4"})})]})]}),e.jsx(mr,{type:"submit",className:"w-full h-12 rounded-xl font-medium transition-all duration-200",style:{background:"linear-gradient(135deg, #B8FF00 0%, #CBFC50 100%)",color:"#111111",border:"none",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)"},onMouseEnter:e=>{e.currentTarget.style.boxShadow="0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05)",e.currentTarget.style.transform="translateY(-1px)"},onMouseLeave:e=>{e.currentTarget.style.boxShadow="0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)",e.currentTarget.style.transform="translateY(0)"},disabled:n,children:n?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"animate-spin h-4 w-4 border-2 border-black border-t-transparent rounded-full"}),"Signing In..."]}):"Sign In"})]})}),e.jsx(oc,{value:"signup",children:e.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),i(!0),d(""),m.password!==m.confirmPassword)return d("Passwords do not match."),void i(!1);if(m.password.length<6)return d("Password must be at least 6 characters long."),void i(!1);try{await s(m.email,m.password,m.name)}catch(t){d("An error occurred during sign up. Please try again.")}finally{i(!1)}},className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Ul,{htmlFor:"signup-name",className:"text-sm font-medium text-gray-700",children:"Full Name"}),e.jsxs("div",{className:"relative",children:[e.jsx(O,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),e.jsx(pr,{id:"signup-name",type:"text",placeholder:"Enter your full name",className:"pl-10 h-12 rounded-xl border-gray-200 focus:border-krib-lime focus:ring-2 focus:ring-krib-lime/20 transition-all duration-200 bg-gray-50/50 focus:bg-white",value:m.name,onChange:e=>p(t=>({...t,name:e.target.value})),required:!0})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Ul,{htmlFor:"signup-email",className:"text-sm font-medium text-gray-700",children:"Email"}),e.jsxs("div",{className:"relative",children:[e.jsx(P,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),e.jsx(pr,{id:"signup-email",type:"email",placeholder:"Enter your email",className:"pl-10 h-12 rounded-xl border-gray-200 focus:border-krib-lime focus:ring-2 focus:ring-krib-lime/20 transition-all duration-200 bg-gray-50/50 focus:bg-white",value:m.email,onChange:e=>p(t=>({...t,email:e.target.value})),required:!0})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Ul,{htmlFor:"signup-password",className:"text-sm font-medium text-gray-700",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(T,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),e.jsx(pr,{id:"signup-password",type:o?"text":"password",placeholder:"Create a password",className:"pl-10 pr-10 h-12 rounded-xl border-gray-200 focus:border-krib-lime focus:ring-2 focus:ring-krib-lime/20 transition-all duration-200 bg-gray-50/50 focus:bg-white",value:m.password,onChange:e=>p(t=>({...t,password:e.target.value})),required:!0}),e.jsx(mr,{type:"button",variant:"ghost",size:"sm",className:"absolute right-1 top-1/2 transform -translate-y-1/2 h-8 w-8 p-0 text-gray-400 hover:text-gray-600 rounded-lg",onClick:()=>l(!o),children:o?e.jsx(A,{className:"h-4 w-4"}):e.jsx(R,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Ul,{htmlFor:"signup-confirm-password",className:"text-sm font-medium text-gray-700",children:"Confirm Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(T,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),e.jsx(pr,{id:"signup-confirm-password",type:o?"text":"password",placeholder:"Confirm your password",className:"pl-10 h-12 rounded-xl border-gray-200 focus:border-krib-lime focus:ring-2 focus:ring-krib-lime/20 transition-all duration-200 bg-gray-50/50 focus:bg-white",value:m.confirmPassword,onChange:e=>p(t=>({...t,confirmPassword:e.target.value})),required:!0})]})]}),e.jsx(mr,{type:"submit",className:"w-full h-12 rounded-xl font-medium transition-all duration-200",style:{background:"linear-gradient(135deg, #B8FF00 0%, #CBFC50 100%)",color:"#111111",border:"none",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)"},onMouseEnter:e=>{e.currentTarget.style.boxShadow="0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05)",e.currentTarget.style.transform="translateY(-1px)"},onMouseLeave:e=>{e.currentTarget.style.boxShadow="0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)",e.currentTarget.style.transform="translateY(0)"},disabled:n,children:n?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"animate-spin h-4 w-4 border-2 border-black border-t-transparent rounded-full"}),"Creating Account..."]}):"Create Account"})]})})]}),c.includes("Google authentication needs to be configured")&&e.jsxs("div",{className:"mt-6 p-4 bg-muted rounded-lg",children:[e.jsx("h4",{className:"font-medium mb-2 text-sm",children:"Google OAuth Setup Required"}),e.jsxs("div",{className:"text-xs text-muted-foreground space-y-2",children:[e.jsx("p",{children:"To enable Google sign-in, configure OAuth in your Supabase project:"}),e.jsxs("ol",{className:"list-decimal list-inside space-y-1 ml-2",children:[e.jsx("li",{children:"Go to Supabase Dashboard  Authentication  Providers"}),e.jsx("li",{children:"Enable Google provider"}),e.jsx("li",{children:"Add Google OAuth Client ID and Secret"}),e.jsxs("li",{children:["Set redirect URL: ",window.location.origin,"/auth/callback"]})]}),e.jsx("div",{className:"mt-2",children:e.jsx("a",{href:"https://supabase.com/docs/guides/auth/social-login/auth-google",target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline",children:"Complete setup guide "})})]})]})]})]})]})}const cc=[{id:"overview",title:"Overview",icon:I,description:"Dashboard overview"},{id:"properties",title:"My Properties",icon:$,description:"Manage your listings"},{id:"add-property",title:"Add Property",icon:D,description:"AI-powered listing creation"},{id:"analytics",title:"Analytics",icon:L,description:"Performance insights"},{id:"bookings",title:"Bookings",icon:U,description:"Manage reservations"},{id:"financials",title:"Financials",icon:M,description:"Earnings & payouts"},{id:"settings",title:"Settings",icon:B,description:"Account preferences"}];function dc({activeSection:t,onSectionChange:s}){const{user:r,signOut:a}=Pl();return e.jsxs(xa,{className:"krib-sidebar",children:[e.jsx(va,{className:"krib-sidebar-header border-b border-sidebar-border p-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-xl krib-logo-container",children:e.jsx("img",{src:Tl,alt:"Krib",className:"h-8 w-8"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-sidebar-foreground bg-gradient-to-r from-krib-gray-dark to-krib-black bg-clip-text",children:"Krib"}),e.jsx("p",{className:"text-sm text-sidebar-foreground/70 font-medium",children:"Property Dashboard"})]})]})}),e.jsx(ya,{children:e.jsxs(wa,{children:[e.jsx(ja,{className:"krib-sidebar-group-label",children:"Navigation"}),e.jsx(Na,{children:e.jsx(ka,{className:"krib-sidebar-menu",children:cc.map(r=>e.jsx(_a,{children:e.jsxs(Ca,{onClick:()=>s(r.id),isActive:t===r.id,tooltip:r.description,className:"transition-all duration-300 krib-sidebar-item "+(t===r.id?"krib-sidebar-active":""),children:[e.jsx(r.icon,{className:"h-4 w-4"}),e.jsx("span",{children:r.title})]})},r.id))})})]})}),e.jsx(ba,{className:"border-t border-sidebar-border p-4 krib-sidebar-header",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-3 px-3 py-2 rounded-lg bg-white/50 border border-krib-lime/10",children:[e.jsx("div",{className:"flex h-8 w-8 items-center justify-center rounded-full bg-gradient-to-br from-krib-lime/20 to-krib-lime-light/10",children:e.jsx(O,{className:"h-4 w-4 text-krib-gray-dark"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-sidebar-foreground truncate",children:(null==r?void 0:r.name)||"User"}),e.jsx("p",{className:"text-xs text-sidebar-foreground/70 truncate",children:null==r?void 0:r.email})]})]}),e.jsxs(mr,{variant:"ghost",size:"sm",onClick:a,className:"w-full justify-start text-sidebar-foreground/70 hover:text-sidebar-foreground hover:bg-red-50 transition-all duration-200",children:[e.jsx(z,{className:"h-4 w-4 mr-2"}),"Sign Out"]})]})})]})}var uc="Progress",hc=100,[mc,pc]=u(uc),[fc,gc]=mc(uc),xc=Le.forwardRef((t,r)=>{const{__scopeProgress:a,value:n=null,max:i,getValueLabel:o=yc,...l}=t;!i&&0!==i||Nc(i)||console.error(`Invalid prop \`max\` of value \`${`${i}`}\` supplied to \`${"Progress"}\`. Only numbers greater than 0 are valid max values. Defaulting to \`100\`.`);const c=Nc(i)?i:hc;null===n||kc(n,c)||console.error(function(e,t){return`Invalid prop \`value\` of value \`${e}\` supplied to \`${t}\`. The \`value\` prop must be:\n  - a positive number\n  - less than the value passed to \`max\` (or 100 if no \`max\` prop is set)\n  - \`null\` or \`undefined\` if the progress is indeterminate.\n\nDefaulting to \`null\`.`}(`${n}`,"Progress"));const d=kc(n,c)?n:null,u=jc(d)?o(d,c):void 0;return e.jsx(fc,{scope:a,value:d,max:c,children:e.jsx(s.div,{"aria-valuemax":c,"aria-valuemin":0,"aria-valuenow":jc(d)?d:void 0,"aria-valuetext":u,role:"progressbar","data-state":wc(d,c),"data-value":d??void 0,"data-max":c,...l,ref:r})})});xc.displayName=uc;var vc="ProgressIndicator",bc=Le.forwardRef((t,r)=>{const{__scopeProgress:a,...n}=t,i=gc(vc,a);return e.jsx(s.div,{"data-state":wc(i.value,i.max),"data-value":i.value??void 0,"data-max":i.max,...n,ref:r})});function yc(e,t){return`${Math.round(e/t*100)}%`}function wc(e,t){return null==e?"indeterminate":e===t?"complete":"loading"}function jc(e){return"number"==typeof e}function Nc(e){return jc(e)&&!isNaN(e)&&e>0}function kc(e,t){return jc(e)&&!isNaN(e)&&e<=t&&e>=0}bc.displayName=vc;var _c=xc,Sc=bc;function Cc({className:t,value:s,...r}){return e.jsx(_c,{"data-slot":"progress",className:ur("bg-primary/20 relative h-2 w-full overflow-hidden rounded-full",t),...r,children:e.jsx(Sc,{"data-slot":"progress-indicator",className:"bg-primary h-full w-full flex-1 transition-all",style:{transform:`translateX(-${100-(s||0)}%)`}})})}const Ec=vs("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function Pc({className:s,variant:r,asChild:a=!1,...n}){const i=a?t:"span";return e.jsx(i,{"data-slot":"badge",className:ur(Ec({variant:r}),s),...n})}function Tc(){const{properties:t,bookings:s,analytics:r,getAnalytics:a}=Pl(),n=Yt();Le.useEffect(()=>{a()},[]);const i=t.reduce((e,t)=>e+(t.total_revenue||0),0),o=t.reduce((e,t)=>e+(t.booking_count||0),0),l=t.length>0?t.reduce((e,t)=>e+(t.rating||0),0)/t.length:0,c=(()=>{if(0===t.length)return 0;const e=new Date((new Date).getTime()-2592e6),r=s.filter(t=>new Date(t.created_at)>=e&&"confirmed"===t.status);if(0===r.length)return 0;const a=r.reduce((e,t)=>e+t.nights,0),n=30*t.length;return n>0?Math.round(a/n*100):0})(),d=[{title:"Total Properties",value:t.length.toString(),change:t.length>0?`${t.length} active`:"No properties yet",icon:$,color:"text-krib-lime"},{title:"Total Revenue",value:`$${i.toLocaleString()}`,change:i>0?"From confirmed bookings":"No revenue yet",icon:M,color:"text-green-600"},{title:"Total Bookings",value:o.toString(),change:o>0?`${o} confirmed`:"No bookings yet",icon:U,color:"text-purple-600"},{title:"Occupancy Rate",value:`${c}%`,change:c>0?"Last 30 days":"No bookings to calculate",icon:F,color:"text-orange-600"}],u=s.sort((e,t)=>new Date(t.created_at).getTime()-new Date(e.created_at).getTime()).slice(0,3),h=t.sort((e,t)=>(t.total_revenue||0)-(e.total_revenue||0)).slice(0,3);return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Dashboard Overview"}),e.jsx("p",{className:"text-muted-foreground",children:"Welcome back! Here's what's happening with your rental properties."})]}),e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:d.map(t=>e.jsxs(Al,{className:"krib-card krib-glow-hover",children:[e.jsxs(Rl,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(Ol,{className:"text-sm",children:t.title}),e.jsx(t.icon,{className:`h-4 w-4 ${t.color}`})]}),e.jsxs($l,{children:[e.jsx("div",{className:"text-2xl font-bold",children:t.value}),e.jsx("p",{className:"text-xs text-muted-foreground",children:t.change})]})]},t.title))}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsxs(Al,{className:"krib-card",children:[e.jsxs(Rl,{children:[e.jsx(Ol,{children:"Recent Bookings"}),e.jsx(Il,{children:"Latest reservations for your properties"})]}),e.jsx($l,{children:e.jsx("div",{className:"space-y-4",children:u.length>0?u.map(t=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"font-medium",children:t.property_title||"Property"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[t.guest_name,"  ",new Date(t.check_in).toLocaleDateString()," - ",new Date(t.check_out).toLocaleDateString()]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"font-medium",children:["$",t.total_amount]}),e.jsx(Pc,{variant:"confirmed"===t.status?"default":"secondary",children:t.status})]})]},t.id)):e.jsx("p",{className:"text-muted-foreground text-center py-4",children:"No bookings yet"})})})]}),e.jsxs(Al,{className:"krib-card",children:[e.jsxs(Rl,{children:[e.jsx(Ol,{children:"Top Performing Properties"}),e.jsx(Il,{children:"Your best properties by revenue"})]}),e.jsx($l,{children:e.jsx("div",{className:"space-y-4",children:h.length>0?h.map(t=>{const s=t.booking_count>0?Math.min(Math.round(t.booking_count/30*100),100):0;return e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:t.title}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsxs("span",{children:[t.booking_count||0," bookings"]}),e.jsx("span",{children:""}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(q,{className:"h-3 w-3 fill-current text-yellow-500"}),e.jsx("span",{children:t.rating||0})]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"font-medium",children:["$",t.total_revenue||0]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[s,"% occupied"]})]})]}),e.jsx(Cc,{value:s,className:"h-2"})]},t.id)}):e.jsx("p",{className:"text-muted-foreground text-center py-4",children:"No properties yet"})})})]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs(Al,{className:"krib-card",children:[e.jsxs(Rl,{children:[e.jsx(Ol,{children:"Quick Actions"}),e.jsx(Il,{children:"Common tasks to manage your properties"})]}),e.jsxs($l,{className:"space-y-3",children:[e.jsx(mr,{className:"w-full justify-start h-auto p-4 text-left krib-button-primary group",onClick:()=>n("/add-property"),children:e.jsxs("div",{className:"flex items-center w-full",children:[e.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-lg bg-krib-black/10 mr-3 group-hover:bg-krib-black/20 transition-colors",children:e.jsx(D,{className:"h-5 w-5 text-krib-black"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"font-semibold",children:"Add New Property"}),e.jsx("div",{className:"text-sm opacity-80",children:"List a new rental property"})]})]})}),e.jsx(mr,{variant:"outline",className:"w-full justify-start h-auto p-4 text-left hover:bg-krib-lime-soft border-krib-lime/20 group",onClick:()=>n("/analytics"),children:e.jsxs("div",{className:"flex items-center w-full",children:[e.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-lg bg-krib-lime/10 mr-3 group-hover:bg-krib-lime/20 transition-colors",children:e.jsx(L,{className:"h-5 w-5 text-krib-lime"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"font-semibold",children:"View Analytics"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Performance insights"})]})]})}),e.jsx(mr,{variant:"ghost",className:"w-full justify-start h-auto p-4 text-left hover:bg-krib-lime-soft group",onClick:()=>n("/bookings"),children:e.jsxs("div",{className:"flex items-center w-full",children:[e.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-lg bg-krib-lime/5 mr-3 group-hover:bg-krib-lime/10 transition-colors",children:e.jsx(W,{className:"h-5 w-5 text-krib-lime"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"font-semibold",children:"Manage Bookings"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Reservations & guests"})]})]})}),e.jsx(mr,{variant:"ghost",className:"w-full justify-start h-auto p-4 text-left hover:bg-krib-lime-soft group",onClick:()=>n("/financials"),children:e.jsxs("div",{className:"flex items-center w-full",children:[e.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-lg bg-krib-lime-light/5 mr-3 group-hover:bg-krib-lime-light/10 transition-colors",children:e.jsx(H,{className:"h-5 w-5 text-krib-lime-light"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"font-semibold",children:"Financial Dashboard"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Earnings & payouts"})]})]})}),e.jsx(mr,{variant:"ghost",className:"w-full justify-start h-auto p-4 text-left hover:bg-krib-lime-soft group",onClick:()=>n("/settings"),children:e.jsxs("div",{className:"flex items-center w-full",children:[e.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-lg bg-krib-black/5 mr-3 group-hover:bg-krib-black/10 transition-colors",children:e.jsx(B,{className:"h-5 w-5 text-krib-black"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"font-semibold",children:"Settings"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Account preferences"})]})]})})]})]}),e.jsxs(Al,{className:"krib-card",children:[e.jsxs(Rl,{children:[e.jsx(Ol,{children:"Property Performance"}),e.jsx(Il,{children:"Overall portfolio metrics"})]}),e.jsxs($l,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{children:"Portfolio Occupancy"}),e.jsxs("span",{children:[c,"%"]})]}),e.jsx(Cc,{value:c})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{children:"Active Properties"}),e.jsx("span",{children:t.filter(e=>"active"===e.status).length})]}),e.jsx(Cc,{value:t.length>0?t.filter(e=>"active"===e.status).length/t.length*100:0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{children:"Average Rating"}),e.jsxs("span",{children:[l.toFixed(1),"/5.0"]})]}),e.jsx(Cc,{value:l/5*100})]})]})]})]})]})}function Ac(e,[t,s]){return Math.min(s,Math.max(t,e))}function Rc(e){const t=Le.useRef({value:e,previous:e});return Le.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var Oc=[" ","Enter","ArrowUp","ArrowDown"],Ic=[" ","Enter"],$c="Select",[Dc,Lc,Uc]=G($c),[Mc,Bc]=u($c,[Uc,h]),zc=h(),[Fc,qc]=Mc($c),[Wc,Hc]=Mc($c),Gc=t=>{const{__scopeSelect:s,children:r,open:a,defaultOpen:n,onOpenChange:i,value:o,defaultValue:l,onValueChange:c,dir:d,name:u,autoComplete:h,disabled:g,required:x,form:v}=t,b=zc(s),[y,w]=Le.useState(null),[j,N]=Le.useState(null),[k,S]=Le.useState(!1),C=_(d),[E,P]=p({prop:a,defaultProp:n??!1,onChange:i,caller:$c}),[T,A]=p({prop:o,defaultProp:l,onChange:c,caller:$c}),R=Le.useRef(null),O=!y||(v||!!y.closest("form")),[I,$]=Le.useState(new Set),D=Array.from(I).map(e=>e.props.value).join(";");return e.jsx(f,{...b,children:e.jsxs(Fc,{required:x,scope:s,trigger:y,onTriggerChange:w,valueNode:j,onValueNodeChange:N,valueNodeHasChildren:k,onValueNodeHasChildrenChange:S,contentId:m(),value:T,onValueChange:A,open:E,onOpenChange:P,dir:C,triggerPointerDownPosRef:R,disabled:g,children:[e.jsx(Dc.Provider,{scope:s,children:e.jsx(Wc,{scope:t.__scopeSelect,onNativeOptionAdd:Le.useCallback(e=>{$(t=>new Set(t).add(e))},[]),onNativeOptionRemove:Le.useCallback(e=>{$(t=>{const s=new Set(t);return s.delete(e),s})},[]),children:r})}),O?e.jsxs(Td,{"aria-hidden":!0,required:x,tabIndex:-1,name:u,autoComplete:h,value:T,onChange:e=>A(e.target.value),disabled:g,form:v,children:[void 0===T?e.jsx("option",{value:""}):null,Array.from(I)]},D):null]})})};Gc.displayName=$c;var Kc="SelectTrigger",Vc=Le.forwardRef((t,r)=>{const{__scopeSelect:a,disabled:n=!1,...i}=t,o=zc(a),l=qc(Kc,a),c=l.disabled||n,d=g(r,l.onTriggerChange),u=Lc(a),h=Le.useRef("touch"),[m,p,f]=Rd(e=>{const t=u().filter(e=>!e.disabled),s=t.find(e=>e.value===l.value),r=Od(t,e,s);void 0!==r&&l.onValueChange(r.value)}),b=e=>{c||(l.onOpenChange(!0),f()),e&&(l.triggerPointerDownPosRef.current={x:Math.round(e.pageX),y:Math.round(e.pageY)})};return e.jsx(x,{asChild:!0,...o,children:e.jsx(s.button,{type:"button",role:"combobox","aria-controls":l.contentId,"aria-expanded":l.open,"aria-required":l.required,"aria-autocomplete":"none",dir:l.dir,"data-state":l.open?"open":"closed",disabled:c,"data-disabled":c?"":void 0,"data-placeholder":Ad(l.value)?"":void 0,...i,ref:d,onClick:v(i.onClick,e=>{e.currentTarget.focus(),"mouse"!==h.current&&b(e)}),onPointerDown:v(i.onPointerDown,e=>{h.current=e.pointerType;const t=e.target;t.hasPointerCapture(e.pointerId)&&t.releasePointerCapture(e.pointerId),0===e.button&&!1===e.ctrlKey&&"mouse"===e.pointerType&&(b(e),e.preventDefault())}),onKeyDown:v(i.onKeyDown,e=>{const t=""!==m.current;e.ctrlKey||e.altKey||e.metaKey||1!==e.key.length||p(e.key),t&&" "===e.key||Oc.includes(e.key)&&(b(),e.preventDefault())})})})});Vc.displayName=Kc;var Jc="SelectValue",Yc=Le.forwardRef((t,r)=>{const{__scopeSelect:a,className:n,style:i,children:o,placeholder:l="",...c}=t,d=qc(Jc,a),{onValueNodeHasChildrenChange:u}=d,h=void 0!==o,m=g(r,d.onValueNodeChange);return K(()=>{u(h)},[u,h]),e.jsx(s.span,{...c,ref:m,style:{pointerEvents:"none"},children:Ad(d.value)?e.jsx(e.Fragment,{children:l}):o})});Yc.displayName=Jc;var Xc=Le.forwardRef((t,r)=>{const{__scopeSelect:a,children:n,...i}=t;return e.jsx(s.span,{"aria-hidden":!0,...i,ref:r,children:n||""})});Xc.displayName="SelectIcon";var Qc=t=>e.jsx(y,{asChild:!0,...t});Qc.displayName="SelectPortal";var Zc="SelectContent",ed=Le.forwardRef((t,s)=>{const r=qc(Zc,t.__scopeSelect),[a,n]=Le.useState();if(K(()=>{n(new DocumentFragment)},[]),!r.open){const s=a;return s?De.createPortal(e.jsx(sd,{scope:t.__scopeSelect,children:e.jsx(Dc.Slot,{scope:t.__scopeSelect,children:e.jsx("div",{children:t.children})})}),s):null}return e.jsx(nd,{...t,ref:s})});ed.displayName=Zc;var td=10,[sd,rd]=Mc(Zc),ad=Q("SelectContent.RemoveScroll"),nd=Le.forwardRef((t,s)=>{const{__scopeSelect:r,position:a="item-aligned",onCloseAutoFocus:n,onEscapeKeyDown:i,onPointerDownOutside:o,side:l,sideOffset:c,align:d,alignOffset:u,arrowPadding:h,collisionBoundary:m,collisionPadding:p,sticky:f,hideWhenDetached:x,avoidCollisions:b,...y}=t,w=qc(Zc,r),[N,k]=Le.useState(null),[_,S]=Le.useState(null),C=g(s,e=>k(e)),[E,P]=Le.useState(null),[T,A]=Le.useState(null),R=Lc(r),[O,I]=Le.useState(!1),$=Le.useRef(!1);Le.useEffect(()=>{if(N)return J(N)},[N]),Y();const D=Le.useCallback(e=>{const[t,...s]=R().map(e=>e.ref.current),[r]=s.slice(-1),a=document.activeElement;for(const n of e){if(n===a)return;if(null==n||n.scrollIntoView({block:"nearest"}),n===t&&_&&(_.scrollTop=0),n===r&&_&&(_.scrollTop=_.scrollHeight),null==n||n.focus(),document.activeElement!==a)return}},[R,_]),L=Le.useCallback(()=>D([E,N]),[D,E,N]);Le.useEffect(()=>{O&&L()},[O,L]);const{onOpenChange:U,triggerPointerDownPosRef:M}=w;Le.useEffect(()=>{if(N){let e={x:0,y:0};const t=t=>{var s,r;e={x:Math.abs(Math.round(t.pageX)-((null==(s=M.current)?void 0:s.x)??0)),y:Math.abs(Math.round(t.pageY)-((null==(r=M.current)?void 0:r.y)??0))}},s=s=>{e.x<=10&&e.y<=10?s.preventDefault():N.contains(s.target)||U(!1),document.removeEventListener("pointermove",t),M.current=null};return null!==M.current&&(document.addEventListener("pointermove",t),document.addEventListener("pointerup",s,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",t),document.removeEventListener("pointerup",s,{capture:!0})}}},[N,U,M]),Le.useEffect(()=>{const e=()=>U(!1);return window.addEventListener("blur",e),window.addEventListener("resize",e),()=>{window.removeEventListener("blur",e),window.removeEventListener("resize",e)}},[U]);const[B,z]=Rd(e=>{const t=R().filter(e=>!e.disabled),s=t.find(e=>e.ref.current===document.activeElement),r=Od(t,e,s);r&&setTimeout(()=>r.ref.current.focus())}),F=Le.useCallback((e,t,s)=>{const r=!$.current&&!s;(void 0!==w.value&&w.value===t||r)&&(P(e),r&&($.current=!0))},[w.value]),q=Le.useCallback(()=>null==N?void 0:N.focus(),[N]),W=Le.useCallback((e,t,s)=>{const r=!$.current&&!s;(void 0!==w.value&&w.value===t||r)&&A(e)},[w.value]),H="popper"===a?od:id,G=H===od?{side:l,sideOffset:c,align:d,alignOffset:u,arrowPadding:h,collisionBoundary:m,collisionPadding:p,sticky:f,hideWhenDetached:x,avoidCollisions:b}:{};return e.jsx(sd,{scope:r,content:N,viewport:_,onViewportChange:S,itemRefCallback:F,selectedItem:E,onItemLeave:q,itemTextRefCallback:W,focusSelectedItem:L,selectedItemText:T,position:a,isPositioned:O,searchRef:B,children:e.jsx(X,{as:ad,allowPinchZoom:!0,children:e.jsx(Z,{asChild:!0,trapped:w.open,onMountAutoFocus:e=>{e.preventDefault()},onUnmountAutoFocus:v(n,e=>{var t;null==(t=w.trigger)||t.focus({preventScroll:!0}),e.preventDefault()}),children:e.jsx(j,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:e=>e.preventDefault(),onDismiss:()=>w.onOpenChange(!1),children:e.jsx(H,{role:"listbox",id:w.contentId,"data-state":w.open?"open":"closed",dir:w.dir,onContextMenu:e=>e.preventDefault(),...y,...G,onPlaced:()=>I(!0),ref:C,style:{display:"flex",flexDirection:"column",outline:"none",...y.style},onKeyDown:v(y.onKeyDown,e=>{const t=e.ctrlKey||e.altKey||e.metaKey;if("Tab"===e.key&&e.preventDefault(),t||1!==e.key.length||z(e.key),["ArrowUp","ArrowDown","Home","End"].includes(e.key)){let t=R().filter(e=>!e.disabled).map(e=>e.ref.current);if(["ArrowUp","End"].includes(e.key)&&(t=t.slice().reverse()),["ArrowUp","ArrowDown"].includes(e.key)){const s=e.target,r=t.indexOf(s);t=t.slice(r+1)}setTimeout(()=>D(t)),e.preventDefault()}})})})})})})});nd.displayName="SelectContentImpl";var id=Le.forwardRef((t,r)=>{const{__scopeSelect:a,onPlaced:n,...i}=t,o=qc(Zc,a),l=rd(Zc,a),[c,d]=Le.useState(null),[u,h]=Le.useState(null),m=g(r,e=>h(e)),p=Lc(a),f=Le.useRef(!1),x=Le.useRef(!0),{viewport:v,selectedItem:b,selectedItemText:y,focusSelectedItem:w}=l,j=Le.useCallback(()=>{if(o.trigger&&o.valueNode&&c&&u&&v&&b&&y){const e=o.trigger.getBoundingClientRect(),t=u.getBoundingClientRect(),s=o.valueNode.getBoundingClientRect(),r=y.getBoundingClientRect();if("rtl"!==o.dir){const a=r.left-t.left,n=s.left-a,i=e.left-n,o=e.width+i,l=Math.max(o,t.width),d=window.innerWidth-td,u=Ac(n,[td,Math.max(td,d-l)]);c.style.minWidth=o+"px",c.style.left=u+"px"}else{const a=t.right-r.right,n=window.innerWidth-s.right-a,i=window.innerWidth-e.right-n,o=e.width+i,l=Math.max(o,t.width),d=window.innerWidth-td,u=Ac(n,[td,Math.max(td,d-l)]);c.style.minWidth=o+"px",c.style.right=u+"px"}const a=p(),i=window.innerHeight-2*td,l=v.scrollHeight,d=window.getComputedStyle(u),h=parseInt(d.borderTopWidth,10),m=parseInt(d.paddingTop,10),g=parseInt(d.borderBottomWidth,10),x=h+m+l+parseInt(d.paddingBottom,10)+g,w=Math.min(5*b.offsetHeight,x),j=window.getComputedStyle(v),N=parseInt(j.paddingTop,10),k=parseInt(j.paddingBottom,10),_=e.top+e.height/2-td,S=i-_,C=b.offsetHeight/2,E=h+m+(b.offsetTop+C),P=x-E;if(E<=_){const e=a.length>0&&b===a[a.length-1].ref.current;c.style.bottom="0px";const t=u.clientHeight-v.offsetTop-v.offsetHeight,s=E+Math.max(S,C+(e?k:0)+t+g);c.style.height=s+"px"}else{const e=a.length>0&&b===a[0].ref.current;c.style.top="0px";const t=Math.max(_,h+v.offsetTop+(e?N:0)+C)+P;c.style.height=t+"px",v.scrollTop=E-_+v.offsetTop}c.style.margin=`${td}px 0`,c.style.minHeight=w+"px",c.style.maxHeight=i+"px",null==n||n(),requestAnimationFrame(()=>f.current=!0)}},[p,o.trigger,o.valueNode,c,u,v,b,y,o.dir,n]);K(()=>j(),[j]);const[N,k]=Le.useState();K(()=>{u&&k(window.getComputedStyle(u).zIndex)},[u]);const _=Le.useCallback(e=>{e&&!0===x.current&&(j(),null==w||w(),x.current=!1)},[j,w]);return e.jsx(ld,{scope:a,contentWrapper:c,shouldExpandOnScrollRef:f,onScrollButtonChange:_,children:e.jsx("div",{ref:d,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:N},children:e.jsx(s.div,{...i,ref:m,style:{boxSizing:"border-box",maxHeight:"100%",...i.style}})})})});id.displayName="SelectItemAlignedPosition";var od=Le.forwardRef((t,s)=>{const{__scopeSelect:r,align:a="start",collisionPadding:n=td,...i}=t,o=zc(r);return e.jsx(N,{...o,...i,ref:s,align:a,collisionPadding:n,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});od.displayName="SelectPopperPosition";var[ld,cd]=Mc(Zc,{}),dd="SelectViewport",ud=Le.forwardRef((t,r)=>{const{__scopeSelect:a,nonce:n,...i}=t,o=rd(dd,a),l=cd(dd,a),c=g(r,o.onViewportChange),d=Le.useRef(0);return e.jsxs(e.Fragment,{children:[e.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:n}),e.jsx(Dc.Slot,{scope:a,children:e.jsx(s.div,{"data-radix-select-viewport":"",role:"presentation",...i,ref:c,style:{position:"relative",flex:1,overflow:"hidden auto",...i.style},onScroll:v(i.onScroll,e=>{const t=e.currentTarget,{contentWrapper:s,shouldExpandOnScrollRef:r}=l;if((null==r?void 0:r.current)&&s){const e=Math.abs(d.current-t.scrollTop);if(e>0){const r=window.innerHeight-2*td,a=parseFloat(s.style.minHeight),n=parseFloat(s.style.height),i=Math.max(a,n);if(i<r){const a=i+e,n=Math.min(r,a),o=a-n;s.style.height=n+"px","0px"===s.style.bottom&&(t.scrollTop=o>0?o:0,s.style.justifyContent="flex-end")}}}d.current=t.scrollTop})})})]})});ud.displayName=dd;var hd="SelectGroup",[md,pd]=Mc(hd);Le.forwardRef((t,r)=>{const{__scopeSelect:a,...n}=t,i=m();return e.jsx(md,{scope:a,id:i,children:e.jsx(s.div,{role:"group","aria-labelledby":i,...n,ref:r})})}).displayName=hd;var fd="SelectLabel";Le.forwardRef((t,r)=>{const{__scopeSelect:a,...n}=t,i=pd(fd,a);return e.jsx(s.div,{id:i.id,...n,ref:r})}).displayName=fd;var gd="SelectItem",[xd,vd]=Mc(gd),bd=Le.forwardRef((t,r)=>{const{__scopeSelect:a,value:n,disabled:i=!1,textValue:o,...l}=t,c=qc(gd,a),d=rd(gd,a),u=c.value===n,[h,p]=Le.useState(o??""),[f,x]=Le.useState(!1),b=g(r,e=>{var t;return null==(t=d.itemRefCallback)?void 0:t.call(d,e,n,i)}),y=m(),w=Le.useRef("touch"),j=()=>{i||(c.onValueChange(n),c.onOpenChange(!1))};if(""===n)throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return e.jsx(xd,{scope:a,value:n,disabled:i,textId:y,isSelected:u,onItemTextChange:Le.useCallback(e=>{p(t=>t||((null==e?void 0:e.textContent)??"").trim())},[]),children:e.jsx(Dc.ItemSlot,{scope:a,value:n,disabled:i,textValue:h,children:e.jsx(s.div,{role:"option","aria-labelledby":y,"data-highlighted":f?"":void 0,"aria-selected":u&&f,"data-state":u?"checked":"unchecked","aria-disabled":i||void 0,"data-disabled":i?"":void 0,tabIndex:i?void 0:-1,...l,ref:b,onFocus:v(l.onFocus,()=>x(!0)),onBlur:v(l.onBlur,()=>x(!1)),onClick:v(l.onClick,()=>{"mouse"!==w.current&&j()}),onPointerUp:v(l.onPointerUp,()=>{"mouse"===w.current&&j()}),onPointerDown:v(l.onPointerDown,e=>{w.current=e.pointerType}),onPointerMove:v(l.onPointerMove,e=>{var t;w.current=e.pointerType,i?null==(t=d.onItemLeave)||t.call(d):"mouse"===w.current&&e.currentTarget.focus({preventScroll:!0})}),onPointerLeave:v(l.onPointerLeave,e=>{var t;e.currentTarget===document.activeElement&&(null==(t=d.onItemLeave)||t.call(d))}),onKeyDown:v(l.onKeyDown,e=>{var t;""!==(null==(t=d.searchRef)?void 0:t.current)&&" "===e.key||(Ic.includes(e.key)&&j()," "===e.key&&e.preventDefault())})})})})});bd.displayName=gd;var yd="SelectItemText",wd=Le.forwardRef((t,r)=>{const{__scopeSelect:a,className:n,style:i,...o}=t,l=qc(yd,a),c=rd(yd,a),d=vd(yd,a),u=Hc(yd,a),[h,m]=Le.useState(null),p=g(r,e=>m(e),d.onItemTextChange,e=>{var t;return null==(t=c.itemTextRefCallback)?void 0:t.call(c,e,d.value,d.disabled)}),f=null==h?void 0:h.textContent,x=Le.useMemo(()=>e.jsx("option",{value:d.value,disabled:d.disabled,children:f},d.value),[d.disabled,d.value,f]),{onNativeOptionAdd:v,onNativeOptionRemove:b}=u;return K(()=>(v(x),()=>b(x)),[v,b,x]),e.jsxs(e.Fragment,{children:[e.jsx(s.span,{id:d.textId,...o,ref:p}),d.isSelected&&l.valueNode&&!l.valueNodeHasChildren?De.createPortal(o.children,l.valueNode):null]})});wd.displayName=yd;var jd="SelectItemIndicator",Nd=Le.forwardRef((t,r)=>{const{__scopeSelect:a,...n}=t;return vd(jd,a).isSelected?e.jsx(s.span,{"aria-hidden":!0,...n,ref:r}):null});Nd.displayName=jd;var kd="SelectScrollUpButton",_d=Le.forwardRef((t,s)=>{const r=rd(kd,t.__scopeSelect),a=cd(kd,t.__scopeSelect),[n,i]=Le.useState(!1),o=g(s,a.onScrollButtonChange);return K(()=>{if(r.viewport&&r.isPositioned){let e=function(){const e=t.scrollTop>0;i(e)};const t=r.viewport;return e(),t.addEventListener("scroll",e),()=>t.removeEventListener("scroll",e)}},[r.viewport,r.isPositioned]),n?e.jsx(Ed,{...t,ref:o,onAutoScroll:()=>{const{viewport:e,selectedItem:t}=r;e&&t&&(e.scrollTop=e.scrollTop-t.offsetHeight)}}):null});_d.displayName=kd;var Sd="SelectScrollDownButton",Cd=Le.forwardRef((t,s)=>{const r=rd(Sd,t.__scopeSelect),a=cd(Sd,t.__scopeSelect),[n,i]=Le.useState(!1),o=g(s,a.onScrollButtonChange);return K(()=>{if(r.viewport&&r.isPositioned){let e=function(){const e=t.scrollHeight-t.clientHeight,s=Math.ceil(t.scrollTop)<e;i(s)};const t=r.viewport;return e(),t.addEventListener("scroll",e),()=>t.removeEventListener("scroll",e)}},[r.viewport,r.isPositioned]),n?e.jsx(Ed,{...t,ref:o,onAutoScroll:()=>{const{viewport:e,selectedItem:t}=r;e&&t&&(e.scrollTop=e.scrollTop+t.offsetHeight)}}):null});Cd.displayName=Sd;var Ed=Le.forwardRef((t,r)=>{const{__scopeSelect:a,onAutoScroll:n,...i}=t,o=rd("SelectScrollButton",a),l=Le.useRef(null),c=Lc(a),d=Le.useCallback(()=>{null!==l.current&&(window.clearInterval(l.current),l.current=null)},[]);return Le.useEffect(()=>()=>d(),[d]),K(()=>{var e;const t=c().find(e=>e.ref.current===document.activeElement);null==(e=null==t?void 0:t.ref.current)||e.scrollIntoView({block:"nearest"})},[c]),e.jsx(s.div,{"aria-hidden":!0,...i,ref:r,style:{flexShrink:0,...i.style},onPointerDown:v(i.onPointerDown,()=>{null===l.current&&(l.current=window.setInterval(n,50))}),onPointerMove:v(i.onPointerMove,()=>{var e;null==(e=o.onItemLeave)||e.call(o),null===l.current&&(l.current=window.setInterval(n,50))}),onPointerLeave:v(i.onPointerLeave,()=>{d()})})});Le.forwardRef((t,r)=>{const{__scopeSelect:a,...n}=t;return e.jsx(s.div,{"aria-hidden":!0,...n,ref:r})}).displayName="SelectSeparator";var Pd="SelectArrow";Le.forwardRef((t,s)=>{const{__scopeSelect:r,...a}=t,n=zc(r),i=qc(Pd,r),o=rd(Pd,r);return i.open&&"popper"===o.position?e.jsx(w,{...n,...a,ref:s}):null}).displayName=Pd;var Td=Le.forwardRef(({__scopeSelect:t,value:r,...a},n)=>{const i=Le.useRef(null),o=g(n,i),l=Rc(r);return Le.useEffect(()=>{const e=i.current;if(!e)return;const t=window.HTMLSelectElement.prototype,s=Object.getOwnPropertyDescriptor(t,"value").set;if(l!==r&&s){const t=new Event("change",{bubbles:!0});s.call(e,r),e.dispatchEvent(t)}},[l,r]),e.jsx(s.select,{...a,style:{...Cr,...a.style},ref:o,defaultValue:r})});function Ad(e){return""===e||void 0===e}function Rd(e){const t=V(e),s=Le.useRef(""),r=Le.useRef(0),a=Le.useCallback(e=>{const a=s.current+e;t(a),function e(t){s.current=t,window.clearTimeout(r.current),""!==t&&(r.current=window.setTimeout(()=>e(""),1e3))}(a)},[t]),n=Le.useCallback(()=>{s.current="",window.clearTimeout(r.current)},[]);return Le.useEffect(()=>()=>window.clearTimeout(r.current),[]),[s,a,n]}function Od(e,t,s){const r=t.length>1&&Array.from(t).every(e=>e===t[0])?t[0]:t,a=s?e.indexOf(s):-1;let n=(i=e,o=Math.max(a,0),i.map((e,t)=>i[(o+t)%i.length]));var i,o;1===r.length&&(n=n.filter(e=>e!==s));const l=n.find(e=>e.textValue.toLowerCase().startsWith(r.toLowerCase()));return l!==s?l:void 0}Td.displayName="SelectBubbleInput";var Id=Gc,$d=Vc,Dd=Yc,Ld=Xc,Ud=Qc,Md=ed,Bd=ud,zd=bd,Fd=wd,qd=Nd,Wd=_d,Hd=Cd;function Gd({...t}){return e.jsx(Id,{"data-slot":"select",...t})}function Kd({...t}){return e.jsx(Dd,{"data-slot":"select-value",...t})}function Vd({className:t,size:s="default",children:r,...a}){return e.jsxs($d,{"data-slot":"select-trigger","data-size":s,className:ur("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-full items-center justify-between gap-2 rounded-md border bg-input-background px-3 py-2 text-sm whitespace-nowrap transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...a,children:[r,e.jsx(Ld,{asChild:!0,children:e.jsx(ee,{className:"size-4 opacity-50"})})]})}function Jd({className:t,children:s,position:r="popper",...a}){return e.jsx(Ud,{children:e.jsxs(Md,{"data-slot":"select-content",className:ur("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md","popper"===r&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:r,...a,children:[e.jsx(Xd,{}),e.jsx(Bd,{className:ur("p-1","popper"===r&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:s}),e.jsx(Qd,{})]})})}function Yd({className:t,children:s,...r}){return e.jsxs(zd,{"data-slot":"select-item",className:ur("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",t),...r,children:[e.jsx("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:e.jsx(qd,{children:e.jsx(te,{className:"size-4"})})}),e.jsx(Fd,{children:s})]})}function Xd({className:t,...s}){return e.jsx(Wd,{"data-slot":"select-scroll-up-button",className:ur("flex cursor-default items-center justify-center py-1",t),...s,children:e.jsx(se,{className:"size-4"})})}function Qd({className:t,...s}){return e.jsx(Hd,{"data-slot":"select-scroll-down-button",className:ur("flex cursor-default items-center justify-center py-1",t),...s,children:e.jsx(ee,{className:"size-4"})})}function Zd({...t}){return e.jsx(r,{"data-slot":"dialog",...t})}function eu({...t}){return e.jsx(re,{"data-slot":"dialog-trigger",...t})}function tu({...t}){return e.jsx(c,{"data-slot":"dialog-portal",...t})}function su({className:t,...s}){return e.jsx(d,{"data-slot":"dialog-overlay",className:ur("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",t),...s})}function ru({className:t,children:s,...r}){return e.jsxs(tu,{"data-slot":"dialog-portal",children:[e.jsx(su,{}),e.jsxs(a,{"data-slot":"dialog-content",className:ur("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",t),...r,children:[s,e.jsxs(n,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[e.jsx(i,{}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}function au({className:t,...s}){return e.jsx("div",{"data-slot":"dialog-header",className:ur("flex flex-col gap-2 text-center sm:text-left",t),...s})}function nu({className:t,...s}){return e.jsx(o,{"data-slot":"dialog-title",className:ur("text-lg leading-none font-semibold",t),...s})}function iu({className:t,...s}){return e.jsx(l,{"data-slot":"dialog-description",className:ur("text-muted-foreground text-sm",t),...s})}function ou({className:t,...s}){return e.jsx("textarea",{"data-slot":"textarea",className:ur("resize-none border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-input-background px-3 py-2 text-base transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),...s})}function lu(t){const[s,r]=Le.useState(!1),{src:a,alt:n,style:i,className:o,...l}=t;return s?e.jsx("div",{className:`inline-block bg-gray-100 text-center align-middle ${o??""}`,style:i,children:e.jsx("div",{className:"flex items-center justify-center w-full h-full",children:e.jsx("img",{src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODgiIGhlaWdodD0iODgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBvcGFjaXR5PSIuMyIgZmlsbD0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIzLjciPjxyZWN0IHg9IjE2IiB5PSIxNiIgd2lkdGg9IjU2IiBoZWlnaHQ9IjU2IiByeD0iNiIvPjxwYXRoIGQ9Im0xNiA1OCAxNi0xOCAzMiAzMiIvPjxjaXJjbGUgY3g9IjUzIiBjeT0iMzUiIHI9IjciLz48L3N2Zz4KCg==",alt:"Error loading image",...l,"data-original-url":a})})}):e.jsx("img",{src:a,alt:n,className:o,style:i,...l,onError:()=>{r(!0)}})}function cu(){const{properties:t,loadProperties:s,deleteProperty:r,updateProperty:a}=Pl(),[n,i]=Le.useState(""),[o,l]=Le.useState("all"),[c,d]=Le.useState(null),[u,h]=Le.useState(!1),[m,p]=Le.useState(!1),[f,g]=Le.useState({});Le.useEffect(()=>{s()},[]);const x=t.filter(e=>{const t=e.title.toLowerCase().includes(n.toLowerCase())||e.city.toLowerCase().includes(n.toLowerCase())||e.state.toLowerCase().includes(n.toLowerCase()),s="all"===o||e.status===o;return t&&s}),v=e=>{switch(e){case"active":return"bg-green-100 text-green-800";case"inactive":default:return"bg-gray-100 text-gray-800";case"draft":return"bg-yellow-100 text-yellow-800";case"suspended":return"bg-red-100 text-red-800"}};return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{children:"Properties"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage your rental properties and track their performance."})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"relative flex-1 max-w-sm",children:[e.jsx(ae,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(pr,{placeholder:"Search properties...",value:n,onChange:e=>i(e.target.value),className:"pl-10"})]}),e.jsxs(Gd,{value:o,onValueChange:l,children:[e.jsxs(Vd,{className:"w-[180px]",children:[e.jsx(ne,{className:"h-4 w-4 mr-2"}),e.jsx(Kd,{placeholder:"Filter by status"})]}),e.jsxs(Jd,{children:[e.jsx(Yd,{value:"all",children:"All Status"}),e.jsx(Yd,{value:"active",children:"Active"}),e.jsx(Yd,{value:"draft",children:"Draft"}),e.jsx(Yd,{value:"inactive",children:"Inactive"}),e.jsx(Yd,{value:"suspended",children:"Suspended"})]})]})]}),e.jsx("div",{className:"space-y-4",children:x.map(t=>e.jsx(Al,{className:"p-6 krib-card krib-glow-hover",children:e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsxs("div",{className:"w-32 h-24 relative flex-shrink-0",children:[e.jsx(lu,{src:t.images&&t.images.length>0&&!t.images[0].startsWith("blob:")?t.images[0]:"/placeholder-property.jpg",alt:t.title,className:"object-cover w-full h-full rounded-lg"}),t.images&&t.images[0]&&t.images[0].startsWith("blob:")&&e.jsx("div",{className:"absolute bottom-1 left-1 bg-yellow-100 text-yellow-800 text-xs px-1 py-0.5 rounded text-[10px]",children:"Image Issue"})]}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("h3",{className:"font-semibold text-lg truncate",children:t.title}),e.jsx(Pc,{className:v(t.status),children:t.status.charAt(0).toUpperCase()+t.status.slice(1)})]}),e.jsxs("div",{className:"flex items-center text-muted-foreground mb-2",children:[e.jsx(ie,{className:"h-4 w-4 mr-1"}),e.jsxs("span",{className:"text-sm",children:[t.city,", ",t.state]})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground mb-2",children:[e.jsxs("span",{children:[t.bedrooms," bed"]}),e.jsxs("span",{children:[t.bathrooms," bath"]}),e.jsxs("span",{children:[t.max_guests," guests"]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-baseline",children:[e.jsxs("span",{className:"font-bold text-lg text-green-600",children:["$",t.price_per_night]}),e.jsx("span",{className:"text-muted-foreground text-sm ml-1",children:"/night"})]}),t.rating&&e.jsxs("div",{className:"flex items-center",children:[e.jsx(q,{className:"h-4 w-4 fill-yellow-400 text-yellow-400"}),e.jsx("span",{className:"ml-1 text-sm font-medium",children:t.rating})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[e.jsxs(mr,{variant:"outline",size:"sm",onClick:()=>(e=>{d(e),h(!0)})(t),className:"h-8",children:[e.jsx(R,{className:"h-4 w-4 mr-1"}),"View"]}),e.jsxs(mr,{variant:"outline",size:"sm",onClick:()=>(e=>{d(e),g({title:e.title,description:e.description,price_per_night:e.price_per_night,bedrooms:e.bedrooms,bathrooms:e.bathrooms,max_guests:e.max_guests,status:e.status}),p(!0)})(t),className:"h-8",children:[e.jsx(oe,{className:"h-4 w-4 mr-1"}),"Edit"]}),e.jsxs(mr,{variant:"outline",size:"sm",onClick:()=>(async e=>{if(confirm("Are you sure you want to delete this property?"))try{await r(e)}catch(t){console.error("Failed to delete property:",t)}})(t.id),className:"h-8 text-red-600 hover:text-red-700 hover:bg-red-50",children:[e.jsx(le,{className:"h-4 w-4 mr-1"}),"Delete"]})]})]})})]})},t.id))}),0===x.length&&e.jsx(Al,{className:"p-12 krib-card",children:e.jsxs("div",{className:"text-center",children:[e.jsx($,{className:"h-16 w-16 mx-auto text-muted-foreground mb-6"}),e.jsx("h3",{className:"text-xl font-semibold mb-3",children:"No properties found"}),e.jsx("p",{className:"text-muted-foreground mb-6 max-w-md mx-auto",children:0===t.length?"You haven't created any properties yet. Get started by adding your first property to begin managing your rentals!":"Try adjusting your search terms or filter criteria to find the properties you're looking for."}),0===t.length&&e.jsxs(mr,{size:"lg",className:"bg-primary hover:bg-primary/90",children:[e.jsx($,{className:"h-5 w-5 mr-2"}),"Add Your First Property"]})]})}),e.jsx(Zd,{open:u,onOpenChange:h,children:e.jsxs(ru,{className:"max-w-2xl bg-white border shadow-lg",children:[e.jsx(au,{className:"pb-4 border-b",children:e.jsx(nu,{className:"text-xl font-semibold text-gray-900",children:"Property Details"})}),c&&e.jsxs("div",{className:"space-y-6 p-6 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-white p-4 rounded-md border",children:[e.jsx(Ul,{className:"font-semibold text-gray-700",children:"Title"}),e.jsx("p",{className:"text-gray-900 mt-1",children:c.title})]}),e.jsxs("div",{className:"bg-white p-4 rounded-md border",children:[e.jsx(Ul,{className:"font-semibold text-gray-700",children:"Status"}),e.jsx("div",{className:"mt-1",children:e.jsx(Pc,{className:v(c.status),children:c.status.charAt(0).toUpperCase()+c.status.slice(1)})})]})]}),e.jsxs("div",{className:"bg-white p-4 rounded-md border",children:[e.jsx(Ul,{className:"font-semibold text-gray-700",children:"Description"}),e.jsx("p",{className:"text-gray-900 mt-2 leading-relaxed",children:c.description||"No description provided"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-white p-4 rounded-md border",children:[e.jsx(Ul,{className:"font-semibold text-gray-700",children:"Price per night"}),e.jsxs("p",{className:"text-green-600 font-bold text-lg mt-1",children:["$",c.price_per_night]})]}),e.jsxs("div",{className:"bg-white p-4 rounded-md border",children:[e.jsx(Ul,{className:"font-semibold text-gray-700",children:"Bedrooms"}),e.jsx("p",{className:"text-gray-900 font-medium mt-1",children:c.bedrooms})]}),e.jsxs("div",{className:"bg-white p-4 rounded-md border",children:[e.jsx(Ul,{className:"font-semibold text-gray-700",children:"Bathrooms"}),e.jsx("p",{className:"text-gray-900 font-medium mt-1",children:c.bathrooms})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-white p-4 rounded-md border",children:[e.jsx(Ul,{className:"font-semibold text-gray-700",children:"Max Guests"}),e.jsx("p",{className:"text-gray-900 font-medium mt-1",children:c.max_guests})]}),e.jsxs("div",{className:"bg-white p-4 rounded-md border",children:[e.jsx(Ul,{className:"font-semibold text-gray-700",children:"Location"}),e.jsxs("p",{className:"text-gray-900 font-medium mt-1",children:[c.city,", ",c.state]})]})]}),c.amenities&&c.amenities.length>0&&e.jsxs("div",{className:"bg-white p-4 rounded-md border",children:[e.jsx(Ul,{className:"font-semibold text-gray-700",children:"Amenities"}),e.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:c.amenities.map((t,s)=>e.jsx(Pc,{variant:"secondary",className:"bg-blue-100 text-blue-800 hover:bg-blue-200",children:t},s))})]})]})]})}),e.jsx(Zd,{open:m,onOpenChange:p,children:e.jsxs(ru,{className:"max-w-2xl bg-white border shadow-lg",children:[e.jsx(au,{className:"pb-4 border-b",children:e.jsx(nu,{className:"text-xl font-semibold text-gray-900",children:"Edit Property"})}),e.jsxs("div",{className:"space-y-4 p-6 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"bg-white p-4 rounded-md border",children:[e.jsx(Ul,{htmlFor:"edit-title",className:"font-semibold text-gray-700",children:"Title"}),e.jsx(pr,{id:"edit-title",value:f.title||"",onChange:e=>g(t=>({...t,title:e.target.value})),className:"mt-2 bg-white border-gray-300 focus:border-blue-500 focus:ring-blue-500"})]}),e.jsxs("div",{className:"bg-white p-4 rounded-md border",children:[e.jsx(Ul,{htmlFor:"edit-description",className:"font-semibold text-gray-700",children:"Description"}),e.jsx(ou,{id:"edit-description",value:f.description||"",onChange:e=>g(t=>({...t,description:e.target.value})),rows:3,className:"mt-2 bg-white border-gray-300 focus:border-blue-500 focus:ring-blue-500"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-white p-4 rounded-md border",children:[e.jsx(Ul,{htmlFor:"edit-price",className:"font-semibold text-gray-700",children:"Price per night ($)"}),e.jsx(pr,{id:"edit-price",type:"number",value:f.price_per_night||"",onChange:e=>g(t=>({...t,price_per_night:Number(e.target.value)})),className:"mt-2 bg-white border-gray-300 focus:border-blue-500 focus:ring-blue-500"})]}),e.jsxs("div",{className:"bg-white p-4 rounded-md border",children:[e.jsx(Ul,{htmlFor:"edit-status",className:"font-semibold text-gray-700",children:"Status"}),e.jsxs(Gd,{value:f.status||"",onValueChange:e=>g(t=>({...t,status:e})),children:[e.jsx(Vd,{className:"mt-2 bg-white border-gray-300 focus:border-blue-500 focus:ring-blue-500",children:e.jsx(Kd,{placeholder:"Select status"})}),e.jsxs(Jd,{className:"bg-white border shadow-lg",children:[e.jsx(Yd,{value:"draft",children:"Draft"}),e.jsx(Yd,{value:"active",children:"Active"}),e.jsx(Yd,{value:"inactive",children:"Inactive"}),e.jsx(Yd,{value:"suspended",children:"Suspended"})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-white p-4 rounded-md border",children:[e.jsx(Ul,{htmlFor:"edit-bedrooms",className:"font-semibold text-gray-700",children:"Bedrooms"}),e.jsx(pr,{id:"edit-bedrooms",type:"number",min:"1",value:f.bedrooms||"",onChange:e=>g(t=>({...t,bedrooms:Number(e.target.value)})),className:"mt-2 bg-white border-gray-300 focus:border-blue-500 focus:ring-blue-500"})]}),e.jsxs("div",{className:"bg-white p-4 rounded-md border",children:[e.jsx(Ul,{htmlFor:"edit-bathrooms",className:"font-semibold text-gray-700",children:"Bathrooms"}),e.jsx(pr,{id:"edit-bathrooms",type:"number",min:"1",value:f.bathrooms||"",onChange:e=>g(t=>({...t,bathrooms:Number(e.target.value)})),className:"mt-2 bg-white border-gray-300 focus:border-blue-500 focus:ring-blue-500"})]}),e.jsxs("div",{className:"bg-white p-4 rounded-md border",children:[e.jsx(Ul,{htmlFor:"edit-max-guests",className:"font-semibold text-gray-700",children:"Max Guests"}),e.jsx(pr,{id:"edit-max-guests",type:"number",min:"1",value:f.max_guests||"",onChange:e=>g(t=>({...t,max_guests:Number(e.target.value)})),className:"mt-2 bg-white border-gray-300 focus:border-blue-500 focus:ring-blue-500"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t bg-white p-4 rounded-md",children:[e.jsx(mr,{variant:"outline",onClick:()=>p(!1),className:"px-6",children:"Cancel"}),e.jsx(mr,{onClick:async()=>{if(c)try{await a(c.id,f),p(!1),d(null),g({})}catch(e){console.error("Failed to update property:",e)}},className:"px-6 krib-button-primary",children:"Save Changes"})]})]})]})})]})}var du="Checkbox",[uu,hu]=u(du),[mu,pu]=uu(du);function fu(t){const{__scopeCheckbox:s,checked:r,children:a,defaultChecked:n,disabled:i,form:o,name:l,onCheckedChange:c,required:d,value:u="on",internal_do_not_use_render:h}=t,[m,f]=p({prop:r,defaultProp:n??!1,onChange:c,caller:du}),[g,x]=Le.useState(null),[v,b]=Le.useState(null),y=Le.useRef(!1),w=!g||(!!o||!!g.closest("form")),j={checked:m,disabled:i,setChecked:f,control:g,setControl:x,name:l,form:o,value:u,hasConsumerStoppedPropagationRef:y,required:d,defaultChecked:!ku(n)&&n,isFormControl:w,bubbleInput:v,setBubbleInput:b};return e.jsx(mu,{scope:s,...j,children:Nu(h)?h(j):a})}var gu="CheckboxTrigger",xu=Le.forwardRef(({__scopeCheckbox:t,onKeyDown:r,onClick:a,...n},i)=>{const{control:o,value:l,disabled:c,checked:d,required:u,setControl:h,setChecked:m,hasConsumerStoppedPropagationRef:p,isFormControl:f,bubbleInput:x}=pu(gu,t),b=g(i,h),y=Le.useRef(d);return Le.useEffect(()=>{const e=null==o?void 0:o.form;if(e){const t=()=>m(y.current);return e.addEventListener("reset",t),()=>e.removeEventListener("reset",t)}},[o,m]),e.jsx(s.button,{type:"button",role:"checkbox","aria-checked":ku(d)?"mixed":d,"aria-required":u,"data-state":_u(d),"data-disabled":c?"":void 0,disabled:c,value:l,...n,ref:b,onKeyDown:v(r,e=>{"Enter"===e.key&&e.preventDefault()}),onClick:v(a,e=>{m(e=>!!ku(e)||!e),x&&f&&(p.current=e.isPropagationStopped(),p.current||e.stopPropagation())})})});xu.displayName=gu;var vu=Le.forwardRef((t,s)=>{const{__scopeCheckbox:r,name:a,checked:n,defaultChecked:i,required:o,disabled:l,value:c,onCheckedChange:d,form:u,...h}=t;return e.jsx(fu,{__scopeCheckbox:r,checked:n,defaultChecked:i,disabled:l,required:o,onCheckedChange:d,name:a,form:u,value:c,internal_do_not_use_render:({isFormControl:t})=>e.jsxs(e.Fragment,{children:[e.jsx(xu,{...h,ref:s,__scopeCheckbox:r}),t&&e.jsx(ju,{__scopeCheckbox:r})]})})});vu.displayName=du;var bu="CheckboxIndicator",yu=Le.forwardRef((t,r)=>{const{__scopeCheckbox:a,forceMount:n,...i}=t,o=pu(bu,a);return e.jsx(b,{present:n||ku(o.checked)||!0===o.checked,children:e.jsx(s.span,{"data-state":_u(o.checked),"data-disabled":o.disabled?"":void 0,...i,ref:r,style:{pointerEvents:"none",...t.style}})})});yu.displayName=bu;var wu="CheckboxBubbleInput",ju=Le.forwardRef(({__scopeCheckbox:t,...r},a)=>{const{control:n,hasConsumerStoppedPropagationRef:i,checked:o,defaultChecked:l,required:c,disabled:d,name:u,value:h,form:m,bubbleInput:p,setBubbleInput:f}=pu(wu,t),x=g(a,f),v=Rc(o),b=ce(n);Le.useEffect(()=>{const e=p;if(!e)return;const t=window.HTMLInputElement.prototype,s=Object.getOwnPropertyDescriptor(t,"checked").set,r=!i.current;if(v!==o&&s){const t=new Event("click",{bubbles:r});e.indeterminate=ku(o),s.call(e,!ku(o)&&o),e.dispatchEvent(t)}},[p,v,o,i]);const y=Le.useRef(!ku(o)&&o);return e.jsx(s.input,{type:"checkbox","aria-hidden":!0,defaultChecked:l??y.current,required:c,disabled:d,name:u,value:h,form:m,...r,tabIndex:-1,ref:x,style:{...r.style,...b,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});function Nu(e){return"function"==typeof e}function ku(e){return"indeterminate"===e}function _u(e){return ku(e)?"indeterminate":e?"checked":"unchecked"}function Su({className:t,...s}){return e.jsx(vu,{"data-slot":"checkbox",className:ur("peer border bg-input-background dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",t),...s,children:e.jsx(yu,{"data-slot":"checkbox-indicator",className:"flex items-center justify-center text-current transition-none",children:e.jsx(te,{className:"size-3.5"})})})}ju.displayName=wu;const Cu=vs("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function Eu({className:t,variant:s,...r}){return e.jsx("div",{"data-slot":"alert",role:"alert",className:ur(Cu({variant:s}),t),...r})}function Pu({className:t,...s}){return e.jsx("div",{"data-slot":"alert-title",className:ur("col-start-2 line-clamp-1 min-h-4 font-medium tracking-tight",t),...s})}function Tu({className:t,...s}){return e.jsx("div",{"data-slot":"alert-description",className:ur("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",t),...s})}async function Au(e,t="properties"){const s=Array.from(e),r=s.map(e=>async function(e,t="properties"){try{const s=e.name.split(".").pop(),r=`${t}/${Math.random().toString(36).substring(2)}-${Date.now()}.${s}`;console.log("Uploading file:",e.name,"to path:",r);const{data:a,error:n}=await bl.storage.from("krib_host").upload(r,e,{cacheControl:"3600",upsert:!1});if(n)return console.error("Upload error:",n),{success:!1,error:n.message};console.log("Upload successful:",a);const{data:i}=bl.storage.from("krib_host").getPublicUrl(r);return i.publicUrl?(console.log("Generated public URL:",i.publicUrl),{success:!0,url:i.publicUrl}):{success:!1,error:"Failed to generate public URL"}}catch(s){return console.error("Unexpected upload error:",s),{success:!1,error:s.message||"Upload failed"}}}(e,t));try{return await Promise.all(r)}catch(a){return console.error("Multiple upload error:",a),s.map(()=>({success:!1,error:a.message||"Upload failed"}))}}function Ru(){var t;const{createProperty:s,generateAIDescription:r,getUAEEmirates:a,getEmirateAreas:n,getUAEPropertyTypes:o,getUAEAmenities:l}=Pl(),c=Yt(),[d,u]=Le.useState("basic-info"),[h,m]=Le.useState(!1),[p,f]=Le.useState(!1),[g,x]=Le.useState(!1),[v,b]=Le.useState({}),[y,w]=Le.useState([]),[j,N]=Le.useState([]),[k,_]=Le.useState({}),[S,C]=Le.useState([]),[E,P]=Le.useState(!1),[T,A]=Le.useState({title:"",address:"",city:"",state:"",country:"UAE",property_type:"",bedrooms:1,bathrooms:1,max_guests:2,price_per_night:500,description:"",images:[],amenities:[]}),R=[{id:"basic-info",title:"Basic Info",icon:de,description:"Property basics"},{id:"details",title:"Details",icon:I,description:"Size & capacity"},{id:"images",title:"Photos",icon:ue,description:"Upload images"},{id:"amenities",title:"Amenities",icon:he,description:"Features & perks"},{id:"pricing",title:"Pricing",icon:M,description:"Set your rate"},{id:"preview",title:"Preview",icon:te,description:"Review & publish"}];Le.useEffect(()=>{O()},[]),Le.useEffect(()=>{T.state&&$(T.state)},[T.state]);const O=async()=>{try{const[e,t,s]=await Promise.all([a(),o(),l()]);w(e),_(t),C(s)}catch(e){console.error("Failed to load UAE data from API, using fallback data:",e),w([{value:"Dubai",label:"Dubai"},{value:"Abu Dhabi",label:"Abu Dhabi"},{value:"Sharjah",label:"Sharjah"},{value:"Ajman",label:"Ajman"},{value:"Ras Al Khaimah",label:"Ras Al Khaimah"},{value:"Fujairah",label:"Fujairah"},{value:"Umm Al Quwain",label:"Umm Al Quwain"}]),_({apartment:"Apartment",villa:"Villa",townhouse:"Townhouse",penthouse:"Penthouse",studio:"Studio",duplex:"Duplex",loft:"Loft",compound:"Compound",hotel_apartment:"Hotel Apartment",office:"Office",retail:"Retail Space"}),C(["Central Air Conditioning","Maid's Room","Driver's Room","Built-in Wardrobes","Covered Parking","24/7 Security","Swimming Pool","Gym","Children's Play Area","WiFi","Kitchen","Washing Machine","TV","Balcony","Sea View","City View"])}},$=async e=>{P(!0);try{const t=await n(e);N(t)}catch(t){console.error("Failed to load emirate areas from API, using fallback data:",t);N({Dubai:["Downtown Dubai","Dubai Marina","Jumeirah Beach Residence (JBR)","Business Bay","Palm Jumeirah","Jumeirah","Arabian Ranches","Dubai Hills Estate","City Walk","DIFC","Al Barsha","The Greens"],"Abu Dhabi":["Abu Dhabi City","Yas Island","Saadiyat Island","Al Reem Island","Khalifa City","Al Raha","Masdar City","Corniche","Al Maryah Island"],Sharjah:["Sharjah City","Al Majaz","Al Nahda","Al Khan","Al Qasba"],Ajman:["Ajman City","Al Nuaimiya","Al Rashidiya","Corniche Road"],"Ras Al Khaimah":["Ras Al Khaimah City","Al Hamra","Al Marjan Island","Al Rams"],Fujairah:["Fujairah City","Dibba","Kalba","Khor Fakkan"],"Umm Al Quwain":["Umm Al Quwain City","Al Salam City","Falaj Al Mualla"]}[e]||[])}finally{P(!1)}},D=e=>{A(t=>({...t,state:e,city:""})),b(e=>({...e,state:"",city:""}))},L=R.findIndex(e=>e.id===d),U=async()=>{const e=document.createElement("input");e.type="file",e.multiple=!0,e.accept="image/*",e.onchange=async e=>{var t;const s=e.target.files;if(s&&s.length>0){x(!0),b(e=>({...e,images:""}));try{console.log("Starting upload of",s.length,"files");const e=await Au(s,"properties"),r=e.filter(e=>e.success&&e.url).map(e=>e.url),a=e.filter(e=>!e.success);if(r.length>0&&(A(e=>({...e,images:[...e.images,...r].slice(0,10)})),console.log("Successfully uploaded",r.length,"images")),a.length>0){const e=`Failed to upload ${a.length} image(s). ${(null==(t=a[0])?void 0:t.error)||"Unknown error"}`;b(t=>({...t,images:e})),console.error("Upload failures:",a)}}catch(r){console.error("Upload error:",r),b(e=>({...e,images:"Failed to upload images. Please try again."}))}finally{x(!1)}}},e.click()},B=async()=>{f(!0);try{console.log("Generating AI description with data:",T);const e=await r({property_type:T.property_type,city:T.city,state:T.state,bedrooms:T.bedrooms,bathrooms:T.bathrooms,max_guests:T.max_guests,amenities:T.amenities,address:T.address});console.log("Generated description:",e),A(t=>({...t,description:e}))}catch(e){console.error("Failed to generate description:",e),console.error("Error details:",e.message,e.status);const t=`Beautiful ${T.property_type.toLowerCase()} in ${T.city}, ${T.state}. This ${T.bedrooms}-bedroom property can accommodate up to ${T.max_guests} guests. Perfect for your next getaway!`;A(e=>({...e,description:t}))}finally{f(!1)}},z=()=>{switch(d){case"basic-info":return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Let's start with the basics"}),e.jsx("p",{className:"text-gray-600",children:"Tell us about your property"})]}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx(Ul,{htmlFor:"title",children:"Property Title *"}),e.jsx(pr,{id:"title",placeholder:"e.g., Cozy Downtown Apartment",value:T.title,onChange:e=>A(t=>({...t,title:e.target.value})),className:"input-enhanced "+(v.title?"border-red-500":"")}),v.title&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:v.title})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx(Ul,{htmlFor:"address",children:"Address *"}),e.jsx(pr,{id:"address",placeholder:"123 Main Street",value:T.address,onChange:e=>A(t=>({...t,address:e.target.value})),className:v.address?"border-red-500":""}),v.address&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:v.address})]}),e.jsxs("div",{children:[e.jsx(Ul,{htmlFor:"state",children:"Emirate *"}),e.jsxs(Gd,{value:T.state,onValueChange:D,children:[e.jsx(Vd,{className:v.state?"border-red-500":"",children:e.jsx(Kd,{placeholder:"Select Emirate"})}),e.jsx(Jd,{children:y.map(t=>e.jsx(Yd,{value:t.value,children:t.label},t.value))})]}),v.state&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:v.state})]}),e.jsxs("div",{children:[e.jsx(Ul,{htmlFor:"city",children:"Area/City *"}),e.jsxs(Gd,{value:T.city,onValueChange:e=>A(t=>({...t,city:e})),disabled:!T.state||E,children:[e.jsx(Vd,{className:v.city?"border-red-500":"",children:e.jsx(Kd,{placeholder:T.state?E?"Loading areas...":"Select Area/City":"Select Emirate first"})}),e.jsx(Jd,{children:j.map(t=>e.jsx(Yd,{value:t,children:t},t))})]}),v.city&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:v.city})]}),e.jsxs("div",{children:[e.jsx(Ul,{htmlFor:"country",children:"Country"}),e.jsxs(Gd,{value:T.country,onValueChange:e=>A(t=>({...t,country:e})),children:[e.jsx(Vd,{children:e.jsx(Kd,{})}),e.jsx(Jd,{children:e.jsx(Yd,{value:"UAE",children:"United Arab Emirates "})})]})]}),e.jsxs("div",{children:[e.jsx(Ul,{htmlFor:"property_type",children:"Property Type *"}),e.jsxs(Gd,{value:T.property_type,onValueChange:e=>A(t=>({...t,property_type:e})),children:[e.jsx(Vd,{className:v.property_type?"border-red-500":"",children:e.jsx(Kd,{placeholder:"Select type"})}),e.jsx(Jd,{children:Object.entries(k).map(([t,s])=>e.jsx(Yd,{value:t,children:s},t))})]}),v.property_type&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:v.property_type})]})]})]});case"details":return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Property Details"}),e.jsx("p",{className:"text-gray-600",children:"Help guests understand your space"})]}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-3",children:[e.jsxs("div",{children:[e.jsx(Ul,{htmlFor:"bedrooms",children:"Bedrooms"}),e.jsx(pr,{id:"bedrooms",type:"number",min:"0",value:T.bedrooms,onChange:e=>A(t=>({...t,bedrooms:parseInt(e.target.value)||0})),className:v.bedrooms?"border-red-500":""}),v.bedrooms&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:v.bedrooms})]}),e.jsxs("div",{children:[e.jsx(Ul,{htmlFor:"bathrooms",children:"Bathrooms"}),e.jsx(pr,{id:"bathrooms",type:"number",min:"0",step:"0.5",value:T.bathrooms,onChange:e=>A(t=>({...t,bathrooms:parseFloat(e.target.value)||0})),className:v.bathrooms?"border-red-500":""}),v.bathrooms&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:v.bathrooms})]}),e.jsxs("div",{children:[e.jsx(Ul,{htmlFor:"max_guests",children:"Max Guests"}),e.jsx(pr,{id:"max_guests",type:"number",min:"1",value:T.max_guests,onChange:e=>A(t=>({...t,max_guests:parseInt(e.target.value)||1})),className:v.max_guests?"border-red-500":""}),v.max_guests&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:v.max_guests})]})]})]});case"images":return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Add Photos"}),e.jsx("p",{className:"text-gray-600",children:"Show off your space with beautiful photos"})]}),e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center",children:[e.jsx(ue,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Upload Photos"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Add up to 10 high-quality photos of your property"}),e.jsxs(mr,{onClick:U,size:"lg",disabled:g,className:"krib-button-primary",children:[e.jsx(xe,{className:"h-4 w-4 mr-2"}),g?"Uploading...":"Choose Photos"]}),v.images&&e.jsx("p",{className:"text-red-500 text-sm mt-2",children:v.images})]}),T.images.length>0&&e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:T.images.map((t,s)=>e.jsxs("div",{className:"relative group",children:[e.jsx("img",{src:t,alt:`Property ${s+1}`,className:"w-full h-32 object-cover rounded-lg"}),e.jsx("button",{onClick:()=>(e=>{A(t=>({...t,images:t.images.filter((t,s)=>s!==e)}))})(s),className:"absolute top-2 right-2 bg-red-500 text-white rounded-full p-1 opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx(i,{className:"h-4 w-4"})})]},s))})]});case"amenities":return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Amenities"}),e.jsx("p",{className:"text-gray-600",children:"What does your property offer?"})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:S.map(t=>e.jsx("div",{onClick:()=>(e=>{A(t=>({...t,amenities:t.amenities.includes(e)?t.amenities.filter(t=>t!==e):[...t.amenities,e]}))})(t),className:"p-3 border rounded-lg cursor-pointer transition-all "+(T.amenities.includes(t)?"border-krib-lime bg-krib-lime-soft text-krib-black":"border-gray-300 hover:border-gray-400"),children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Su,{checked:T.amenities.includes(t),onChange:()=>{}}),e.jsx("span",{className:"text-sm font-medium",children:t})]})},t))})]});case"pricing":return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Set Your Price"}),e.jsx("p",{className:"text-gray-600",children:"How much do you want to charge per night?"})]}),e.jsxs("div",{className:"max-w-md mx-auto",children:[e.jsx(Ul,{htmlFor:"price_per_night",children:"Price per Night (AED)"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500",children:"AED"}),e.jsx(pr,{id:"price_per_night",type:"number",min:"1",value:T.price_per_night,onChange:e=>A(t=>({...t,price_per_night:parseInt(e.target.value)||1})),className:"pl-14 text-lg "+(v.price_per_night?"border-red-500":"")})]}),v.price_per_night&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:v.price_per_night})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(Ul,{htmlFor:"description",children:"Description"}),e.jsx(mr,{variant:"outline",size:"sm",onClick:B,disabled:p,className:"h-10 px-4 rounded-xl border-2 border-krib-lime text-krib-lime hover:bg-krib-lime hover:text-krib-black transition-all duration-200 font-medium shadow-sm hover:shadow-md group",children:p?e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"animate-spin h-4 w-4 border-2 border-krib-lime border-t-transparent rounded-full mr-2"}),"Generating..."]}):e.jsxs("div",{className:"flex items-center",children:[e.jsx(ge,{className:"h-4 w-4 mr-2 group-hover:scale-110 transition-transform duration-200"})," AI Generate"]})})]}),e.jsx(ou,{id:"description",placeholder:"Describe your property...",value:T.description,onChange:e=>A(t=>({...t,description:e.target.value})),rows:6,className:v.description?"border-red-500":""}),v.description&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:v.description})]})]});case"preview":return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Review Your Listing"}),e.jsx("p",{className:"text-gray-600",children:"Make sure everything looks perfect"})]}),v.general&&e.jsxs(Eu,{className:"mb-4",children:[e.jsx(fe,{className:"h-4 w-4"}),e.jsx(Tu,{children:v.general})]}),e.jsx(Al,{className:"krib-card",children:e.jsx($l,{className:"p-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold",children:T.title}),e.jsxs("p",{className:"text-gray-600",children:[T.address,", ",T.city,", ",T.state]})]}),e.jsxs("div",{className:"flex gap-4 text-sm text-gray-600",children:[e.jsxs("span",{children:[T.bedrooms," bed"]}),e.jsxs("span",{children:[T.bathrooms," bath"]}),e.jsxs("span",{children:[T.max_guests," guests"]}),e.jsxs("span",{className:"font-bold text-gray-900",children:["AED ",T.price_per_night,"/night"]})]}),T.images.length>0&&e.jsx("div",{className:"grid grid-cols-3 gap-2",children:T.images.slice(0,3).map((t,s)=>e.jsx("img",{src:t,alt:`Property ${s+1}`,className:"w-full h-24 object-cover rounded"},s))}),e.jsx("p",{className:"text-gray-700",children:T.description}),T.amenities.length>0&&e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:"Amenities"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:T.amenities.map(t=>e.jsx(Pc,{variant:"secondary",children:t},t))})]})]})})})]});case"published":return e.jsxs("div",{className:"text-center space-y-6",children:[e.jsx("div",{className:"w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto",children:e.jsx(te,{className:"h-10 w-10 text-green-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:" Property Published!"}),e.jsx("p",{className:"text-gray-600",children:"Your property is now live and ready to receive bookings."})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(mr,{onClick:()=>u("basic-info"),variant:"outline",className:"w-full h-12 rounded-xl border-2 hover:bg-gray-50",children:"Add Another Property"}),e.jsx(mr,{onClick:()=>c("/properties"),className:"w-full h-12 rounded-xl krib-button-primary",children:"View My Properties"})]})]});default:return null}};return"published"===d?e.jsx("div",{className:"p-6 max-w-2xl mx-auto",children:z()}):e.jsxs("div",{className:"p-6 max-w-4xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Add New Property"}),e.jsx("p",{className:"text-gray-600",children:"Create a stunning listing for your rental property"})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:R.map((t,s)=>e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center "+(s<=L?"bg-krib-lime text-krib-black":"bg-gray-200 text-gray-500"),children:e.jsx(t.icon,{className:"h-5 w-5"})}),s<R.length-1&&e.jsx("div",{className:"w-16 h-1 mx-2 "+(s<L?"bg-krib-lime":"bg-gray-200")})]},t.id))}),e.jsx("div",{className:"text-center",children:e.jsxs("p",{className:"text-sm text-gray-600",children:["Step ",L+1," of ",R.length,": ",null==(t=R[L])?void 0:t.description]})})]}),e.jsx(Al,{className:"mb-8 card-elevated",children:e.jsx($l,{className:"p-8 form-section",children:z()})}),e.jsxs("div",{className:"flex justify-between",children:[e.jsxs(mr,{variant:"outline",onClick:()=>{const e=L-1;e>=0&&u(R[e].id)},disabled:0===L,children:[e.jsx(me,{className:"h-4 w-4 mr-2"}),"Previous"]}),e.jsx("div",{className:"flex gap-2",children:L===R.length-1?e.jsx(mr,{onClick:async()=>{m(!0),b({});try{console.log("Publishing property with data:",T);const e={title:T.title,address:T.address,city:T.city,state:T.state,country:T.country,property_type:T.property_type,bedrooms:T.bedrooms,bathrooms:T.bathrooms,max_guests:T.max_guests,price_per_night:T.price_per_night,description:T.description,images:T.images,amenities:T.amenities,status:"active"};console.log("Sending payload to backend:",e);const t=await s(e);console.log("Property created successfully:",t),t?u("published"):b({general:"Failed to create property. Please try again."})}catch(e){console.error("Error creating property:",e),b({general:e.message||"Failed to create property. Please check your connection and try again."})}finally{m(!1)}},disabled:h,size:"lg",className:"px-8 krib-button-primary",children:h?"Publishing...":"Publish Property"}):e.jsxs(mr,{onClick:()=>{if((e=>{const t={};switch(e){case"basic-info":T.title.trim()||(t.title="Property title is required"),T.address.trim()||(t.address="Address is required"),T.city.trim()||(t.city="City is required"),T.state.trim()||(t.state="State is required"),T.property_type||(t.property_type="Property type is required");break;case"details":T.bedrooms<0&&(t.bedrooms="Bedrooms cannot be negative"),T.bathrooms<0&&(t.bathrooms="Bathrooms cannot be negative"),T.max_guests<1&&(t.max_guests="Must accommodate at least 1 guest");break;case"pricing":T.price_per_night<1&&(t.price_per_night="Price must be at least $1"),T.description.trim()||(t.description="Description is required")}return b(t),0===Object.keys(t).length})(d)){const e=L+1;e<R.length&&u(R[e].id)}},size:"lg",className:"px-8 krib-button-primary",children:["Next",e.jsx(pe,{className:"h-4 w-4 ml-2"})]})})]})]})}function Ou(){var t,s,r,a;const{getAnalytics:n}=Pl(),[i,o]=Le.useState(null),[l,c]=Le.useState("12months"),[d,u]=Le.useState(!0),[h,m]=Le.useState(null),[p,f]=Le.useState(null);Le.useEffect(()=>{(async()=>{u(!0);try{console.log("Loading analytics data...");const e=await n();console.log("Analytics data received:",e),o(e),e.market_insights&&m(e.market_insights),e.forecast&&f(e.forecast)}catch(e){console.error("Failed to load analytics:",e),console.error("Error details:",e.message,e.status),o({totalRevenue:0,totalBookings:0,totalProperties:0,occupancyRate:0,monthlyData:[],propertyPerformance:[]})}finally{u(!1)}})()},[l]);if(d)return e.jsx("div",{className:"p-6 space-y-6",children:e.jsxs("div",{className:"animate-pulse space-y-4",children:[e.jsx("div",{className:"h-8 bg-muted rounded w-64"}),e.jsx("div",{className:"grid gap-4 md:grid-cols-4",children:[...Array(4)].map((t,s)=>e.jsx("div",{className:"h-24 bg-muted rounded"},s))}),e.jsx("div",{className:"h-96 bg-muted rounded"})]})});const g=(null==i?void 0:i.monthlyData)||[];null==i||i.propertyPerformance;const x=[{title:"Total Revenue",value:`$${(null==(t=null==i?void 0:i.totalRevenue)?void 0:t.toLocaleString())||"0"}`,change:(null==i?void 0:i.monthly_growth)?`${i.monthly_growth>0?"+":""}${i.monthly_growth.toFixed(1)}%`:"0%",trend:"up",icon:M,color:"text-green-600"},{title:"Total Bookings",value:(null==(s=null==i?void 0:i.totalBookings)?void 0:s.toString())||"0",change:(null==i?void 0:i.booking_growth)?`${i.booking_growth>0?"+":""}${i.booking_growth.toFixed(1)}%`:"0%",trend:"up",icon:U,color:"text-krib-lime"},{title:"Average Rating",value:i?(i.average_rating||0).toFixed(1):"0.0",change:(null==i?void 0:i.rating_change)?`${i.rating_change>0?"+":""}${i.rating_change.toFixed(1)}`:"0",trend:"up",icon:q,color:"text-yellow-600"},{title:"Occupancy Rate",value:`${(null==i?void 0:i.occupancyRate)||0}%`,change:"-2.1%",trend:"down",icon:ve,color:"text-purple-600"}],v=[{name:"Occupied",value:(null==i?void 0:i.occupancyRate)||0,color:"#22c55e"},{name:"Available",value:100-((null==i?void 0:i.occupancyRate)||0),color:"#e5e7eb"}];return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"mb-2",children:"Advanced Analytics"}),e.jsx("p",{className:"text-muted-foreground",children:"AI-powered insights and market intelligence for your rental business."})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(mr,{onClick:()=>{const e={period:l,revenue:(null==i?void 0:i.totalRevenue)||0,bookings:(null==i?void 0:i.totalBookings)||0,properties:(null==i?void 0:i.totalProperties)||0,occupancyRate:(null==i?void 0:i.occupancyRate)||0,forecast:p,marketComparison:marketComparisonData,generatedAt:(new Date).toISOString()},t=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),s=URL.createObjectURL(t),r=document.createElement("a");r.href=s,r.download=`analytics-report-${(new Date).toISOString().split("T")[0]}.json`,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(s)},variant:"outline",size:"sm",children:[e.jsx(be,{className:"h-4 w-4 mr-2"}),"Export Report"]}),e.jsxs(Gd,{value:l,onValueChange:c,children:[e.jsx(Vd,{className:"w-[180px]",children:e.jsx(Kd,{placeholder:"Select period"})}),e.jsxs(Jd,{children:[e.jsx(Yd,{value:"7days",children:"Last 7 days"}),e.jsx(Yd,{value:"30days",children:"Last 30 days"}),e.jsx(Yd,{value:"3months",children:"Last 3 months"}),e.jsx(Yd,{value:"12months",children:"Last 12 months"})]})]})]})]}),e.jsxs(Eu,{children:[e.jsx(ye,{className:"h-4 w-4"}),e.jsx(Pu,{children:"AI Insights"}),e.jsx(Tu,{children:"Based on market analysis, you could increase revenue by 18% by optimizing pricing for the next 30 days."})]}),e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:x.map(t=>e.jsxs(Al,{className:"krib-card krib-glow-hover",children:[e.jsxs(Rl,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(Ol,{className:"text-sm",children:t.title}),e.jsx(t.icon,{className:`h-4 w-4 ${t.color}`})]}),e.jsxs($l,{children:[e.jsx("div",{className:"text-2xl font-bold",children:t.value}),e.jsxs("div",{className:"flex items-center text-xs text-muted-foreground",children:["up"===t.trend?e.jsx(F,{className:"h-3 w-3 text-green-600 mr-1"}):e.jsx(we,{className:"h-3 w-3 text-red-600 mr-1"}),t.change," from last period"]})]})]},t.title))}),e.jsxs(ac,{defaultValue:"revenue",className:"space-y-4",children:[e.jsxs(nc,{className:"grid w-full grid-cols-7",children:[e.jsx(ic,{value:"revenue",children:"Revenue"}),e.jsx(ic,{value:"forecast",children:"Forecast"}),e.jsx(ic,{value:"market",children:"Market"}),e.jsx(ic,{value:"pricing",children:"Pricing"}),e.jsx(ic,{value:"competition",children:"Competition"}),e.jsx(ic,{value:"insights",children:"Insights"}),e.jsx(ic,{value:"occupancy",children:"Occupancy"})]}),e.jsx(oc,{value:"revenue",className:"space-y-4",children:e.jsxs("div",{className:"grid gap-4 md:grid-cols-7",children:[e.jsxs(Al,{className:"md:col-span-4 krib-card",children:[e.jsxs(Rl,{children:[e.jsx(Ol,{children:"Revenue Trend Analysis"}),e.jsx(Il,{children:"Revenue performance with trend analysis and predictions"})]}),e.jsx($l,{children:e.jsx(We,{width:"100%",height:300,children:e.jsxs(He,{data:g,children:[e.jsx(Ge,{strokeDasharray:"3 3"}),e.jsx(Ke,{dataKey:"month"}),e.jsx(Ve,{}),e.jsx(Je,{formatter:e=>[`$${e}`,"Revenue"]}),e.jsx(Ye,{type:"monotone",dataKey:"revenue",stroke:"#2563eb",strokeWidth:2,dot:{fill:"#2563eb"}})]})})})]}),e.jsxs(Al,{className:"md:col-span-3 krib-card",children:[e.jsxs(Rl,{children:[e.jsx(Ol,{children:"Performance Metrics"}),e.jsx(Il,{children:"Key performance indicators"})]}),e.jsxs($l,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm",children:"This Month"}),e.jsx("span",{className:"font-medium",children:"$7,100"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm",children:"Last Month"}),e.jsx("span",{className:"font-medium",children:"$5,900"})]}),e.jsxs("div",{className:"flex justify-between text-green-600",children:[e.jsx("span",{className:"text-sm",children:"Growth"}),e.jsx("span",{className:"font-medium",children:(null==p?void 0:p.confidence)?`${p.confidence}%`:"0%"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium",children:"Revenue Quality Score"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Diversification"}),e.jsx("span",{children:"85%"})]}),e.jsx(Cc,{value:85,className:"h-2"}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Stability"}),e.jsx("span",{children:"92%"})]}),e.jsx(Cc,{value:92,className:"h-2"})]})]})]})]})]})}),e.jsx(oc,{value:"forecast",className:"space-y-4",children:e.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[e.jsxs(Al,{className:"md:col-span-2 krib-card",children:[e.jsxs(Rl,{children:[e.jsx(Ol,{children:"UAE Market Forecast"}),e.jsx(Il,{children:"Real UAE seasonal patterns and revenue predictions"})]}),e.jsx($l,{children:(null==p?void 0:p.forecast_data)?e.jsx(We,{width:"100%",height:300,children:e.jsxs(Xe,{data:p.forecast_data,children:[e.jsx(Ge,{strokeDasharray:"3 3"}),e.jsx(Ke,{dataKey:"month"}),e.jsx(Ve,{}),e.jsx(Je,{formatter:(e,t)=>[`AED ${e}`,"Forecasted Revenue"]}),e.jsx(Qe,{type:"monotone",dataKey:"forecasted_revenue",stroke:"#10b981",fill:"#10b981",fillOpacity:.3})]})}):e.jsx("div",{className:"h-[300px] flex items-center justify-center text-muted-foreground",children:"Loading forecast data..."})})]}),e.jsxs(Al,{className:"krib-card",children:[e.jsxs(Rl,{children:[e.jsx(Ol,{children:"Dubai Market Insights"}),e.jsx(Il,{children:"Real market predictions and seasonal trends"})]}),e.jsxs($l,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium",children:"Next Quarter Forecast"}),e.jsxs("div",{className:"text-2xl font-bold text-green-600",children:["AED ",(null==(r=null==p?void 0:p.next_quarter_revenue)?void 0:r.toLocaleString())||"0"]}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Based on UAE seasonality"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium",children:"Confidence Level"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Cc,{value:(null==p?void 0:p.confidence)||0,className:"flex-1"}),e.jsxs("span",{className:"text-sm font-medium",children:[(null==p?void 0:p.confidence)||0,"%"]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium",children:"Peak Period"}),e.jsx("div",{className:"text-sm",children:e.jsx("strong",{children:(null==p?void 0:p.peak_period)||"Winter Season"})})]}),(null==p?void 0:p.insights)&&e.jsxs(Eu,{children:[e.jsx(je,{className:"h-4 w-4"}),e.jsx(Tu,{children:p.insights.seasonal_impact})]})]})]})]})}),e.jsx(oc,{value:"market",className:"space-y-4",children:e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs(Al,{className:"krib-card",children:[e.jsxs(Rl,{children:[e.jsx(Ol,{children:"UAE Market Performance"}),e.jsx(Il,{children:"Your performance vs UAE market standards"})]}),e.jsx($l,{children:h?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:"Market Position"}),e.jsxs(Pc,{variant:h.competitive_position<=3?"default":"secondary",children:["#",h.competitive_position," in area"]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsxs("span",{children:["Your Performance: ",h.performance_vs_market,"%"]}),e.jsx("span",{className:"text-muted-foreground",children:"vs Market Average"})]})]}),h.area_insights&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("h4",{className:"font-medium",children:["Area: ",h.area_insights.area]}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[e.jsxs("p",{children:["Tier: ",h.area_insights.tier]}),e.jsxs("p",{children:["Primary Demand: ",h.area_insights.primary_demand]})]})]})]}):e.jsx("div",{className:"text-muted-foreground",children:"Loading market data..."})})]}),e.jsxs(Al,{className:"krib-card",children:[e.jsxs(Rl,{children:[e.jsx(Ol,{children:"UAE Seasonal Trends"}),e.jsx(Il,{children:"Real UAE seasonal demand patterns"})]}),e.jsxs($l,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium",children:"Market Health Score"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:(null==h?void 0:h.market_health_score)||0}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"/ 100"})]}),e.jsx(Cc,{value:(null==h?void 0:h.market_health_score)||0,className:"h-2"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium",children:"Dubai Seasonal Demand"}),e.jsxs("div",{className:"grid grid-cols-1 gap-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Winter Peak (Dec-Feb)"}),e.jsx("span",{className:"font-medium text-green-600",children:"+50%"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Winter High (Mar, Nov)"}),e.jsx("span",{className:"font-medium text-blue-600",children:"+30%"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Shoulder (Apr, Oct)"}),e.jsx("span",{className:"font-medium",children:"Normal"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Summer Low (May-Sep)"}),e.jsx("span",{className:"font-medium text-red-600",children:"-30%"})]})]})]}),e.jsxs(Eu,{children:[e.jsx(F,{className:"h-4 w-4"}),e.jsx(Tu,{children:"UAE winter season (Dec-Mar) offers premium pricing opportunities with 40-50% higher demand."})]})]})]})]})}),e.jsx(oc,{value:"pricing",className:"space-y-4",children:e.jsxs(Al,{className:"krib-card",children:[e.jsxs(Rl,{children:[e.jsx(Ol,{children:"UAE Dynamic Pricing"}),e.jsx(Il,{children:"Real-time pricing optimization based on UAE events, seasons, and demand"})]}),e.jsx($l,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs(Eu,{children:[e.jsx(F,{className:"h-4 w-4"}),e.jsx(Tu,{children:"Dynamic pricing is now available per property. View individual property pricing recommendations in the Properties section."})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium",children:"UAE Seasonal Pricing Strategy"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center p-3 bg-green-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-green-800",children:"Winter Peak (Dec-Feb)"}),e.jsx("p",{className:"text-sm text-green-600",children:"European winter escape season"})]}),e.jsx(Pc,{className:"bg-green-100 text-green-800",children:"+50%"})]}),e.jsxs("div",{className:"flex justify-between items-center p-3 bg-blue-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-blue-800",children:"Winter High (Mar, Nov)"}),e.jsx("p",{className:"text-sm text-blue-600",children:"Pleasant weather months"})]}),e.jsx(Pc,{className:"bg-blue-100 text-blue-800",children:"+30%"})]}),e.jsxs("div",{className:"flex justify-between items-center p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-800",children:"Shoulder (Apr, Oct)"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Moderate demand periods"})]}),e.jsx(Pc,{variant:"secondary",children:"Base Rate"})]}),e.jsxs("div",{className:"flex justify-between items-center p-3 bg-orange-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-orange-800",children:"Summer Low (May-Sep)"}),e.jsx("p",{className:"text-sm text-orange-600",children:"Hot weather discount needed"})]}),e.jsx(Pc,{className:"bg-orange-100 text-orange-800",children:"-30%"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium",children:"Major Event Opportunities"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center p-3 bg-red-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-red-800",children:"F1 Grand Prix"}),e.jsx("p",{className:"text-sm text-red-600",children:"March weekend"})]}),e.jsx(Pc,{className:"bg-red-100 text-red-800",children:"+300%"})]}),e.jsxs("div",{className:"flex justify-between items-center p-3 bg-purple-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-purple-800",children:"Shopping Festival"}),e.jsx("p",{className:"text-sm text-purple-600",children:"January month-long"})]}),e.jsx(Pc,{className:"bg-purple-100 text-purple-800",children:"+80%"})]}),e.jsxs("div",{className:"flex justify-between items-center p-3 bg-blue-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-blue-800",children:"GITEX Technology"}),e.jsx("p",{className:"text-sm text-blue-600",children:"October week"})]}),e.jsx(Pc,{className:"bg-blue-100 text-blue-800",children:"+60%"})]}),e.jsxs("div",{className:"flex justify-between items-center p-3 bg-green-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-green-800",children:"New Year's Eve"}),e.jsx("p",{className:"text-sm text-green-600",children:"Dec 31 - Jan 2"})]}),e.jsx(Pc,{className:"bg-green-100 text-green-800",children:"+200%"})]})]})]})]}),e.jsxs("div",{className:"pt-4 border-t",children:[e.jsx("h4",{className:"font-medium mb-3",children:"Pricing Recommendations"}),e.jsxs("div",{className:"grid gap-3 md:grid-cols-2",children:[e.jsxs("div",{className:"p-3 border rounded-lg",children:[e.jsx("p",{className:"font-medium text-sm",children:"Weekend Premium"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Add 20% for Friday-Saturday nights"})]}),e.jsxs("div",{className:"p-3 border rounded-lg",children:[e.jsx("p",{className:"font-medium text-sm",children:"Area Multipliers"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Marina: +60%, Downtown: +50%, JLT: Base"})]}),e.jsxs("div",{className:"p-3 border rounded-lg",children:[e.jsx("p",{className:"font-medium text-sm",children:"Ramadan Adjustment"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Reduce rates 20% during Ramadan period"})]}),e.jsxs("div",{className:"p-3 border rounded-lg",children:[e.jsx("p",{className:"font-medium text-sm",children:"Last-Minute Bookings"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Dynamic discounts for 3-day advance bookings"})]})]})]})]})})]})}),e.jsx(oc,{value:"competition",className:"space-y-4",children:e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs(Al,{className:"krib-card",children:[e.jsxs(Rl,{children:[e.jsx(Ol,{children:"UAE Market Competition"}),e.jsx(Il,{children:"Competitive analysis is being developed for UAE market"})]}),e.jsxs($l,{children:[e.jsxs(Eu,{children:[e.jsx(ie,{className:"h-4 w-4"}),e.jsx(Tu,{children:"Competitor tracking system is in development. Currently integrating with UAE property listings to provide real competitive analysis."})]}),e.jsxs("div",{className:"space-y-4 mt-6",children:[e.jsx("h4",{className:"font-medium",children:"Market Areas Analysis"}),e.jsxs("div",{className:"grid gap-3",children:[e.jsxs("div",{className:"p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-medium",children:"Marina"}),e.jsx("span",{className:"text-sm text-green-600",children:"Premium Tier (+60%)"})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Waterfront luxury properties"})]}),e.jsxs("div",{className:"p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-medium",children:"Downtown"}),e.jsx("span",{className:"text-sm text-blue-600",children:"Premium Tier (+50%)"})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Business district and attractions"})]}),e.jsxs("div",{className:"p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-medium",children:"JLT"}),e.jsx("span",{className:"text-sm text-gray-600",children:"Standard Tier"})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Modern towers with metro access"})]})]})]})]})]}),e.jsxs(Al,{className:"krib-card",children:[e.jsxs(Rl,{children:[e.jsx(Ol,{children:"Market Positioning"}),e.jsx(Il,{children:"Your competitive advantage in UAE"})]}),e.jsx($l,{className:"space-y-4",children:(null==h?void 0:h.area_insights)&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("h4",{className:"font-medium",children:["Your Area: ",h.area_insights.area]}),e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:h.area_insights.tier}),e.jsx("div",{className:"text-sm text-muted-foreground",children:h.area_insights.primary_demand})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium",children:"Market Performance"}),e.jsxs("div",{className:"text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"vs Market Average"}),e.jsxs("span",{className:"font-medium text-green-600",children:[h.performance_vs_market,"%"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Position in Area"}),e.jsxs("span",{className:"font-medium",children:["#",h.competitive_position]})]})]})]}),e.jsxs(Eu,{children:[e.jsx(Ne,{className:"h-4 w-4"}),e.jsx(Tu,{children:(null==(a=h.area_recommendations)?void 0:a[0])||"Optimize pricing based on UAE seasonal patterns"})]})]})})]})]})}),e.jsx(oc,{value:"insights",className:"space-y-4",children:e.jsxs("div",{className:"grid gap-4",children:[e.jsx(Al,{children:e.jsx($l,{className:"p-6",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"p-2 rounded-full bg-green-100 text-green-600",children:e.jsx(F,{className:"h-4 w-4"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"font-semibold",children:"Dubai Winter Season Opportunity"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Pc,{variant:"outline",children:"Impact: High"}),e.jsx(Pc,{variant:"outline",children:"Effort: Low"})]})]}),e.jsx("p",{className:"text-muted-foreground",children:"Increase rates by 40-50% during UAE's peak winter season (December-February) when European tourists seek warm weather escapes."})]})]})})}),e.jsx(Al,{children:e.jsx($l,{className:"p-6",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"p-2 rounded-full bg-blue-100 text-blue-600",children:e.jsx(U,{className:"h-4 w-4"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"font-semibold",children:"Event-Based Surge Pricing"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Pc,{variant:"outline",children:"Impact: Very High"}),e.jsx(Pc,{variant:"outline",children:"Effort: Low"})]})]}),e.jsx("p",{className:"text-muted-foreground",children:"Implement automatic surge pricing for major UAE events: F1 Grand Prix (+300%), Shopping Festival (+80%), GITEX (+60%)."})]})]})})}),e.jsx(Al,{children:e.jsx($l,{className:"p-6",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"p-2 rounded-full bg-yellow-100 text-yellow-600",children:e.jsx(ke,{className:"h-4 w-4"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"font-semibold",children:"Summer Season Strategy"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Pc,{variant:"outline",children:"Impact: Medium"}),e.jsx(Pc,{variant:"outline",children:"Effort: Medium"})]})]}),e.jsx("p",{className:"text-muted-foreground",children:"UAE summer (May-September) requires 20-30% discount and focus on longer stays, business travelers, and local residents."})]})]})})}),(null==h?void 0:h.area_recommendations)&&e.jsx(Al,{children:e.jsx($l,{className:"p-6",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"p-2 rounded-full bg-purple-100 text-purple-600",children:e.jsx(ie,{className:"h-4 w-4"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"font-semibold",children:"Area-Specific Recommendations"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Pc,{variant:"outline",children:"Impact: High"}),e.jsx(Pc,{variant:"outline",children:"Effort: Low"})]})]}),e.jsx("div",{className:"space-y-2",children:h.area_recommendations.map((t,s)=>e.jsxs("p",{className:"text-muted-foreground text-sm",children:[" ",t]},s))})]})]})})}),e.jsxs(Al,{className:"krib-card",children:[e.jsxs(Rl,{children:[e.jsx(Ol,{children:"UAE Demand Patterns"}),e.jsx(Il,{children:"Real UAE seasonal and daily booking patterns"})]}),e.jsx($l,{children:e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium",children:"Peak Booking Times"}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Evening (6-9 PM)"}),e.jsx("span",{className:"font-medium",children:"45%"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Lunch (12-2 PM)"}),e.jsx("span",{className:"font-medium",children:"25%"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Morning (9-11 AM)"}),e.jsx("span",{className:"font-medium",children:"20%"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Late Night"}),e.jsx("span",{className:"font-medium",children:"10%"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium",children:"Weekly Patterns"}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Friday-Saturday"}),e.jsx("span",{className:"font-medium text-green-600",children:"Premium (+20%)"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Thursday"}),e.jsx("span",{className:"font-medium",children:"Standard"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Sunday-Tuesday"}),e.jsx("span",{className:"font-medium text-blue-600",children:"Business Focus"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Wednesday"}),e.jsx("span",{className:"font-medium text-orange-600",children:"Lowest"})]})]})]})]})})})]})]})}),e.jsx(oc,{value:"occupancy",className:"space-y-4",children:e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs(Al,{className:"krib-card",children:[e.jsxs(Rl,{children:[e.jsx(Ol,{children:"Overall Occupancy"}),e.jsx(Il,{children:"Current occupancy rate across all properties"})]}),e.jsxs($l,{children:[e.jsx(We,{width:"100%",height:200,children:e.jsxs(Ze,{children:[e.jsx(et,{data:v,cx:"50%",cy:"50%",innerRadius:60,outerRadius:80,dataKey:"value",children:v.map((t,s)=>e.jsx(tt,{fill:t.color},`cell-${s}`))}),e.jsx(Je,{formatter:e=>[`${e}%`,""]})]})}),e.jsx("div",{className:"flex justify-center mt-4",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("p",{className:"text-2xl font-bold",children:[(null==i?void 0:i.occupancyRate)||0,"%"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Occupied"})]})})]})]}),e.jsxs(Al,{className:"krib-card",children:[e.jsxs(Rl,{children:[e.jsx(Ol,{children:"Occupancy Insights"}),e.jsx(Il,{children:"Performance metrics and optimization recommendations"})]}),e.jsxs($l,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm",children:"Peak Season"}),e.jsx("span",{className:"font-medium",children:"Jun - Aug (89%)"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm",children:"Low Season"}),e.jsx("span",{className:"font-medium",children:"Jan - Mar (62%)"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm",children:"Average Stay"}),e.jsx("span",{className:"font-medium",children:"3.2 nights"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm",children:"Booking Lead Time"}),e.jsx("span",{className:"font-medium",children:"28 days"})]})]}),e.jsxs("div",{className:"pt-4 border-t",children:[e.jsx("h4",{className:"font-medium mb-2",children:"AI Recommendations"}),e.jsxs("ul",{className:"text-sm text-muted-foreground space-y-1",children:[e.jsx("li",{children:" Implement dynamic pricing to increase low-season occupancy"}),e.jsx("li",{children:" Offer 7+ day discounts to increase average stay"}),e.jsx("li",{children:" Target last-minute bookings with flash sales"}),e.jsx("li",{children:" Consider corporate partnerships for midweek bookings"})]})]})]})]})]})})]})]})}function Iu({...t}){return e.jsx(_e,{"data-slot":"dropdown-menu",...t})}function $u({...t}){return e.jsx(Se,{"data-slot":"dropdown-menu-trigger",...t})}function Du({className:t,sideOffset:s=4,...r}){return e.jsx(Ce,{children:e.jsx(Ee,{"data-slot":"dropdown-menu-content",sideOffset:s,className:ur("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-dropdown-menu-content-available-height) min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",t),...r})})}function Lu({className:t,inset:s,variant:r="default",...a}){return e.jsx(Pe,{"data-slot":"dropdown-menu-item","data-inset":s,"data-variant":r,className:ur("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...a})}const Uu=e=>{switch(e){case"confirmed":return"default";case"pending":default:return"secondary";case"cancelled":case"no_show":return"destructive";case"completed":return"outline"}};function Mu(){const{bookings:t,loadBookings:s,properties:r,loadProperties:a}=Pl(),[n,i]=Le.useState(""),[o,l]=Le.useState("all"),[c,d]=Le.useState("all"),[u,h]=Le.useState(!0);Le.useEffect(()=>{!async function(){try{h(!0),await Promise.all([s(),a()])}catch(e){console.error("Failed to load booking data:",e)}finally{h(!1)}}()},[]);const m=t.map(e=>{var t;return{...e,property_title:(null==(t=r.find(t=>t.id===e.property_id))?void 0:t.title)||"Unknown Property"}}),p=m.filter(e=>{var t;const s=e.guest_name.toLowerCase().includes(n.toLowerCase())||(null==(t=e.property_title)?void 0:t.toLowerCase().includes(n.toLowerCase()))||e.id.toLowerCase().includes(n.toLowerCase()),r="all"===o||e.status===o,a="all"===c||e.status===c;return s&&r&&a}),f=m.filter(e=>"confirmed"===e.status&&new Date(e.check_in)>new Date),g=m.filter(e=>{const t=(new Date).toISOString().split("T")[0];return e.check_in===t&&"confirmed"===e.status}),x=m.filter(e=>{const t=(new Date).toISOString().split("T")[0];return e.check_out===t&&"confirmed"===e.status});async function v(e,t){try{console.log("Updating booking",e,"to status",t)}catch(s){console.error("Failed to update booking:",s)}}return u?e.jsx("div",{className:"p-6 space-y-6",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/4 mb-4"}),e.jsx("div",{className:"grid gap-4 md:grid-cols-3",children:[...Array(3)].map((t,s)=>e.jsx("div",{className:"h-32 bg-gray-200 rounded"},s))})]})}):e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Booking Management"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage reservations and guest communications for all your properties."})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[e.jsxs(Al,{className:"krib-card krib-glow-hover",children:[e.jsxs(Rl,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(Ol,{className:"text-sm",children:"Upcoming Bookings"}),e.jsx(U,{className:"h-4 w-4 text-krib-lime"})]}),e.jsxs($l,{children:[e.jsx("div",{className:"text-2xl font-bold",children:f.length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Next 30 days"})]})]}),e.jsxs(Al,{className:"krib-card krib-glow-hover",children:[e.jsxs(Rl,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(Ol,{className:"text-sm",children:"Check-ins Today"}),e.jsx(O,{className:"h-4 w-4 text-green-600"})]}),e.jsxs($l,{children:[e.jsx("div",{className:"text-2xl font-bold",children:g.length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Guests arriving"})]})]}),e.jsxs(Al,{className:"krib-card krib-glow-hover",children:[e.jsxs(Rl,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(Ol,{className:"text-sm",children:"Check-outs Today"}),e.jsx(O,{className:"h-4 w-4 text-orange-600"})]}),e.jsxs($l,{children:[e.jsx("div",{className:"text-2xl font-bold",children:x.length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Guests departing"})]})]})]}),e.jsxs("div",{className:"flex gap-4 items-center",children:[e.jsxs("div",{className:"relative flex-1 max-w-sm",children:[e.jsx(ae,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),e.jsx(pr,{placeholder:"Search bookings...",className:"pl-10",value:n,onChange:e=>i(e.target.value)})]}),e.jsxs(Gd,{value:o,onValueChange:l,children:[e.jsx(Vd,{className:"w-[180px]",children:e.jsx(Kd,{placeholder:"Filter by status"})}),e.jsxs(Jd,{children:[e.jsx(Yd,{value:"all",children:"All Statuses"}),e.jsx(Yd,{value:"confirmed",children:"Confirmed"}),e.jsx(Yd,{value:"pending",children:"Pending"}),e.jsx(Yd,{value:"completed",children:"Completed"}),e.jsx(Yd,{value:"cancelled",children:"Cancelled"}),e.jsx(Yd,{value:"no_show",children:"No Show"})]})]}),e.jsxs(mr,{variant:"outline",size:"sm",children:[e.jsx(ne,{className:"h-4 w-4 mr-2"}),"More Filters"]})]}),e.jsxs(ac,{value:c,onValueChange:d,children:[e.jsxs(nc,{children:[e.jsx(ic,{value:"all",children:"All Bookings"}),e.jsx(ic,{value:"confirmed",children:"Confirmed"}),e.jsx(ic,{value:"pending",children:"Pending"}),e.jsx(ic,{value:"completed",children:"Completed"})]}),e.jsx(oc,{value:c,className:"space-y-4",children:0===p.length?e.jsx(Al,{children:e.jsxs($l,{className:"p-8 text-center",children:[e.jsx(U,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"No bookings found"}),e.jsx("p",{className:"text-muted-foreground",children:0===t.length?"You don't have any bookings yet. Create some properties to start receiving bookings!":"Try adjusting your search or filter criteria."})]})}):e.jsx("div",{className:"space-y-4",children:p.map(t=>{const s=(e=>{switch(e){case"confirmed":case"completed":return Ie;case"pending":default:return Re;case"cancelled":case"no_show":return Oe}})(t.status);return e.jsx(Al,{children:e.jsx($l,{className:"p-6",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-20 h-20 rounded-lg bg-gray-200 flex items-center justify-center",children:e.jsx(ie,{className:"h-8 w-8 text-gray-400"})}),e.jsxs("div",{className:"flex-1 space-y-3",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium",children:t.property_title}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Booking #",t.id]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(Pc,{variant:Uu(t.status),children:[e.jsx(s,{className:"h-3 w-3 mr-1"}),t.status]}),e.jsxs(Iu,{children:[e.jsx($u,{asChild:!0,children:e.jsx(mr,{variant:"ghost",size:"sm",children:e.jsx(Te,{className:"h-4 w-4"})})}),e.jsxs(Du,{align:"end",children:[e.jsx(Lu,{children:"View Details"}),e.jsx(Lu,{children:"Contact Guest"}),e.jsx(Lu,{children:"Modify Booking"}),"pending"===t.status&&e.jsxs(e.Fragment,{children:[e.jsx(Lu,{onClick:()=>v(t.id,"confirmed"),children:"Confirm Booking"}),e.jsx(Lu,{onClick:()=>v(t.id,"cancelled"),children:"Decline Booking"})]}),"confirmed"===t.status&&e.jsx(Lu,{onClick:()=>v(t.id,"cancelled"),className:"text-destructive",children:"Cancel Booking"})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-1",children:"Guest Information"}),e.jsxs("div",{className:"space-y-1 text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(O,{className:"h-4 w-4"}),e.jsx("span",{children:t.guest_name})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(P,{className:"h-4 w-4"}),e.jsx("span",{children:t.guest_email})]}),t.guest_phone&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ae,{className:"h-4 w-4"}),e.jsx("span",{children:t.guest_phone})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-1",children:"Stay Details"}),e.jsxs("div",{className:"space-y-1 text-muted-foreground",children:[e.jsxs("div",{children:["Check-in: ",new Date(t.check_in).toLocaleDateString()]}),e.jsxs("div",{children:["Check-out: ",new Date(t.check_out).toLocaleDateString()]}),e.jsxs("div",{children:[t.nights," nights  ",t.guests," guests"]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-1",children:"Booking Summary"}),e.jsxs("div",{className:"space-y-1 text-muted-foreground",children:[e.jsxs("div",{children:["Total: $",t.total_amount]}),e.jsxs("div",{children:["Booked: ",new Date(t.created_at).toLocaleDateString()]}),t.special_requests&&e.jsxs("div",{className:"text-xs",children:["Special: ",t.special_requests]})]})]})]}),e.jsxs("div",{className:"flex gap-2 pt-2 border-t",children:[e.jsxs(mr,{variant:"outline",size:"sm",children:[e.jsx(P,{className:"h-4 w-4 mr-2"}),"Message Guest"]}),e.jsx(mr,{variant:"outline",size:"sm",children:"View Property"}),"pending"===t.status&&e.jsxs(e.Fragment,{children:[e.jsx(mr,{size:"sm",onClick:()=>v(t.id,"confirmed"),children:"Confirm"}),e.jsx(mr,{variant:"outline",size:"sm",onClick:()=>v(t.id,"cancelled"),children:"Decline"})]})]})]})]})})},t.id)})})})]})]})}function Bu(){const{getFinancialSummary:t,getBankAccounts:s,addBankAccount:r,requestPayout:a,getTransactions:n,updatePayoutSettings:i}=Pl(),[o,l]=Le.useState(null),[c,d]=Le.useState([]),[u,h]=Le.useState([]),[m,p]=Le.useState(!0),[f,g]=Le.useState(""),[x,v]=Le.useState(""),[b,y]=Le.useState(!1),[w,j]=Le.useState(!1),[N,k]=Le.useState({account_holder_name:"",bank_name:"",account_number:"",routing_number:"",account_type:"checking",is_primary:!1});Le.useEffect(()=>{!async function(){try{p(!0);const[e,r,a]=await Promise.all([t(),s(),n(20)]);l(e),d(r),h(a||[]);const i=r.find(e=>e.is_primary);i&&v(i.id)}catch(e){console.error("Failed to load financial data:",e)}finally{p(!1)}}()},[]);const _=e=>{switch(e){case"completed":return"bg-green-100 text-green-800";case"processing":return"bg-blue-100 text-blue-800";case"pending":return"bg-yellow-100 text-yellow-800";case"failed":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},S=t=>{switch(t){case"completed":return e.jsx(Ie,{className:"h-4 w-4"});case"processing":default:return e.jsx(Re,{className:"h-4 w-4"});case"pending":case"failed":return e.jsx(fe,{className:"h-4 w-4"})}};return m?e.jsx("div",{className:"p-6 space-y-6",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/4 mb-4"}),e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[...Array(4)].map((t,s)=>e.jsx("div",{className:"h-32 bg-gray-200 rounded"},s))})]})}):e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Financial Dashboard"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage your earnings, payouts, and financial settings"})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[e.jsxs(Al,{className:"krib-card krib-glow-hover",children:[e.jsxs(Rl,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(Ol,{className:"text-sm font-medium",children:"Available Balance"}),e.jsx(M,{className:"h-4 w-4 text-green-600"})]}),e.jsxs($l,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:["$",(null==o?void 0:o.pending_earnings.toFixed(2))||"0.00"]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Ready for payout"})]})]}),e.jsxs(Al,{className:"krib-card krib-glow-hover",children:[e.jsxs(Rl,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(Ol,{className:"text-sm font-medium",children:"Total Earnings"}),e.jsx(F,{className:"h-4 w-4 text-krib-lime"})]}),e.jsxs($l,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:["$",(null==o?void 0:o.total_earnings.toFixed(2))||"0.00"]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"All time earnings"})]})]}),e.jsxs(Al,{className:"krib-card krib-glow-hover",children:[e.jsxs(Rl,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(Ol,{className:"text-sm font-medium",children:"Total Payouts"}),e.jsx($e,{className:"h-4 w-4 text-purple-600"})]}),e.jsxs($l,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:["$",(null==o?void 0:o.total_payouts.toFixed(2))||"0.00"]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Money transferred"})]})]}),e.jsxs(Al,{className:"krib-card krib-glow-hover",children:[e.jsxs(Rl,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(Ol,{className:"text-sm font-medium",children:"Platform Fees"}),e.jsx(H,{className:"h-4 w-4 text-orange-600"})]}),e.jsxs($l,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:["$",(null==o?void 0:o.platform_fees.toFixed(2))||"0.00"]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Fees paid"})]})]})]}),e.jsxs(ac,{defaultValue:"payouts",className:"w-full",children:[e.jsxs(nc,{className:"grid w-full grid-cols-3",children:[e.jsx(ic,{value:"payouts",children:"Payouts"}),e.jsx(ic,{value:"transactions",children:"Transactions"}),e.jsx(ic,{value:"settings",children:"Settings"})]}),e.jsxs(oc,{value:"payouts",className:"space-y-4",children:[e.jsxs(Al,{children:[e.jsxs(Rl,{children:[e.jsx(Ol,{children:"Request Payout"}),e.jsx(Il,{children:"Transfer your available earnings to your bank account"})]}),e.jsxs($l,{className:"space-y-4",children:[o&&o.pending_earnings>0?e.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Amount"}),e.jsx("input",{type:"number",value:f,onChange:e=>g(e.target.value),placeholder:`Max: $${o.pending_earnings.toFixed(2)}`,max:o.pending_earnings,className:"w-full mt-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Bank Account"}),e.jsx("select",{value:x,onChange:e=>v(e.target.value),className:"w-full mt-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:c.map(t=>e.jsxs("option",{value:t.id,children:[t.bank_name," ****",t.account_number_last4]},t.id))})]}),e.jsx("div",{className:"flex items-end",children:e.jsx(mr,{onClick:async function(){if(f&&x)try{const e=await a(parseFloat(f));h(t=>[e,...t]),g("");const s=await t();l(s)}catch(e){console.error("Failed to request payout:",e),alert("Failed to request payout. Please try again.")}},disabled:!f||parseFloat(f)<=0,className:"w-full",children:"Request Payout"})})]}):e.jsxs(Eu,{children:[e.jsx(fe,{className:"h-4 w-4"}),e.jsx(Tu,{children:"No earnings available for payout. Complete bookings to start earning!"})]}),(null==o?void 0:o.next_payout_date)&&e.jsxs("div",{className:"text-sm text-muted-foreground",children:[e.jsx(U,{className:"inline h-4 w-4 mr-1"}),"Next automatic payout: ",new Date(o.next_payout_date).toLocaleDateString()]})]})]}),e.jsxs(Al,{children:[e.jsxs(Rl,{children:[e.jsx(Ol,{children:"Payout History"}),e.jsx(Il,{children:"Your recent payout requests and transfers"})]}),e.jsx($l,{children:e.jsx("div",{className:"space-y-4",children:u.length>0?u.map(t=>e.jsxs("div",{className:"flex items-center justify-between border-b pb-3 last:border-0",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[S(t.status),e.jsxs("span",{className:"font-medium",children:["$",t.amount.toFixed(2)]}),e.jsx(Pc,{className:_(t.status),children:t.status})]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[new Date(t.requested_at).toLocaleDateString(),t.estimated_arrival&&`  Arrives ${new Date(t.estimated_arrival).toLocaleDateString()}`]}),t.failure_reason&&e.jsx("p",{className:"text-sm text-red-600",children:t.failure_reason})]}),e.jsx("div",{className:"text-right text-sm text-muted-foreground",children:t.bank_info&&`${t.bank_info.bank_name} ****${t.bank_info.account_number_last4}`})]},t.id)):e.jsx("p",{className:"text-muted-foreground text-center py-4",children:"No payouts yet"})})})]})]}),e.jsx(oc,{value:"transactions",className:"space-y-4",children:e.jsxs(Al,{children:[e.jsxs(Rl,{children:[e.jsx(Ol,{children:"Recent Transactions"}),e.jsx(Il,{children:"Your earning transactions from bookings"})]}),e.jsx($l,{children:e.jsx("div",{className:"space-y-4",children:(null==o?void 0:o.recent_transactions.length)?o.recent_transactions.map(t=>e.jsxs("div",{className:"flex items-center justify-between border-b pb-3 last:border-0",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"font-medium",children:t.property_title}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[t.guest_name,"  ",new Date(t.date).toLocaleDateString()]}),e.jsx(Pc,{variant:"completed"===t.status?"default":"secondary",children:t.status})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"font-medium text-green-600",children:["+$",t.amount.toFixed(2)]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:t.type})]})]},t.id)):e.jsx("p",{className:"text-muted-foreground text-center py-4",children:"No transactions yet"})})})]})}),e.jsxs(oc,{value:"settings",className:"space-y-4",children:[e.jsxs(Al,{children:[e.jsxs(Rl,{children:[e.jsx(Ol,{children:"Bank Accounts"}),e.jsx(Il,{children:"Manage your payout destinations"})]}),e.jsx($l,{children:e.jsxs("div",{className:"space-y-4",children:[c.map(t=>e.jsx("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:t.bank_name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[t.account_type," ****",t.account_number_last4]}),e.jsxs("div",{className:"flex gap-2 mt-1",children:[t.is_primary&&e.jsx(Pc,{children:"Primary"}),e.jsx(Pc,{variant:t.is_verified?"default":"secondary",children:t.verification_status})]})]})},t.id)),e.jsxs(Zd,{open:b,onOpenChange:y,children:[e.jsx(eu,{asChild:!0,children:e.jsxs(mr,{variant:"outline",className:"w-full",children:[e.jsx(D,{className:"h-4 w-4 mr-2"}),"Add Bank Account"]})}),e.jsxs(ru,{className:"sm:max-w-[500px] bg-white border shadow-lg",children:[e.jsxs(au,{className:"pb-4 border-b",children:[e.jsx(nu,{className:"text-xl font-semibold text-gray-900",children:"Add Bank Account"}),e.jsx(iu,{className:"text-gray-600",children:"Add a bank account for receiving payouts. Your account information is encrypted and secure."})]}),e.jsx("div",{className:"space-y-4 py-6 bg-gray-50 rounded-lg",children:e.jsxs("div",{className:"space-y-4 bg-white p-4 rounded-md border",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Ul,{htmlFor:"account_holder_name",className:"text-sm font-medium text-gray-700",children:"Account Holder Name"}),e.jsx(pr,{id:"account_holder_name",value:N.account_holder_name,onChange:e=>k(t=>({...t,account_holder_name:e.target.value})),placeholder:"Full name on account",className:"bg-white border-gray-300 focus:border-blue-500 focus:ring-2 focus:ring-blue-200"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Ul,{htmlFor:"bank_name",className:"text-sm font-medium text-gray-700",children:"Bank Name"}),e.jsx(pr,{id:"bank_name",value:N.bank_name,onChange:e=>k(t=>({...t,bank_name:e.target.value})),placeholder:"e.g., Emirates NBD, ADCB, FAB",className:"bg-white border-gray-300 focus:border-blue-500 focus:ring-2 focus:ring-blue-200"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Ul,{htmlFor:"account_number",className:"text-sm font-medium text-gray-700",children:"Account Number"}),e.jsx(pr,{id:"account_number",type:"password",value:N.account_number,onChange:e=>k(t=>({...t,account_number:e.target.value})),placeholder:"Full account number",className:"bg-white border-gray-300 focus:border-blue-500 focus:ring-2 focus:ring-blue-200"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Ul,{htmlFor:"routing_number",className:"text-sm font-medium text-gray-700",children:"Routing Number / IBAN"}),e.jsx(pr,{id:"routing_number",value:N.routing_number,onChange:e=>k(t=>({...t,routing_number:e.target.value})),placeholder:"IBAN or routing number",className:"bg-white border-gray-300 focus:border-blue-500 focus:ring-2 focus:ring-blue-200"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Ul,{htmlFor:"account_type",className:"text-sm font-medium text-gray-700",children:"Account Type"}),e.jsxs(Gd,{value:N.account_type,onValueChange:e=>k(t=>({...t,account_type:e})),children:[e.jsx(Vd,{className:"bg-white border-gray-300 focus:border-blue-500 focus:ring-2 focus:ring-blue-200",children:e.jsx(Kd,{placeholder:"Select account type"})}),e.jsxs(Jd,{className:"bg-white border shadow-lg",children:[e.jsx(Yd,{value:"checking",children:"Checking"}),e.jsx(Yd,{value:"savings",children:"Savings"}),e.jsx(Yd,{value:"current",children:"Current"})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"is_primary",checked:N.is_primary,onChange:e=>k(t=>({...t,is_primary:e.target.checked})),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsx(Ul,{htmlFor:"is_primary",className:"text-sm text-gray-700",children:"Set as primary account"})]})]})}),e.jsxs("div",{className:"flex justify-end space-x-2 pt-4 border-t bg-white p-4 rounded-b-lg",children:[e.jsx(mr,{variant:"outline",onClick:()=>y(!1),children:"Cancel"}),e.jsx(mr,{onClick:async function(){if(N.account_holder_name&&N.bank_name&&N.account_number&&N.routing_number)try{j(!0);const e={...N,account_number_last4:N.account_number.slice(-4)},t=await r(e);d(e=>[...e,t]),k({account_holder_name:"",bank_name:"",account_number:"",routing_number:"",account_type:"checking",is_primary:!1}),y(!1),alert("Bank account added successfully!")}catch(e){console.error("Failed to add bank account:",e),alert("Failed to add bank account. Please try again.")}finally{j(!1)}else alert("Please fill in all required fields")},disabled:w,children:w?"Adding...":"Add Account"})]})]})]})]})})]}),e.jsxs(Al,{children:[e.jsxs(Rl,{children:[e.jsx(Ol,{children:"Payout Settings"}),e.jsx(Il,{children:"Configure automatic payouts and preferences"})]}),e.jsxs($l,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Payout Frequency"}),e.jsxs("select",{className:"w-full mt-1 px-3 py-2 border border-gray-300 rounded-md",children:[e.jsx("option",{value:"weekly",children:"Weekly"}),e.jsx("option",{value:"biweekly",children:"Bi-weekly"}),e.jsx("option",{value:"monthly",children:"Monthly"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Minimum Payout Amount"}),e.jsx("input",{type:"number",defaultValue:"25",className:"w-full mt-1 px-3 py-2 border border-gray-300 rounded-md"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"auto-payout",defaultChecked:!0}),e.jsx("label",{htmlFor:"auto-payout",className:"text-sm",children:"Enable automatic payouts"})]})]})]})]})]})]})}var zu="Switch",[Fu,qu]=u(zu),[Wu,Hu]=Fu(zu),Gu=Le.forwardRef((t,r)=>{const{__scopeSwitch:a,name:n,checked:i,defaultChecked:o,required:l,disabled:c,value:d="on",onCheckedChange:u,form:h,...m}=t,[f,x]=Le.useState(null),b=g(r,e=>x(e)),y=Le.useRef(!1),w=!f||(h||!!f.closest("form")),[j,N]=p({prop:i,defaultProp:o??!1,onChange:u,caller:zu});return e.jsxs(Wu,{scope:a,checked:j,disabled:c,children:[e.jsx(s.button,{type:"button",role:"switch","aria-checked":j,"aria-required":l,"data-state":Yu(j),"data-disabled":c?"":void 0,disabled:c,value:d,...m,ref:b,onClick:v(t.onClick,e=>{N(e=>!e),w&&(y.current=e.isPropagationStopped(),y.current||e.stopPropagation())})}),w&&e.jsx(Ju,{control:f,bubbles:!y.current,name:n,value:d,checked:j,required:l,disabled:c,form:h,style:{transform:"translateX(-100%)"}})]})});Gu.displayName=zu;var Ku="SwitchThumb",Vu=Le.forwardRef((t,r)=>{const{__scopeSwitch:a,...n}=t,i=Hu(Ku,a);return e.jsx(s.span,{"data-state":Yu(i.checked),"data-disabled":i.disabled?"":void 0,...n,ref:r})});Vu.displayName=Ku;var Ju=Le.forwardRef(({__scopeSwitch:t,control:s,checked:r,bubbles:a=!0,...n},i)=>{const o=Le.useRef(null),l=g(o,i),c=Rc(r),d=ce(s);return Le.useEffect(()=>{const e=o.current;if(!e)return;const t=window.HTMLInputElement.prototype,s=Object.getOwnPropertyDescriptor(t,"checked").set;if(c!==r&&s){const t=new Event("click",{bubbles:a});s.call(e,r),e.dispatchEvent(t)}},[c,r,a]),e.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:r,...n,tabIndex:-1,ref:l,style:{...n.style,...d,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});function Yu(e){return e?"checked":"unchecked"}Ju.displayName="SwitchBubbleInput";var Xu=Gu,Qu=Vu;function Zu({className:t,...s}){return e.jsx(Xu,{"data-slot":"switch",className:ur("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-switch-background focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",t),...s,children:e.jsx(Qu,{"data-slot":"switch-thumb",className:ur("bg-card dark:data-[state=unchecked]:bg-card-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0")})})}var eh=Array(12).fill(0),th=({visible:e,className:t})=>ze.createElement("div",{className:["sonner-loading-wrapper",t].filter(Boolean).join(" "),"data-visible":e},ze.createElement("div",{className:"sonner-spinner"},eh.map((e,t)=>ze.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${t}`})))),sh=ze.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},ze.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),rh=ze.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},ze.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),ah=ze.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},ze.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),nh=ze.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},ze.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),ih=ze.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},ze.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),ze.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),oh=1,lh=new class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{let t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;let{message:s,...r}=e,a="number"==typeof(null==e?void 0:e.id)||(null==(t=e.id)?void 0:t.length)>0?e.id:oh++,n=this.toasts.find(e=>e.id===a),i=void 0===e.dismissible||e.dismissible;return this.dismissedToasts.has(a)&&this.dismissedToasts.delete(a),n?this.toasts=this.toasts.map(t=>t.id===a?(this.publish({...t,...e,id:a,title:s}),{...t,...e,id:a,dismissible:i,title:s}):t):this.addToast({title:s,...r,dismissible:i,id:a}),a},this.dismiss=e=>(this.dismissedToasts.add(e),e||this.toasts.forEach(e=>{this.subscribers.forEach(t=>t({id:e.id,dismiss:!0}))}),this.subscribers.forEach(t=>t({id:e,dismiss:!0})),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let s;void 0!==t.loading&&(s=this.create({...t,promise:e,type:"loading",message:t.loading,description:"function"!=typeof t.description?t.description:void 0}));let r,a=e instanceof Promise?e:e(),n=void 0!==s,i=a.then(async e=>{if(r=["resolve",e],ze.isValidElement(e))n=!1,this.create({id:s,type:"default",message:e});else if(ch(e)&&!e.ok){n=!1;let r="function"==typeof t.error?await t.error(`HTTP error! status: ${e.status}`):t.error,a="function"==typeof t.description?await t.description(`HTTP error! status: ${e.status}`):t.description;this.create({id:s,type:"error",message:r,description:a})}else if(void 0!==t.success){n=!1;let r="function"==typeof t.success?await t.success(e):t.success,a="function"==typeof t.description?await t.description(e):t.description;this.create({id:s,type:"success",message:r,description:a})}}).catch(async e=>{if(r=["reject",e],void 0!==t.error){n=!1;let r="function"==typeof t.error?await t.error(e):t.error,a="function"==typeof t.description?await t.description(e):t.description;this.create({id:s,type:"error",message:r,description:a})}}).finally(()=>{var e;n&&(this.dismiss(s),s=void 0),null==(e=t.finally)||e.call(t)}),o=()=>new Promise((e,t)=>i.then(()=>"reject"===r[0]?t(r[1]):e(r[1])).catch(t));return"string"!=typeof s&&"number"!=typeof s?{unwrap:o}:Object.assign(s,{unwrap:o})},this.custom=(e,t)=>{let s=(null==t?void 0:t.id)||oh++;return this.create({jsx:e(s),id:s,...t}),s},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},ch=e=>e&&"object"==typeof e&&"ok"in e&&"boolean"==typeof e.ok&&"status"in e&&"number"==typeof e.status,dh=(e,t)=>{let s=(null==t?void 0:t.id)||oh++;return lh.addToast({title:e,...t,id:s}),s},uh=Object.assign(dh,{success:lh.success,info:lh.info,warning:lh.warning,error:lh.error,custom:lh.custom,message:lh.message,promise:lh.promise,dismiss:lh.dismiss,loading:lh.loading},{getHistory:()=>lh.toasts,getToasts:()=>lh.getActiveToasts()});function hh(e){return void 0!==e.label}!function(e,{insertAt:t}={}){if("undefined"==typeof document)return;let s=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css","top"===t&&s.firstChild?s.insertBefore(r,s.firstChild):s.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}(':where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}\n');var mh=3,ph=14;function fh(...e){return e.filter(Boolean).join(" ")}var gh=e=>{var t,s,r,a,n,i,o,l,c,d,u;let{invert:h,toast:m,unstyled:p,interacting:f,setHeights:g,visibleToasts:x,heights:v,index:b,toasts:y,expanded:w,removeToast:j,defaultRichColors:N,closeButton:k,style:_,cancelButtonStyle:S,actionButtonStyle:C,className:E="",descriptionClassName:P="",duration:T,position:A,gap:R,loadingIcon:O,expandByDefault:I,classNames:$,icons:D,closeButtonAriaLabel:L="Close toast",pauseWhenPageIsHidden:U}=e,[M,B]=ze.useState(null),[z,F]=ze.useState(null),[q,W]=ze.useState(!1),[H,G]=ze.useState(!1),[K,V]=ze.useState(!1),[J,Y]=ze.useState(!1),[X,Q]=ze.useState(!1),[Z,ee]=ze.useState(0),[te,se]=ze.useState(0),re=ze.useRef(m.duration||T||4e3),ae=ze.useRef(null),ne=ze.useRef(null),ie=0===b,oe=b+1<=x,le=m.type,ce=!1!==m.dismissible,de=m.className||"",ue=m.descriptionClassName||"",he=ze.useMemo(()=>v.findIndex(e=>e.toastId===m.id)||0,[v,m.id]),me=ze.useMemo(()=>{var e;return null!=(e=m.closeButton)?e:k},[m.closeButton,k]),pe=ze.useMemo(()=>m.duration||T||4e3,[m.duration,T]),fe=ze.useRef(0),ge=ze.useRef(0),xe=ze.useRef(0),ve=ze.useRef(null),[be,ye]=A.split("-"),we=ze.useMemo(()=>v.reduce((e,t,s)=>s>=he?e:e+t.height,0),[v,he]),je=(()=>{let[e,t]=ze.useState(document.hidden);return ze.useEffect(()=>{let e=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",e),()=>window.removeEventListener("visibilitychange",e)},[]),e})(),Ne=m.invert||h,ke="loading"===le;ge.current=ze.useMemo(()=>he*R+we,[he,we]),ze.useEffect(()=>{re.current=pe},[pe]),ze.useEffect(()=>{W(!0)},[]),ze.useEffect(()=>{let e=ne.current;if(e){let t=e.getBoundingClientRect().height;return se(t),g(e=>[{toastId:m.id,height:t,position:m.position},...e]),()=>g(e=>e.filter(e=>e.toastId!==m.id))}},[g,m.id]),ze.useLayoutEffect(()=>{if(!q)return;let e=ne.current,t=e.style.height;e.style.height="auto";let s=e.getBoundingClientRect().height;e.style.height=t,se(s),g(e=>e.find(e=>e.toastId===m.id)?e.map(e=>e.toastId===m.id?{...e,height:s}:e):[{toastId:m.id,height:s,position:m.position},...e])},[q,m.title,m.description,g,m.id]);let _e=ze.useCallback(()=>{G(!0),ee(ge.current),g(e=>e.filter(e=>e.toastId!==m.id)),setTimeout(()=>{j(m)},200)},[m,j,g,ge]);return ze.useEffect(()=>{if(m.promise&&"loading"===le||m.duration===1/0||"loading"===m.type)return;let e;return w||f||U&&je?(()=>{if(xe.current<fe.current){let e=(new Date).getTime()-fe.current;re.current=re.current-e}xe.current=(new Date).getTime()})():re.current!==1/0&&(fe.current=(new Date).getTime(),e=setTimeout(()=>{var e;null==(e=m.onAutoClose)||e.call(m,m),_e()},re.current)),()=>clearTimeout(e)},[w,f,m,le,U,je,_e]),ze.useEffect(()=>{m.delete&&_e()},[_e,m.delete]),ze.createElement("li",{tabIndex:0,ref:ne,className:fh(E,de,null==$?void 0:$.toast,null==(t=null==m?void 0:m.classNames)?void 0:t.toast,null==$?void 0:$.default,null==$?void 0:$[le],null==(s=null==m?void 0:m.classNames)?void 0:s[le]),"data-sonner-toast":"","data-rich-colors":null!=(r=m.richColors)?r:N,"data-styled":!(m.jsx||m.unstyled||p),"data-mounted":q,"data-promise":!!m.promise,"data-swiped":X,"data-removed":H,"data-visible":oe,"data-y-position":be,"data-x-position":ye,"data-index":b,"data-front":ie,"data-swiping":K,"data-dismissible":ce,"data-type":le,"data-invert":Ne,"data-swipe-out":J,"data-swipe-direction":z,"data-expanded":!!(w||I&&q),style:{"--index":b,"--toasts-before":b,"--z-index":y.length-b,"--offset":`${H?Z:ge.current}px`,"--initial-height":I?"auto":`${te}px`,..._,...m.style},onDragEnd:()=>{V(!1),B(null),ve.current=null},onPointerDown:e=>{ke||!ce||(ae.current=new Date,ee(ge.current),e.target.setPointerCapture(e.pointerId),"BUTTON"!==e.target.tagName&&(V(!0),ve.current={x:e.clientX,y:e.clientY}))},onPointerUp:()=>{var e,t,s,r;if(J||!ce)return;ve.current=null;let a=Number((null==(e=ne.current)?void 0:e.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),n=Number((null==(t=ne.current)?void 0:t.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),i=(new Date).getTime()-(null==(s=ae.current)?void 0:s.getTime()),o="x"===M?a:n,l=Math.abs(o)/i;if(Math.abs(o)>=20||l>.11)return ee(ge.current),null==(r=m.onDismiss)||r.call(m,m),F("x"===M?a>0?"right":"left":n>0?"down":"up"),_e(),Y(!0),void Q(!1);V(!1),B(null)},onPointerMove:t=>{var s,r,a,n;if(!ve.current||!ce||(null==(s=window.getSelection())?void 0:s.toString().length)>0)return;let i=t.clientY-ve.current.y,o=t.clientX-ve.current.x,l=null!=(r=e.swipeDirections)?r:function(e){let[t,s]=e.split("-"),r=[];return t&&r.push(t),s&&r.push(s),r}(A);!M&&(Math.abs(o)>1||Math.abs(i)>1)&&B(Math.abs(o)>Math.abs(i)?"x":"y");let c={x:0,y:0};"y"===M?(l.includes("top")||l.includes("bottom"))&&(l.includes("top")&&i<0||l.includes("bottom")&&i>0)&&(c.y=i):"x"===M&&(l.includes("left")||l.includes("right"))&&(l.includes("left")&&o<0||l.includes("right")&&o>0)&&(c.x=o),(Math.abs(c.x)>0||Math.abs(c.y)>0)&&Q(!0),null==(a=ne.current)||a.style.setProperty("--swipe-amount-x",`${c.x}px`),null==(n=ne.current)||n.style.setProperty("--swipe-amount-y",`${c.y}px`)}},me&&!m.jsx?ze.createElement("button",{"aria-label":L,"data-disabled":ke,"data-close-button":!0,onClick:ke||!ce?()=>{}:()=>{var e;_e(),null==(e=m.onDismiss)||e.call(m,m)},className:fh(null==$?void 0:$.closeButton,null==(a=null==m?void 0:m.classNames)?void 0:a.closeButton)},null!=(n=null==D?void 0:D.close)?n:ih):null,m.jsx||Le.isValidElement(m.title)?m.jsx?m.jsx:"function"==typeof m.title?m.title():m.title:ze.createElement(ze.Fragment,null,le||m.icon||m.promise?ze.createElement("div",{"data-icon":"",className:fh(null==$?void 0:$.icon,null==(i=null==m?void 0:m.classNames)?void 0:i.icon)},m.promise||"loading"===m.type&&!m.icon?m.icon||(null!=D&&D.loading?ze.createElement("div",{className:fh(null==$?void 0:$.loader,null==(Se=null==m?void 0:m.classNames)?void 0:Se.loader,"sonner-loader"),"data-visible":"loading"===le},D.loading):O?ze.createElement("div",{className:fh(null==$?void 0:$.loader,null==(Ce=null==m?void 0:m.classNames)?void 0:Ce.loader,"sonner-loader"),"data-visible":"loading"===le},O):ze.createElement(th,{className:fh(null==$?void 0:$.loader,null==(Ee=null==m?void 0:m.classNames)?void 0:Ee.loader),visible:"loading"===le})):null,"loading"!==m.type?m.icon||(null==D?void 0:D[le])||(e=>{switch(e){case"success":return sh;case"info":return ah;case"warning":return rh;case"error":return nh;default:return null}})(le):null):null,ze.createElement("div",{"data-content":"",className:fh(null==$?void 0:$.content,null==(o=null==m?void 0:m.classNames)?void 0:o.content)},ze.createElement("div",{"data-title":"",className:fh(null==$?void 0:$.title,null==(l=null==m?void 0:m.classNames)?void 0:l.title)},"function"==typeof m.title?m.title():m.title),m.description?ze.createElement("div",{"data-description":"",className:fh(P,ue,null==$?void 0:$.description,null==(c=null==m?void 0:m.classNames)?void 0:c.description)},"function"==typeof m.description?m.description():m.description):null),Le.isValidElement(m.cancel)?m.cancel:m.cancel&&hh(m.cancel)?ze.createElement("button",{"data-button":!0,"data-cancel":!0,style:m.cancelButtonStyle||S,onClick:e=>{var t,s;hh(m.cancel)&&ce&&(null==(s=(t=m.cancel).onClick)||s.call(t,e),_e())},className:fh(null==$?void 0:$.cancelButton,null==(d=null==m?void 0:m.classNames)?void 0:d.cancelButton)},m.cancel.label):null,Le.isValidElement(m.action)?m.action:m.action&&hh(m.action)?ze.createElement("button",{"data-button":!0,"data-action":!0,style:m.actionButtonStyle||C,onClick:e=>{var t,s;hh(m.action)&&(null==(s=(t=m.action).onClick)||s.call(t,e),!e.defaultPrevented&&_e())},className:fh(null==$?void 0:$.actionButton,null==(u=null==m?void 0:m.classNames)?void 0:u.actionButton)},m.action.label):null));var Se,Ce,Ee};function xh(){if("undefined"==typeof window||"undefined"==typeof document)return"ltr";let e=document.documentElement.getAttribute("dir");return"auto"!==e&&e?e:window.getComputedStyle(document.documentElement).direction}function vh(e,t){let s={};return[e,t].forEach((e,t)=>{let r=1===t,a=r?"--mobile-offset":"--offset",n=r?"16px":"32px";function i(e){["top","right","bottom","left"].forEach(t=>{s[`${a}-${t}`]="number"==typeof e?`${e}px`:e})}"number"==typeof e||"string"==typeof e?i(e):"object"==typeof e?["top","right","bottom","left"].forEach(t=>{void 0===e[t]?s[`${a}-${t}`]=n:s[`${a}-${t}`]="number"==typeof e[t]?`${e[t]}px`:e[t]}):i(n)}),s}var bh=Le.forwardRef(function(e,t){let{invert:s,position:r="bottom-right",hotkey:a=["altKey","KeyT"],expand:n,closeButton:i,className:o,offset:l,mobileOffset:c,theme:d="light",richColors:u,duration:h,style:m,visibleToasts:p=mh,toastOptions:f,dir:g=xh(),gap:x=ph,loadingIcon:v,icons:b,containerAriaLabel:y="Notifications",pauseWhenPageIsHidden:w}=e,[j,N]=ze.useState([]),k=ze.useMemo(()=>Array.from(new Set([r].concat(j.filter(e=>e.position).map(e=>e.position)))),[j,r]),[_,S]=ze.useState([]),[C,E]=ze.useState(!1),[P,T]=ze.useState(!1),[A,R]=ze.useState("system"!==d?d:"undefined"!=typeof window&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),O=ze.useRef(null),I=a.join("+").replace(/Key/g,"").replace(/Digit/g,""),$=ze.useRef(null),D=ze.useRef(!1),L=ze.useCallback(e=>{N(t=>{var s;return null!=(s=t.find(t=>t.id===e.id))&&s.delete||lh.dismiss(e.id),t.filter(({id:t})=>t!==e.id)})},[]);return ze.useEffect(()=>lh.subscribe(e=>{e.dismiss?N(t=>t.map(t=>t.id===e.id?{...t,delete:!0}:t)):setTimeout(()=>{Fe.flushSync(()=>{N(t=>{let s=t.findIndex(t=>t.id===e.id);return-1!==s?[...t.slice(0,s),{...t[s],...e},...t.slice(s+1)]:[e,...t]})})})}),[]),ze.useEffect(()=>{if("system"!==d)return void R(d);if("system"===d&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?R("dark"):R("light")),"undefined"==typeof window)return;let e=window.matchMedia("(prefers-color-scheme: dark)");try{e.addEventListener("change",({matches:e})=>{R(e?"dark":"light")})}catch(t){e.addListener(({matches:e})=>{try{R(e?"dark":"light")}catch(t){console.error(t)}})}},[d]),ze.useEffect(()=>{j.length<=1&&E(!1)},[j]),ze.useEffect(()=>{let e=e=>{var t,s;a.every(t=>e[t]||e.code===t)&&(E(!0),null==(t=O.current)||t.focus()),"Escape"===e.code&&(document.activeElement===O.current||null!=(s=O.current)&&s.contains(document.activeElement))&&E(!1)};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[a]),ze.useEffect(()=>{if(O.current)return()=>{$.current&&($.current.focus({preventScroll:!0}),$.current=null,D.current=!1)}},[O.current]),ze.createElement("section",{ref:t,"aria-label":`${y} ${I}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},k.map((t,r)=>{var a;let[d,y]=t.split("-");return j.length?ze.createElement("ol",{key:t,dir:"auto"===g?xh():g,tabIndex:-1,ref:O,className:o,"data-sonner-toaster":!0,"data-theme":A,"data-y-position":d,"data-lifted":C&&j.length>1&&!n,"data-x-position":y,style:{"--front-toast-height":`${(null==(a=_[0])?void 0:a.height)||0}px`,"--width":"356px","--gap":`${x}px`,...m,...vh(l,c)},onBlur:e=>{D.current&&!e.currentTarget.contains(e.relatedTarget)&&(D.current=!1,$.current&&($.current.focus({preventScroll:!0}),$.current=null))},onFocus:e=>{e.target instanceof HTMLElement&&"false"===e.target.dataset.dismissible||D.current||(D.current=!0,$.current=e.relatedTarget)},onMouseEnter:()=>E(!0),onMouseMove:()=>E(!0),onMouseLeave:()=>{P||E(!1)},onDragEnd:()=>E(!1),onPointerDown:e=>{e.target instanceof HTMLElement&&"false"===e.target.dataset.dismissible||T(!0)},onPointerUp:()=>T(!1)},j.filter(e=>!e.position&&0===r||e.position===t).map((r,a)=>{var o,l;return ze.createElement(gh,{key:r.id,icons:b,index:a,toast:r,defaultRichColors:u,duration:null!=(o=null==f?void 0:f.duration)?o:h,className:null==f?void 0:f.className,descriptionClassName:null==f?void 0:f.descriptionClassName,invert:s,visibleToasts:p,closeButton:null!=(l=null==f?void 0:f.closeButton)?l:i,interacting:P,position:t,style:null==f?void 0:f.style,unstyled:null==f?void 0:f.unstyled,classNames:null==f?void 0:f.classNames,cancelButtonStyle:null==f?void 0:f.cancelButtonStyle,actionButtonStyle:null==f?void 0:f.actionButtonStyle,removeToast:L,toasts:j.filter(e=>e.position==r.position),heights:_.filter(e=>e.position==r.position),setHeights:S,expandByDefault:n,gap:x,loadingIcon:v,expanded:C,pauseWhenPageIsHidden:w,swipeDirections:e.swipeDirections})})):null}))});function yh(){var t;const{user:s,signOut:r,updateUserProfile:a,updateUserSettings:n,changePassword:i,getUserNotifications:o,updateUserNotifications:l}=Pl(),[c,d]=Le.useState(!1),[u,h]=Le.useState(!1),[m,p]=Le.useState({current:"",new:"",confirm:""}),[f,g]=Le.useState({displayName:(null==s?void 0:s.name)||"",email:(null==s?void 0:s.email)||"",phoneNumber:(null==s?void 0:s.phone)||"",notifications:{bookings:!0,marketing:!1,systemUpdates:!0},preferences:{currency:"USD",timezone:"America/New_York",language:"English"}});Le.useEffect(()=>{x()},[s]);const x=async()=>{if(s)try{const e=await o();g(t=>({...t,displayName:s.name||"",email:s.email||"",phoneNumber:(null==s?void 0:s.phone)||"",notifications:e.notifications||t.notifications}))}catch(e){console.error("Failed to load user settings:",e)}},v=(null==s?void 0:s.email)&&"email"===!(null==(t=null==s?void 0:s.app_metadata)?void 0:t.provider);return e.jsxs("div",{className:"p-6 max-w-4xl mx-auto space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{children:"Account Settings"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage your account settings and preferences"})]}),e.jsxs("div",{className:"grid gap-6",children:[e.jsxs(Al,{className:"krib-card",children:[e.jsxs(Rl,{children:[e.jsx(Ol,{children:"Profile Information"}),e.jsx(Il,{children:"Update your personal information and contact details"})]}),e.jsx($l,{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Ul,{htmlFor:"displayName",children:"Display Name"}),e.jsx(pr,{id:"displayName",value:f.displayName,onChange:e=>g({...f,displayName:e.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Ul,{htmlFor:"email",children:"Email Address"}),e.jsx(pr,{id:"email",type:"email",value:f.email,onChange:e=>g({...f,email:e.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Ul,{htmlFor:"phone",children:"Phone Number"}),e.jsx(pr,{id:"phone",type:"tel",value:f.phoneNumber,onChange:e=>g({...f,phoneNumber:e.target.value})})]})]})})]}),e.jsxs(Al,{className:"krib-card",children:[e.jsxs(Rl,{children:[e.jsx(Ol,{children:"Notifications"}),e.jsx(Il,{children:"Choose what notifications you'd like to receive"})]}),e.jsxs($l,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(Ul,{children:"Booking Notifications"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Get notified about new bookings, cancellations, and updates"})]}),e.jsx(Zu,{checked:f.notifications.bookings,onCheckedChange:e=>g({...f,notifications:{...f.notifications,bookings:e}})})]}),e.jsx(br,{}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(Ul,{children:"Marketing Communications"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Receive tips, product updates, and promotional content"})]}),e.jsx(Zu,{checked:f.notifications.marketing,onCheckedChange:e=>g({...f,notifications:{...f.notifications,marketing:e}})})]}),e.jsx(br,{}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(Ul,{children:"System Updates"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Get notified about system maintenance and important updates"})]}),e.jsx(Zu,{checked:f.notifications.systemUpdates,onCheckedChange:e=>g({...f,notifications:{...f.notifications,systemUpdates:e}})})]})]})]}),e.jsxs(Al,{className:"krib-card",children:[e.jsxs(Rl,{children:[e.jsx(Ol,{children:"Preferences"}),e.jsx(Il,{children:"Customize your dashboard experience"})]}),e.jsx($l,{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Ul,{htmlFor:"currency",children:"Currency"}),e.jsxs("select",{id:"currency",className:"w-full px-3 py-2 border border-input bg-background rounded-md",value:f.preferences.currency,onChange:e=>g({...f,preferences:{...f.preferences,currency:e.target.value}}),children:[e.jsx("option",{value:"USD",children:"USD ($)"}),e.jsx("option",{value:"EUR",children:"EUR ()"}),e.jsx("option",{value:"GBP",children:"GBP ()"}),e.jsx("option",{value:"CAD",children:"CAD (C$)"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Ul,{htmlFor:"timezone",children:"Timezone"}),e.jsxs("select",{id:"timezone",className:"w-full px-3 py-2 border border-input bg-background rounded-md",value:f.preferences.timezone,onChange:e=>g({...f,preferences:{...f.preferences,timezone:e.target.value}}),children:[e.jsx("option",{value:"America/New_York",children:"Eastern Time"}),e.jsx("option",{value:"America/Chicago",children:"Central Time"}),e.jsx("option",{value:"America/Denver",children:"Mountain Time"}),e.jsx("option",{value:"America/Los_Angeles",children:"Pacific Time"}),e.jsx("option",{value:"Europe/London",children:"GMT"}),e.jsx("option",{value:"Europe/Paris",children:"CET"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Ul,{htmlFor:"language",children:"Language"}),e.jsxs("select",{id:"language",className:"w-full px-3 py-2 border border-input bg-background rounded-md",value:f.preferences.language,onChange:e=>g({...f,preferences:{...f.preferences,language:e.target.value}}),children:[e.jsx("option",{value:"English",children:"English"}),e.jsx("option",{value:"Spanish",children:"Spanish"}),e.jsx("option",{value:"French",children:"French"}),e.jsx("option",{value:"German",children:"German"})]})]})]})})]}),e.jsxs(Al,{className:"krib-card",children:[e.jsxs(Rl,{children:[e.jsx(Ol,{children:"Account Actions"}),e.jsx(Il,{children:"Manage your account and security settings"})]}),e.jsx($l,{className:"space-y-4",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsx(mr,{onClick:async()=>{d(!0);try{await a({name:f.displayName,phone:f.phoneNumber}),await l(f.notifications),await n({notifications:f.notifications,preferences:f.preferences}),uh.success("Settings saved successfully")}catch(e){console.error("Settings save error:",e),uh.error(e.message||"Failed to save settings")}finally{d(!1)}},disabled:c,className:"krib-button-primary",children:c?"Saving...":"Save Changes"}),e.jsxs(Zd,{open:u,onOpenChange:h,children:[e.jsx(eu,{asChild:!0,children:e.jsx(mr,{variant:"outline",children:"Change Password"})}),e.jsxs(ru,{className:"krib-card",children:[e.jsxs(au,{children:[e.jsx(nu,{children:v?"Set Password":"Change Password"}),e.jsx(iu,{children:v?"Set a password for your account to enable email/password sign-in.":"Enter your current password and choose a new one."})]}),e.jsxs("div",{className:"space-y-4",children:[!v&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(Ul,{htmlFor:"current-password",className:"text-sm font-medium text-gray-700",children:"Current Password"}),e.jsx(pr,{id:"current-password",type:"password",placeholder:"Enter current password",className:"h-12 rounded-xl border-gray-200 focus:border-krib-lime focus:ring-2 focus:ring-krib-lime/20",value:m.current,onChange:e=>p(t=>({...t,current:e.target.value}))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Ul,{htmlFor:"new-password",className:"text-sm font-medium text-gray-700",children:"New Password"}),e.jsx(pr,{id:"new-password",type:"password",placeholder:"Enter new password",className:"h-12 rounded-xl border-gray-200 focus:border-krib-lime focus:ring-2 focus:ring-krib-lime/20",value:m.new,onChange:e=>p(t=>({...t,new:e.target.value}))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Ul,{htmlFor:"confirm-password",className:"text-sm font-medium text-gray-700",children:"Confirm New Password"}),e.jsx(pr,{id:"confirm-password",type:"password",placeholder:"Confirm new password",className:"h-12 rounded-xl border-gray-200 focus:border-krib-lime focus:ring-2 focus:ring-krib-lime/20",value:m.confirm,onChange:e=>p(t=>({...t,confirm:e.target.value}))})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx(mr,{onClick:async()=>{if(m.new!==m.confirm)return void uh.error("New passwords do not match");if(m.new.length<6)return void uh.error("Password must be at least 6 characters long");const e=(null==s?void 0:s.email)&&!m.current;try{await i(m.current||"",m.new,m.confirm),uh.success(e?"Password set successfully":"Password changed successfully"),h(!1),p({current:"",new:"",confirm:""})}catch(t){console.error("Password change error:",t),uh.error(t.message||"Failed to change password")}},className:"flex-1 krib-button-primary",disabled:!v&&!m.current||!m.new||!m.confirm,children:v?"Set Password":"Change Password"}),e.jsx(mr,{variant:"outline",onClick:()=>h(!1),className:"flex-1",children:"Cancel"})]})]})]})]}),e.jsx(mr,{variant:"destructive",onClick:async()=>{try{await r(),uh.success("Signed out successfully")}catch(e){uh.error("Failed to sign out")}},children:"Sign Out"})]})})]})]})]})}function wh(){const{user:t,isLoading:s}=Pl(),r=Vt(),a=Yt(),n=e=>{const t=e.replace("/","")||"overview";return["overview","properties","add-property","analytics","bookings","financials","settings"].includes(t)?t:"overview"},[i,o]=Le.useState(n(r.pathname));Le.useEffect(()=>{o(n(r.pathname))},[r.pathname]);return s?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin h-8 w-8 border-2 border-primary border-t-transparent rounded-full mx-auto mb-4"}),e.jsx("p",{children:"Loading..."})]})}):t?e.jsx(ga,{children:e.jsxs("div",{className:"flex h-screen w-full",children:[e.jsx(dc,{activeSection:i,onSectionChange:e=>{o(e),a("overview"===e?"/":`/${e}`)}}),e.jsx("main",{className:"flex-1 overflow-auto krib-dashboard-background",style:{marginLeft:"16rem"},children:e.jsxs(ls,{children:[e.jsx(is,{path:"/",element:e.jsx(Tc,{})}),e.jsx(is,{path:"/overview",element:e.jsx(Tc,{})}),e.jsx(is,{path:"/properties",element:e.jsx(cu,{})}),e.jsx(is,{path:"/add-property",element:e.jsx(Ru,{})}),e.jsx(is,{path:"/analytics",element:e.jsx(Ou,{})}),e.jsx(is,{path:"/bookings",element:e.jsx(Mu,{})}),e.jsx(is,{path:"/financials",element:e.jsx(Bu,{})}),e.jsx(is,{path:"/settings",element:e.jsx(yh,{})})]})})]})}):e.jsx(lc,{})}function jh(){return e.jsx(us,{children:e.jsx(wh,{})})}function Nh(){return e.jsx(El,{children:e.jsx(jh,{})})}const kh=Le.createContext(void 0),_h={setTheme:e=>{},themes:[]},Sh=({...t})=>{const{theme:s="system"}=null!==(r=Le.useContext(kh))&&void 0!==r?r:_h;var r;return e.jsx(bh,{theme:s,className:"toaster group",style:{"--normal-bg":"var(--popover)","--normal-text":"var(--popover-foreground)","--normal-border":"var(--border)"},...t})};at.createRoot(document.getElementById("root")).render(e.jsx(ze.StrictMode,{children:e.jsxs(El,{children:[e.jsx(Nh,{}),e.jsx(Sh,{})]})}));
